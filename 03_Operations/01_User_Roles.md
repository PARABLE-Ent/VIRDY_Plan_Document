# 사용자 역할

> **문서 버전**: 1.1
> **최종 수정일**: 26.02.03 18:00
> **작성자**: 임경섭

---

## 1. 개요

VIRDY는 Creator와 Manager 두 가지 역할을 제공하여 프로덕션급 워크플로우를 지원한다. Creator는 아바타와 모션캡처를 포함한 전체 기능을 사용하며, Manager는 카메라/조명 등 프로덕션 지원에 집중한다. 역할은 회원가입 시 선택되며 계정에 고정된다.

---

## 2. 핵심 기획

### 2.1 역할 정의

| 구분 | Creator | Manager |
|------|---------|---------|
| 핵심 정의 | 아바타 + 모캡을 갖춘 전체 기능 사용자 | 프로덕션 제어에 집중하는 지원 사용자 |
| 리소스 사용 | 높음 (아바타, 애니메이션, 모캡 처리) | 낮음 (아바타/모캡 없음) |
| 주 사용 대상 | 콘텐츠 크리에이터, VTuber, 출연자 | 카메라맨, PD, 조명 기술자 |

### 2.2 역할별 기능 권한

| 기능 | Creator | Manager | 비고 |
|------|---------|---------|------|
| 아바타 인스턴스화 | ✅ | ❌ | 핵심 차이점 |
| 모션캡처 장비 연결 | ✅ | ❌ | Facial/Body/Hand |
| FreeCam 카메라 | ✅ | ✅ | |
| 고정 카메라 (1~9) | ✅ | ✅ | |
| Channel Link 송신/수신 | ✅ | ✅ | |
| 조명 제어 | ✅ | ✅ | 방향광 |
| 포스트 프로세싱 제어 | ✅ | ✅ | Bloom, Color |
| 세션 생성 | ✅ | ✅ | Free 플랜만 제한 (역할 무관) |
| 월드 참가 | ✅ | ✅ | 세션 코드로 참가 |
| 아바타 설정 패널 | ✅ | ❌ | |
| 트래커 설정 패널 | ✅ | ❌ | |
| 전체 채팅 | ✅ | ✅ | |
| 팀 채팅 | ✅ | ✅ | 역할별 분리 |

### 2.3 역할 선택 및 저장

#### 선택 시점

회원가입 시 Creator 또는 Manager를 선택한다. 상호 배타적이며, 선택 후 계정에 고정된다.

#### 저장 구조

| 위치 | 저장 방식 |
|------|----------|
| Firebase Firestore | users/{userId}/isCreator (boolean) |
| 로컬 캐시 | UserData.IsCreator |
| 네트워크 동기화 | NetworkPlayer.IsCreator (RPC) |

#### 네트워크 동기화

월드 입장 시 RPC를 통해 모든 접속자에게 역할이 전파된다. 이를 통해:
- 플레이어 목록에서 역할별 색상 표시
- 팀 채팅 라우팅
- UI 기능 접근 제어

### 2.4 팀 채팅 시스템

역할 기반으로 팀 채팅이 분리된다.

| 채팅 모드 | 수신 대상 | 설명 |
|----------|----------|------|
| 전체 채팅 [All] | 모든 접속자 | 역할 무관 |
| Creator 팀 [Creator] | Creator만 | Creator 역할 사용자에게만 전송 |
| Manager 팀 [Manager] | Manager만 | Manager 역할 사용자에게만 전송 |

#### 시각적 구분

| 항목 | 설명 |
|------|------|
| 플레이어 목록 색상 | Creator/Manager 별도 색상 |
| 채팅 메시지 접두사 | 팀 채팅 시 (Creator) 또는 (Manager) 표시 |
| 채팅 입력 모드 표시 | [All] / [Creator] / [Manager] |

### 2.5 프로덕션 워크플로우

#### 가상 방송 스튜디오 시나리오

| 역할 | 담당자 | 주요 업무 |
|------|--------|----------|
| Creator | 출연자 | 아바타 연기, 모션캡처 수행 |
| Manager | PD | 카메라 스위칭, 방송 송출 결정 |
| Manager | 카메라맨 A | CAM 1~3 촬영 |
| Manager | 카메라맨 B | CAM 4~6 촬영 |
| Manager | 카메라맨 C | CAM 7~9 촬영 |
| Manager | 조명 기술자 | 방향광, 포스트 프로세싱 조절 |

### 2.6 테넌트 내 권한 체계 검토 (서버 개발자 회의 기반)

> 🚧 아래 내용은 서버 개발자 회의(2026.02) 기반 검토 사항이다. 비용 및 기술적 타당성에 따라 변동될 수 있다.

서버 아키텍처 전환 시, 기존 Creator/Manager 역할 외에 **테넌트 내 관리 권한 체계**가 추가된다. Creator/Manager는 프로덕션 워크플로우 역할이고, Owner/Admin/Member는 테넌트 내 에셋/멤버 관리 권한이다.

#### 테넌트 관리 권한 (검토 중)

| 권한 | 설명 | 주요 기능 |
|------|------|----------|
| **Owner** | 테넌트 소유자 (최초 생성자) | 모든 권한 + 테넌트 삭제 + 멤버 관리 |
| **Admin** | 관리자 | 에셋 관리 + 멤버 초대 (Owner 제외) |
| **Member** | 일반 멤버 | 에셋 사용 + 세션 참여 |

#### 역할 체계 관계

| 차원 | 역할 | 용도 |
|------|------|------|
| 프로덕션 워크플로우 | Creator / Manager | 월드 내 기능 접근 (아바타, 카메라, 모캡) |
| 테넌트 관리 | Owner / Admin / Member | 에셋/멤버/구독 관리 권한 |

한 사용자는 두 차원의 역할을 동시에 갖는다. 예: Creator이면서 Admin, Manager이면서 Member 등.

---

## 3. 설계 시 고려사항

### 3.1 역할 고정 정책

역할은 회원가입 시 1회 선택하며 변경 불가. 이는 역할 기반 리소스 할당과 UI 구성을 단순화하기 위함이다. 향후 역할 변경 기능 추가를 고려할 수 있다.

### 3.2 리소스 최적화

Manager는 아바타/모캡 없이 동작하므로 PC 리소스 사용이 상대적으로 낮다. 프로덕션 환경에서 카메라맨/PD 용도의 PC에 최적화된 구성이 가능하다.

### 3.3 Channel Link와 역할

Channel Link는 역할에 관계없이 동등한 기능을 제공한다. Creator와 Manager 모두 카메라 송출/수신이 가능하다.

---

## 4. 엣지 케이스 및 예외 처리

| 상황 | 대응 |
|------|------|
| Free 플랜에서 세션 생성 시도 | UI에서 버튼 비활성화, 업그레이드 안내 |
| Manager가 아바타 설정 접근 | 로비에서 아바타/트래커 패널 숨김 |
| Creator 없이 Manager만 세션에 존재 | 정상 동작 (카메라 조작만 가능) |
| 역할 변경 요청 | 현재 미지원, 새 계정 생성 안내 |
| 팀 채팅에서 상대 역할 메시지 확인 | 팀 채팅은 같은 역할에게만 전송 |

---

## 5. 향후 확장 가능성

| 항목 | 설명 | 우선순위 |
|------|------|---------|
| **역할 변경** | 프로필에서 역할 변경 기능 | 낮음 |
| **관전자 역할** | 방송 관전만 가능한 역할 | 장기 |
| **커스텀 역할** | 프로덕션팀별 세밀한 권한 설정 | 장기 |
| **역할별 라이선스** | Creator/Manager 별도 가격 정책 | 중간 |

---

## 관련 문서

- [제품 개요](../01_Product/01_Product_Overview.md)
- [사용자 플로우](../01_Product/02_User_Flow.md)
- [카메라 시스템](../02_Features/03_Camera_System.md)
- [UI 기획](../04_Design/01_UI_Specification.md)
