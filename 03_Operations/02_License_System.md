# 라이선스 체계

> **문서 버전**: 1.2
> **최종 수정일**: 26.02.03 20:00
> **작성자**: 임경섭

---

## 1. 개요

VIRDY의 라이선스 체계는 SaaS 구독 모델을 기반으로 설계된다. **Free / Starter / Pro / Studio / Enterprise** 5단계 티어로 구성되며, 각 티어는 사용자 세그먼트(체험자, 입문자, 개인 크리에이터, 프로덕션 스튜디오, 기업)별 차별화된 기능과 비용 구조를 제공한다.

> 🚧 모든 아바타/월드 데이터는 **서버에 저장**되며, 로컬 저장 방식은 사용하지 않는다. 클라이언트는 서버에서 다운로드 받아 사용한다.

---

## 2. 핵심 기획

### 2.1 구독 플랜 티어

| 항목 | Free | Starter | Pro | Studio | Enterprise |
|------|------|---------|-----|--------|------------|
| **대상** | 체험자 | 입문자 | 개인 크리에이터 | 중규모 팀 / 스튜디오 | 기업/대규모 프로덕션 |
| **방 생성** | ❌ | ❌ | ✅ | ✅ | ✅ |
| **세션 최대 Actor** | - | - | 3 | 6 | 10+ |
| **동시 방 보유** | 0개 | 0개 | 1개 | 1개 | 협의 |
| **매니저 모드** | 수정중 (RPC 리스트업) |
| **Sync 모드** | Live | Live | Live | Live | Live / Ultra |
| **아바타 슬롯** | 3개 | 10개 | 50개 | 50개 | 협의 |
| **아바타 용량 제한** | 200MB/개 | 200MB/개 | 200MB/개 | 200MB/개 | 협의 |
| **월드 용량 제한** | - | 300MB | 800MB | 800MB | 협의 |
| **상업적 사용** | 제한적 허용 |

> **동시 방 보유 정책**: 비용 및 운영 복잡도를 고려하여, 모든 개인 플랜(Starter/Pro/Studio)의 동시 방 보유 수는 **1개로 고정**한다. 기존 세션이 있는 상태에서 새 세션 생성 시, 기존 세션 종료 후 생성하도록 안내한다.

> **상업적 사용 정책**: 상업적 사용이라 함은 콘서트, MV, 영상물 등 기업에서 상업적 사용을 목적으로 할 때에 제한적으로 둔다. 대체로 허용되는 수준이오나 특정 구간, 콘텐츠에서의 상업 제한이 필요할지는 검토 필요

### 2.2 Sync 모드

네트워크 동기화 품질은 **Live**와 **Ultra** 두 가지 모드로 구분된다.

| 모드 | 대상 플랜 | 특징 | 용도 |
|------|----------|------|------|
| **Live** | 모든 플랜 | 경량 모션 데이터, 비용 효율적 | 일반 방송, 개인 사용 |
| **Ultra** | Enterprise 전용 | 고품질 모션 데이터, 높은 대역폭 | 공연, 특수 연출, 전문 프로덕션 |

**Sync 모드 설계 원칙:**
- Sync 품질은 기술 옵션이 아닌 **비용 및 계약 개념**으로 관리
- 현재 사용 중인 고용량 모션 데이터는 일반 사용에 부적합
- Live Sync 전용으로 최적화된 경량 모션 데이터 개발 필요

### 2.3 스토리지 정책

모든 아바타/월드 데이터는 **서버(클라우드)에만 저장**되며, 로컬 저장 방식은 사용하지 않는다. 클라이언트는 로비 진입 시 서버에서 데이터를 다운로드하여 사용한다.

아바타 슬롯 수 제한은 사용자에게 직접 노출하지 않고, 내부적으로만 관리한다. 실질적으로 제한이 없는 수준(50개)으로 설정하여 사용자 경험을 해치지 않는다.

| 티어 | 아바타 보관 | 아바타 용량 | 월드 용량 | 비고 |
|------|-----------|-----------|----------|------|
| Free | 3개 | 200MB/개 | - | 체험용, 월드 업로드 불가 |
| Starter | 10개 | 200MB/개 | 300MB | 입문자용 |
| Pro | 50개 | 200MB/개 | 800MB | 사실상 무제한 |
| Studio | 50개 | 200MB/개 | 800MB | 팀 사용 지원 |
| Enterprise | 협의 | 협의 | 협의 | 맞춤 계약 |

### 2.4 Studio / Enterprise 플랜

Studio와 Enterprise 플랜은 팀 또는 기업 단위 사용을 고려한 플랜이다.

| 항목 | Studio | Enterprise |
|------|--------|------------|
| 대상 | 규모 있는 개인 크리에이터, 소규모 팀 | 기업, 대규모 프로덕션 |
| 조직 관리 | 📋 검토 중 | ✅ 조직 시트 기반 |
| Ultra Sync | ❌ | ✅ (공연, 특수 연출) |
| 맞춤 계약 | ❌ | ✅ |

**Enterprise 조직 시트**:
- 관리자가 멤버를 이메일로 초대하여 시트 할당
- 어드민 페이지에서 멤버 추가/제거/권한 관리
- 시트별 권한 할당 가능

**Studio 조직 시트 검토 사항**:
- Studio는 기업뿐 아니라 개인 크리에이터도 사용 가능
- 개인 방송인에게 조직 관리 기능 제공이 불필요할 수 있음
- 조직 시트 제공 여부 추가 논의 필요

### 2.5 Actor 및 Seat 개념

플랜별 Actor 수 제한은 서버 측에서 검증되며, 유료 테넌트에는 Seat(멤버 초대 가능 수) 개념이 도입된다.

#### Actor 개념

**Actor**는 아바타 + 트래커 조합의 단위이다. 1명의 사용자가 여러 개의 Actor를 동시에 운용할 수 있다.

| 용어 | 설명 |
|------|------|
| **개인 Actor 수** | 한 사용자가 자신의 PC에서 동시에 운용할 수 있는 Actor 수 (플랜별 상이) |
| **세션 최대 Actor** | 한 세션(방)에 동시에 입장할 수 있는 총 Actor 수 (호스트 플랜 기준) |

**매니저(Manager)도 1 Actor로 계산**: 아바타 없이 매니저로 참여하는 사용자도 세션 최대 Actor 수에 포함된다. 이는 세션 자원 관리를 단순화하고, 네트워크 부하 계산을 일관되게 하기 위함이다.

**시나리오 예시**:
- Pro 플랜 호스트가 세션을 생성 (세션 최대 Actor: 3)
- 호스트가 Actor 2개를 사용 → 남은 슬롯 1개
- 다른 사용자가 Creator(아바타 있음)로 참여 시: 1 Actor 차지 → 세션 가득 참
- 다른 사용자가 Manager(아바타 없음)로 참여 시: 동일하게 1 Actor 차지 → 세션 가득 참

#### 플랜별 개인 Actor 수

| 플랜 | 개인 Actor 수 | 비고 |
|------|-------------|------|
| Free | 1개 | 단일 사용자 |
| Starter | 1개 | 단일 사용자 |
| Pro | 2개 | 권장 사양 (1 PC 기준 최적 성능) |
| Studio | 4개 | 고사양 PC 필요 |
| Enterprise | 6개+ | 고사양 PC, 상황에 따라 워크스테이션 필요 |

#### Seat 개념 (검토 중)

| 항목 | 설명 |
|------|------|
| 정의 | 유료 테넌트의 멤버 초대 가능 수 |
| 적용 범위 | 유료 플랜 (Enterprise 중심) |
| 관리 | 테넌트 Owner/Admin이 Seat 할당 및 초대 |

### 2.6 방 생성 및 세션 제한

비용 및 운영 복잡도를 고려하여, **계정당 방 보유 수는 1개로 고정**한다.

| 제한 항목 | Free | Starter | Pro | Studio | Enterprise |
|----------|------|---------|-----|--------|------------|
| 동시 세션 생성 | 0 | 0 | 1 | 1 | 협의 |
| 세션 최대 Actor | - | - | 3 | 6 | 10+ |

**세션 유지 조건:**
- **Pro 이상 플랜 사용자**가 최소 1명 이상 접속 중일 때만 세션 유지
- Free/Starter 사용자만 남은 세션은 "0명" 취급 → 10분 유예 후 파기
- 세션 소유자 퇴장 시 남은 **Pro 이상 플랜 사용자**에게 소유권 자동 이전
  - Creator/Manager 역할 구분 없이 **플랜 등급만 확인**
  - Pro 플랜 Manager도 세션 소유권 이전 대상에 포함됨

**세션 권한 이전 시나리오**:
- Pro Creator 2명 + Pro Manager 1명이 세션에 참가 중
- Pro Creator 2명이 모두 퇴장 → Pro Manager에게 세션 소유권 이전
- Pro Manager는 Pro 플랜이므로 세션 유지 (10분 유예 적용 안 됨)
- 이후 Pro Manager도 퇴장하면 → Free/Starter만 남으면 10분 유예 후 세션 종료

**세션 관리 기능:**
- 유료 플랜 사용자는 로비에서 "내 세션" 패널을 통해 활성 세션 관리
- 세션 리스트 조회, 재접속, 강제 종료 가능
- **기존 세션이 있는 상태에서 새 월드 생성 시**: 기존 세션 강제 종료 안내 → 확인 후 새 세션 생성

> 세션 생명주기 상세 정책은 [데이터 생명주기](./04_Data_Lifecycle.md) 참조

### 2.7 Free / Starter 플랜 설계 원칙

**Free 플랜**은 체험용으로, 기능 및 사용성에 제한을 두어 유료 전환을 유도한다. **Starter 플랜**은 월 구독 중 가장 저렴한 옵션으로, 편안하게 사용할 수 있는 입문 버전이다.

| 항목 | Free | Starter |
|------|------|---------|
| 방 생성 | ❌ | ❌ |
| 세션 참가 | ✅ (매니저로만) | ✅ (매니저로만) |
| 세션 참가 시 역할 | Manager 전용 | Manager 전용 |
| 로컬 사용 | ✅ | ✅ |
| 아바타 슬롯 | 3개 | 10개 |
| 월드 업로드 | ❌ | ✅ |
| 트래커 사용 | ✅ (로컬) | ✅ (로컬) |
| 채팅 참여 | ✅ | ✅ |
| 상업적 사용 | ❌ | ❌ |

**Free / Starter 세션 참가 제한**:
- Free/Starter 사용자는 **로컬에서만 Creator(아바타 있음)로 사용** 가능
- 멀티플레이어 세션에 초대받아 참가할 때는 **Manager(아바타 없음)로만 참여** 가능
- Manager로 참여해도 **1 Actor로 계산**되어 세션 최대 Actor에 포함됨
- 세션 내에서 카메라 조작, 채팅 등 Manager 기능은 모두 사용 가능

**Free → Starter/Pro 전환 유도 전략 (검토 중)**:

Free 플랜에서 충분히 기능을 체험할 수 있지만, 다음과 같은 제한으로 유료 전환을 유도한다:

| 제한 방식 | 설명 | 장점 | 단점 |
|----------|------|------|------|
| 방 생성 불가 | 초대받아서만 참여 가능 | 명확한 차별점 | 멀티가 필요없는 유저라면 제한이 아님 |
| 워터마크 | 화면에 VIRDY 로고 표시 | 바이럴 효과 | 사용자 불편 |
| 기능 잠금 | 일부 고급 기능 잠금 (예: 조명 제어) | 핵심 기능은 체험 가능 | 제한 기준 설정 어려움 |

> 📋 각 플랜의 구체적인 제한 범위는 추가 논의가 필요하다.

### 2.8 가격 정책 (검토 중)

| 모델 | 설명 | 상태 |
|------|------|------|
| SaaS 구독 | 월간/연간 구독 | 📋 주력 검토 |

---

## 3. 설계 시 고려사항

### 3.1 비용 산정 원칙

비용 산정은 항상 **최악의 경우(Worst Case)**를 기준으로 고려한다.

| 비용 요소 | 중요도 | 설명 |
|----------|--------|------|
| **Photon 서버 비용** | 높음 | 동시 접속자 수, 세션 수에 비례 |
| **다운로드 트래픽** | 높음 | 월드/아바타 다운로드 (현재 1GB당 약 150원) |
| **스토리지 비용** | 중간 | 비활성 계정 데이터 장기 보관 시 누적 |

> 상세 비용 산출, 플랜별 마진 분석, 손익분기점(BEP)은 [비용 분석](./07_Cost_Analysis.md) 참조

### 3.2 리전별 비용 차이

Firebase Storage 다운로드 비용은 리전에 따라 다르므로, 서비스 리전 선택 시 비용 확인 필요.

### 3.3 플랜 등급 하락 정책

Enterprise → 하위 플랜으로 등급 하락 시:

| 정책 | 설명 |
|------|------|
| 즉시 삭제 | ❌ 부적절 |
| 유예 기간 | 일정 기간 데이터 다운로드 가능 |
| Archive/Frozen | 아카이브로 데이터 이동 (서버 비용 감축) |
| 장기 미복귀 | 6~12개월 후 데이터 삭제 |

> 상세 정책은 [데이터 생명주기](./04_Data_Lifecycle.md) 문서 참조

### 3.4 결제 시스템 (미구현)

현재 코드베이스에 결제/빌링 시스템이 없다. 향후 구현 시 고려할 사항:

- Stripe 또는 결제 게이트웨이 통합
- 구독 상태 관리 (Firebase Functions)
- 라이선스 키 발급 및 검증
- 평가판 기간 로직
- Steam DRM / 가격 정책 연동

### 3.5 보안 취약점

| 취약점 | 설명 |
|--------|------|
| 클라이언트 측 제한만 적용 | 서버 측 검증 없음 |
| 메모리 해킹 가능 | MaxActorSize 런타임 변경 가능 |

향후 서버 측 라이선스 검증, 암호화된 라이선스 토큰, 주기적 라이선스 확인이 필요하다.

---

## 4. 엣지 케이스 및 예외 처리

| 상황 | 대응 |
|------|------|
| 무료 플랜에서 방 생성 시도 | UI에서 비활성화 + 업그레이드 안내 |
| 구독 만료 시 | 데이터 손실 없이 기능 차단, 갱신 안내 |
| 동시 방 한도 초과 | 새 방 생성 차단, 기존 방 종료 유도 |
| Enterprise → Pro 등급 하락 | 유예 기간 제공, 데이터 아카이브 |
| 결제 실패 | 유예 기간 제공 후 기능 제한 |
| Ultra Sync 네트워크 조건 미달 | Live로 자동 전환 + 안내 |

---

## 5. 미결정 쟁점

| 항목 | 상태 | 비고 |
|------|------|------|
| Free 플랜 제한 방식 | 📋 논의 필요 | 워터마크 / 세션 시간 제한 / 기능 잠금 등 |
| Studio 플랜 조직 시트 제공 여부 | 📋 논의 필요 | 개인 크리에이터에게 불필요할 수 있음 |
| 구독 종료 후 데이터 보관 기간 | 📋 논의 필요 | Google Drive 등 벤치마킹 |
| Enterprise 시트 구조의 구체적 운영 방식 | 📋 논의 필요 | 어드민 페이지 기능 범위 |
| 플랜별 가격 | 📋 논의 필요 | - |
| Starter/Pro 플랜의 정확한 포지셔닝 | 📋 논의 필요 | Free와 Pro 사이 차별점 명확화 |

---

## 6. 향후 확장 가능성

| 항목 | 설명 | 우선순위 |
|------|------|---------|
| **5티어 플랜 기능 제한/구현** | Free/Starter/Pro/Studio/Enterprise | 높음 |
| **결제 시스템** | Stripe/Steam 결제 연동 | 높음 |
| **조직 관리 페이지** | Enterprise 어드민 페이지 (멤버 초대/관리) | 높음 |
| **라이선스 서버** | 서버 측 라이선스 검증 | 중간 |
| **평가판** | 기간 한정 Pro/Studio 체험 | 중간 |
| **Ultra Sync 구현** | Enterprise 전용 고품질 동기화 | 중간 |

---

## 관련 문서

- [제품 개요](../01_Product/01_Product_Overview.md)
- [사용자 역할](./01_User_Roles.md)
- [보안 시스템](./03_Security.md)
- [데이터 생명주기](./04_Data_Lifecycle.md)
- [리스크 관리](./05_Risk_Management.md)
- [계정 시스템](./06_Account_System.md)
- [네트워크 시스템](../02_Features/05_Network_System.md)
