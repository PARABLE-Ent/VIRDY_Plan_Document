# 리스크 관리

> **문서 버전**: 1.0
> **최종 수정일**: 26.01.30 13:20
> **작성자**: 임경섭

---

## 1. 개요

이 문서는 VIRDY 서비스 운영 시 막아야 할 위험(Risk)을 식별하고, 각 위험에 대한 대응 방안을 정의한다. 비용, 악용, 네트워크 품질, 신뢰 관련 리스크를 체계적으로 관리하여 서비스 안정성과 수익성을 확보한다.

---

## 2. 리스크 분류

| 분류 | 리스크 번호 | 설명 |
|------|-----------|------|
| **비용 관련** | R1, R5 | 서버/스토리지 비용 폭주 |
| **악용 관련** | R2, R3, R9 | 무료/저책임 계정의 시스템 악용 |
| **UX 관련** | R4 | 정상 사용자 피해 |
| **네트워크 품질** | R6, R7, R8, R11 | 동기화 품질 저하 |
| **운영 관련** | R10 | 책임 소재 불명확 |

---

## 3. 리스크 상세

### R1. 방 생성 남발로 인한 서버 및 네트워크 비용 폭주

| 항목 | 내용 |
|------|------|
| **위험** | 방 생성/종료가 잦을 경우 Photon 및 서버 비용이 예측 불가능해짐 |
| **시나리오** | "방 생성 후 이탈"을 반복하는 패턴 악용 |
| **영향** | 실제 사용 인원 대비 과도한 리소스 사용 |

**대응 방안:**
- 플랜별 동시 방 생성 수 제한 (무료: 0, Pro: 1, Studio: 3, Enterprise: 10+)
- 방 생성 후 최소 유지 시간 설정 검토

---

### R2. 방 파주기(생성 후 이탈) 악용

| 항목 | 내용 |
|------|------|
| **위험** | 방을 생성한 뒤 다른 사용자를 위해 남겨두고 이탈하는 행위 반복 |
| **시나리오** | 사실상 무제한 방 생성 효과 발생 |
| **영향** | 방 생성 제한이 무력화됨 |

**대응 방안:**
- ✅ **호스트 유예 정책**: 호스트 퇴장 시 즉시 이전하지 않고 10분 유예
- ✅ **재접속 우선**: 유예 기간 내 호스트 복귀 시 그대로 호스트 유지
- ✅ **호스트 이전 조건**: 유예 종료 시 + 다른 유료 사용자가 있을 때만 호스트 자동 이전
- ✅ **Free 사용자 "0명" 취급**: Free 사용자만 남으면 10분 유예 후 월드 자동 종료
- ✅ **새 월드 열기 시 이전**: 호스트가 새 월드를 열면 기존 월드의 호스트가 남은 유저에게 이전
- 결론: 호스트 유예 정책 + 동시 월드 제한으로 악용 방지 및 재접속 편의성 확보

---

### R3. 무료/저책임 계정의 운영 기능 악용

| 항목 | 내용 |
|------|------|
| **위험** | 비용·운영 책임을 지지 않는 계정이 운영 기능을 사용 |
| **시나리오** | 무료 계정이 방 생성 또는 운영 기능 악용 |
| **영향** | 시스템 악용, 품질 저하, 유료/무료 플랜 간 책임 구조 붕괴 |

**대응 방안:**
- Free 유저는 방생성이 불가능하기에 해당 이슈에서 제외
- Session에 함께 있는 유저들은 상호간 신뢰를 바탕으로 함께 접속된 유저들, 그들간의 악용에 대한 이슈는 크게 없을 것으로 판단됨.
- 하지만 Session의 코드를 뚫고 들어오는 유저가 있을 수 있음. 코드 수 4자리 -> 더 늘리는 것 고려

---

### R4. 동시 방 제한으로 인한 정상 사용자 피해

| 항목 | 내용 |
|------|------|
| **위험** | 이미 이탈한 방에 다른 사용자가 남아있어 새 방 생성이 제한됨 |
| **시나리오** | 개인 사용과 운영 목적 사용 구분 없이 제한 적용 |
| **영향** | 정상 사용자 불만 증가 |

**대응 방안:**
- ✅ **호스트 유예 정책**: 퇴장 시 즉시 이전되지 않으므로, 재접속 시 월드 코드 없이 복귀 가능
- ✅ **새 월드 열기 시 자동 이전**: 기존 월드 닫기 → 남은 유저에게 호스트 이전 (모두 퇴장 X)
- ✅ **0명 월드 자동 종료**: 유료 사용자 0명 시 10분 유예 후 자동 종료
- ✅ **플레이어 목록에 호스트 표시**: 👑 왕관으로 현재 호스트 명확히 표시
- 📋 **활성 월드 리스트 (검토 중)**: 내 월드/친구 월드 관리 UI (UX 협의 필요)
- 결론: 호스트 유예 + 자동 이전 정책으로 재접속 편의성 확보, 불만 최소화

---

### R5. 구독 종료 후 데이터(월드/아바타) 비용 누적

| 항목 | 내용 |
|------|------|
| **위험** | 구독 종료된 계정의 데이터가 장기 보관되어 비용 유발 |
| **시나리오** | 비활성 계정이 지속적인 스토리지 비용 발생 |
| **영향** | 정리 기준 없을 경우 비용 누적 |

**대응 방안:**
- 데이터 생명주기 관리 정책 수립 (→ [데이터 생명주기](./04_Data_Lifecycle.md) 참조)
- 아카이브/Frozen 개념 도입
- 6~12개월 장기 미복귀 시 삭제

---

### R6. 네트워크 품질 미달로 인한 세션 성립 실패

| 항목 | 내용 |
|------|------|
| **위험** | 특정 리전 또는 사용자 환경에서 RTT, 패킷 손실, 지터가 기준 이하 |
| **시나리오** | 멀티 세션이 불안정하거나 빈번히 끊김 |
| **영향** | Live Sync조차 유지되지 않는 환경은 서비스 실패로 이어짐 |

**대응 방안:**
- 네트워크 품질 측정 및 사전 경고 시스템
- 최소 품질 요구사항 명시 및 안내
- 리전 선택 옵션 제공 검토

---

### R7. Ultra Sync 유지 실패로 인한 Enterprise 신뢰 하락

| 항목 | 내용 |
|------|------|
| **위험** | Enterprise 플랜에서 Ultra Sync 선택 후 네트워크 조건 문제로 유지 불가 |
| **시나리오** | 고가 플랜 구매 후 약속된 품질 제공 실패 |
| **영향** | "비싸게 팔고 안 된다"는 인식 형성 |

**대응 방안:**
- Ultra → Live 자동 전환 및 안내 시스템
- 사전 네트워크 테스트 도구 제공
- 적절한 보상 구조 검토 (크레딧, 환불 정책)

---

### R8. 세션 Sync Mode 혼선으로 인한 품질 불일치

| 항목 | 내용 |
|------|------|
| **위험** | Ultra / Live Sync가 명확한 세션 상태로 관리되지 않음 |
| **시나리오** | 참여자마다 서로 다른 동기화 방식이 섞임 |
| **영향** | 디버깅 불가, 품질 불균형, 사용자 불만 |

**대응 방안:**
- 세션 생성 시 Sync Mode 명시적 설정
- 세션 참가 시 모드 확인 및 동의
- 모드 불일치 시 참가 거부 또는 경고

---

### R9. 클라이언트 분기 기반 Sync Mode 악용 가능성

| 항목 | 내용 |
|------|------|
| **위험** | Photon Shared 구조상 서버가 클라이언트 송신 데이터를 완전히 검증할 수 없음 |
| **시나리오** | 악의적 클라이언트가 Live 세션에서 Ultra 수준 패킷 송신, 비정상 고빈도 데이터 전송 |
| **영향** | 리소스 낭비 및 품질 교란 |

**대응 방안:**
- 클라이언트 측 데이터 전송 빈도 제한
- 비정상 패턴 감지 및 경고
- 심각한 악용 시 세션에서 퇴장 처리

---

### R10. Sync Mode 결정 주체 불명확으로 인한 책임 붕괴

| 항목 | 내용 |
|------|------|
| **위험** | Ultra / Live Sync 전환 권한이 명확히 정의되지 않음 |
| **시나리오** | 임의 전환, 사용자 간 분쟁, CS 대응 혼선 |
| **영향** | "누가 결정했는가"가 불명확해 운영 책임 붕괴 |

**대응 방안:**
- Sync Mode 결정 권한 명확화 (방장/세션 소유자)
- 변경 이력 로깅
- 변경 시 참여자 알림

---

### R11. 멀티 동기화 품질 저하로 인한 서비스 평판 악화

| 항목 | 내용 |
|------|------|
| **위험** | 글로벌 환경에서 멀티 품질 이슈가 반복됨 |
| **시나리오** | "VIRDY는 멀티가 불안정하다"는 인식 고착 |
| **영향** | 실제 원인이 네트워크/환경이더라도 브랜드 신뢰에 직접적 타격 |

**대응 방안:**
- 품질 모니터링 대시보드 구축
- 문제 발생 시 원인 명확화 (VIRDY vs 네트워크 환경)
- 사용자 교육 및 가이드 제공
- 최소 요구사항 명시

---

## 4. 리스크 우선순위

| 우선순위 | 리스크 | 이유 |
|----------|--------|------|
| **높음** | R1, R5 | 직접적인 비용 영향 |
| **높음** | R7, R11 | 브랜드 신뢰 및 Enterprise 고객 이탈 |
| **중간** | R2, R3, R4 | 악용 방지 및 UX |
| **중간** | R6, R8 | 서비스 품질 |
| **낮음** | R9, R10 | 운영 복잡도 |

---

## 5. 설계 시 고려사항

### 5.1 비용 관점

- 비용 산정은 항상 **Worst Case** 기준
- 주요 비용 요소: Photon 서버, 다운로드 트래픽, 스토리지
- 다운로드 트래픽이 가장 큰 비용 요소

### 5.2 악용 방지 관점

- 기능 제한은 클라이언트 + 서버 양쪽에서 검증
- 로깅 및 모니터링으로 비정상 패턴 감지
- 점진적 제재 (경고 → 기능 제한 → 계정 정지)

### 5.3 사용자 경험 관점

- 정상 사용자가 피해받지 않도록 제한 설계
- 명확한 안내 및 업그레이드 유도
- 제한에 걸렸을 때 해결 방법 제공

---

## 6. 미결정 쟁점

| 항목 | 상태 | 비고 |
|------|------|------|
| 방 생성 후 최소 유지 시간 | 📋 논의 필요 | - |
| 0명 월드 자동 종료 시간 | ✅ 결정됨 | 10분 유예 후 종료 |
| 호스트 퇴장 후 유예 시간 | ✅ 결정됨 | 10분 유예 후 이전 또는 종료 |
| Ultra Sync 실패 시 보상 정책 | 📋 논의 필요 | - |
| 비정상 클라이언트 감지 기준 | 📋 논의 필요 | - |
| 활성 월드 리스트 UI | 📋 UX 협의 필요 | 유수진님과 논의 필요 |

---

## 7. 향후 확장 가능성

| 항목 | 설명 | 우선순위 |
|------|------|---------|
| **실시간 모니터링 대시보드** | 비용/품질 실시간 추적 | 높음 |
| **자동 제재 시스템** | 비정상 패턴 자동 감지 및 조치 | 중간 |
| **네트워크 품질 테스트 도구** | 사전 환경 검증 | 중간 |
| **리스크 리포트 자동화** | 주간/월간 리스크 현황 리포트 | 낮음 |

---

## 관련 문서

- [라이선스 체계](./02_License_System.md)
- [데이터 생명주기](./04_Data_Lifecycle.md)
- [계정 시스템](./06_Account_System.md)
- [네트워크 시스템](../02_Features/05_Network_System.md)
