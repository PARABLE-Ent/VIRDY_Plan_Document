# UI 기획

> **문서 버전**: 1.0
> **최종 수정일**: 26.01.30 13:20
> **작성자**: 임경섭

---

## 1. 개요

VIRDY의 UI는 씬 기반 계층 구조로 구성되며, 전역 UI(GlobalUI)와 씬별 UI(Sign/Lobby/World)로 나뉜다. Creator와 Manager 역할에 따라 표시되는 패널이 다르며, 다국어(한국어/영어)를 지원한다.

---

## 2. 핵심 기획

### 2.1 UI 아키텍처

| 계층 | 범위 | 역할 |
|------|------|------|
| **GlobalUI** | 전역 (모든 씬) | 알림, 에러 다이얼로그, 로딩, 토스트 메시지, 캘리브레이션 |
| **SignScene UI** | 인증 씬 | 로그인, 회원가입, 비밀번호 리셋 |
| **LobbyScene UI** | 로비 씬 | 액터, 아바타, 트래커, 월드 설정 |
| **WorldScene UI** | 월드 씬 | 카메라, 채팅, 조명, 플레이어 목록 |

모든 UI 패널은 UIController 기본 클래스를 상속하며, OnInitialize(첫 활성화), OnActivate(표시), OnDeactivate(숨김) 생명주기를 따른다.

### 2.2 Sign Scene UI

#### 화면 목록

| 화면 | 설명 | 주요 요소 |
|------|------|----------|
| 언어 선택 | 최초 실행 시 | 한국어/영어 선택 |
| 로그인 | 사용자 인증 | 사용자명, 비밀번호, 로그인 버튼 |
| 회원가입 1단계 | 이메일 인증 | 이메일 입력, 인증코드 확인 |
| 회원가입 2단계 | 닉네임 설정 | 닉네임 입력 |
| 회원가입 3단계 | 비밀번호 설정 | 비밀번호, 비밀번호 확인 |
| 회원가입 4단계 | 역할 선택 | Creator/Manager 토글 |
| 회원가입 5단계 | 약관 동의 | 체크박스, 동의 버튼 |
| 비밀번호 리셋 | 비밀번호 복구 | 이메일 또는 사용자명 입력 |

### 2.3 Lobby Scene UI

로비 UI는 사이드바를 통해 패널 간 이동한다.

#### 패널 목록

| 패널 | 설명 | Creator | Manager |
|------|------|---------|---------|
| 사이드바 | 패널 간 네비게이션 | ✅ | ✅ (제한) |
| 액터 패널 | 액터 슬롯 관리 (최대 6개) | ✅ | ❌ |
| 아바타 패널 | VRM 아바타 업로드/선택 | ✅ | ❌ |
| 트래커 패널 | Facial/Body/Hand 장비 설정 | ✅ | ❌ |
| 월드 패널 | 월드 검색, 업로드, 공유 설정 | ✅ | ✅ |
| 설정 패널 | 그래픽, 사운드, 키바인딩, 언어 | ✅ | ✅ |
| 친구 패널 | 친구 검색, 추가, 온라인 상태 | ✅ | ✅ |

#### 액터 패널 구성

| 요소 | 설명 |
|------|------|
| 액터 카드 | 아바타 썸네일, 이름, 연결된 트래커 표시 |
| 슬롯 탭 | 최대 6개 액터 슬롯 전환 |
| 추가/삭제 | 슬롯 추가 (MaxActorSize 미만일 때), 삭제 |
| 편집/복제 | 기존 액터 설정 수정 또는 복제 |

#### 아바타 패널 구성

| 요소 | 설명 |
|------|------|
| 아바타 리스트 | 업로드한 VRM 아바타 썸네일 목록 |
| 업로드 버튼 | 로컬 VRM 파일 선택 → 업로드 |
| 아바타 상세 | 선택한 아바타 이름, 파일 크기 |
| 선택/삭제 | 액터에 아바타 할당 또는 삭제 |

#### 트래커 패널 구성

| 섹션 | 요소 |
|------|------|
| 페이셜 트래커 | 장비 드롭다운, 연결 상태, IP/포트 설정 |
| 바디 트래커 | 장비 드롭다운, 연결 상태, 트래커 매핑 |
| 핸드 트래커 | 장비 드롭다운, 연결 상태 |
| 민감도 설정 | 시선/눈썹/입 강도 슬라이더 |
| 캘리브레이션 | T-Pose / I-Pose 캘리브레이션 버튼 |

#### 월드 패널 구성

| 요소 | 설명 |
|------|------|
| 월드 리스트 | 공개/내/공유 월드 탭, 썸네일 카드 |
| 검색 | Algolia 기반 월드 검색 |
| 정렬 | 최신순/인기순/오래된순 |
| 월드 카드 | 썸네일, 제목, 제작자, 방문수, 공개설정 |
| 월드 상세 | 설명, 공유설정, 편집, 삭제 |
| 월드 업로드 | AssetBundle 파일 선택 + 메타데이터 입력 |
| 월드 진입 | "세션 생성" 또는 "세션 참가" (코드 입력) |

#### 설정 패널 구성

| 섹션 | 항목 |
|------|------|
| 그래픽 | 해상도, 품질, 프레임 제한, 안티앨리어싱 |
| 사운드 | 마스터/음악/효과음/월드 볼륨 |
| 키바인딩 | 커스텀 키 설정 |
| 언어 | 한국어/영어 전환 |

### 2.4 World Scene UI

월드 진입 후 표시되는 UI 패널:

| 패널 | 설명 |
|------|------|
| 카메라 패널 | 10개 카메라 슬롯, 프리셋 저장, Channel Link |
| 채팅 패널 | 메시지 표시, 입력 필드, 전체/팀 전환 |
| 플레이어 목록 | 접속자 이름, 역할 색상, 호스트 👑, ME 라벨 |
| 조명 제어 | 방향광 강도/회전, 포스트 프로세싱 |
| 설정 오버레이 | 카메라 속도, 줌 속도, 회전 민감도 |

#### 카메라 패널

| 요소 | 설명 |
|------|------|
| FreeCam 프리뷰 | 자유 카메라 미리보기 |
| 카메라 슬롯 [1]~[9] | 고정 카메라 선택/전환 |
| FOV 슬라이더 | 초점 거리 조절 |
| DoF 설정 | 포커스 거리, 자동 포커스 대상 |
| Follow/LookAt | 대상 Actor 선택 |
| Channel Link | 접속자 목록, 송출/수신 제어 |
| 프리셋 저장 | 현재 카메라 Transform 프리셋 저장 |

#### 채팅 패널

| 요소 | 설명 |
|------|------|
| 채팅 모드 탭 | [All] / [Creator] / [Manager] 전환 |
| 메시지 표시 | 역할별 색상 코딩, 팀 접두사 |
| 입력 필드 | 텍스트 입력, 전송 버튼 |

#### 플레이어 목록

| 요소 | 설명 |
|------|------|
| 이름 | 최대 16자 표시 (초과 시 ... 처리) |
| 역할 색상 | Creator/Manager 별도 색상 |
| **호스트 표시** | 👑 왕관 아이콘 (호스트 옆에 표시) |
| ME 라벨 | 본인 식별 |
| 초대/따라가기 | 소셜 기능 버튼 |

**호스트 표시 동작:**
- 월드를 연 사용자에게 👑 왕관 아이콘 표시
- 호스트 이전 시 왕관도 실시간으로 이동
- 호스트 변경 시 "호스트가 변경되었습니다" 토스트 메시지

### 2.5 GlobalUI

모든 씬에서 공통으로 표시되는 전역 UI:

| 요소 | 설명 |
|------|------|
| 알림 팝업 | 초대, 따라가기 요청 등 |
| 에러 다이얼로그 | 연결 실패, 오류 메시지 |
| 로딩 인디케이터 | 비동기 작업 진행 표시 |
| 토스트 메시지 | 짧은 알림 (복사 완료, 저장 완료 등) |
| 캘리브레이션 UI | T-Pose/I-Pose 안내, 카운트다운 |

### 2.6 View 모드별 레이아웃

월드 진입 후 4가지 View 모드에 따라 화면 레이아웃이 달라진다.

| 모드 | 레이아웃 |
|------|---------|
| Default | Main Screen만 전체 화면 |
| Manager | Main Screen + Spectator (9분할) + Manager CAM |
| Studio | 9분할 모니터링 전체 화면 |
| Spout | Main Screen → Spout 텍스처 출력 (UI 제외) |

### 2.7 다국어 지원

| 항목 | 설명 |
|------|------|
| 지원 언어 | 한국어, 영어 |
| 선택 시점 | 최초 실행 시 + 설정에서 변경 가능 |
| 적용 방식 | Localization 키 기반 텍스트 치환 |

### 2.8 Figma 디자인 화면 목록

Figma에서 관리되는 주요 디자인 화면:

| 카테고리 | 화면 | 수량 |
|----------|------|------|
| 런처 | 대기, 토큰, 업데이트, 에러 등 | 9개 |
| 로그인 | 기본, 비밀번호 표시 | 2개 |
| 회원가입 | 이메일 인증 ~ 가입 완료 | 9개 |
| 액터 설정 | 메인, 아바타, 트래커, 표정 | 4개 |
| 월드 설정 | 리스트, 상세, 생성, 편집 | 4개 |
| 월드 진입 | 로딩, 메인 뷰, 설정 오버레이 | 3개 |
| 카메라 | 모드별 레이아웃, Channel Link | 복수 |

> Figma 디자인은 별도로 관리되며, 이 문서에서는 화면 구성과 기능 정의만 다룬다.

---

## 3. 설계 시 고려사항

### 3.1 역할별 UI 분기

Creator와 Manager는 로비에서 표시되는 패널이 다르다. Manager에게는 아바타/트래커 패널이 표시되지 않는다. 세션 생성은 역할과 무관하게 가능하며, Free 플랜만 제한된다. 이를 위한 UI 분기 처리가 필요하다.

### 3.2 반응형 레이아웃

해상도 변경 시 UI가 적절히 대응해야 한다. 특히 Manager 모드의 3분할 레이아웃(Main + Spectator + Manager CAM)은 해상도에 따라 비율 조정이 필요하다.

### 3.3 키바인딩 커스터마이징

카메라 전환(R+1~9), 이동(WASD), 기타 단축키는 사용자가 커스터마이즈할 수 있어야 한다. KeyBinder 시스템을 통해 가상 키를 물리 키에 매핑한다.

### 3.4 Spout 모드 UI 제외

Spout 출력 시 UI가 포함되지 않아야 한다. 이를 위해 Main Screen 렌더링과 UI 렌더링이 분리되어야 한다.

---

## 4. 엣지 케이스 및 예외 처리

| 상황 | 대응 |
|------|------|
| 사용자명 16자 초과 | 말줄임 처리 (앞 16자 + "...") |
| 네트워크 오류 시 로딩 | 타임아웃 후 에러 다이얼로그 표시 |
| 월드 로딩 중 UI 인터랙션 | 로딩 중 다른 조작 차단 |
| 채팅 메시지 폭주 (스팸) | 스크롤 처리, 최대 메시지 수 제한 |
| 다국어 텍스트 길이 차이 | 레이아웃이 텍스트 길이에 적응 |
| 키바인딩 충돌 | 동일 키 중복 할당 시 경고 |

---

## 5. 검토 중인 기능

### 5.1 활성 월드 리스트 (검토 중)

> ⚠️ **상태:** 고민 중. UX 담당 유수진님과 협의 필요.

현재 별도의 "내 월드" 관리 패널이 없어, **활성 월드 리스트** 기능을 검토 중이다.

**검토 중인 기능:**

| 항목 | 설명 |
|------|------|
| **활성 월드 리스트** | 현재 열려있는 월드 목록 표시 |
| **내가 호스트인 월드** | 본인이 호스트인 활성 월드 관리 |
| **친구의 월드** | 친구가 접속 중인 월드 목록 |
| **재접속 / 월드 닫기** | 호스트인 월드에 대한 관리 기능 |

**고려사항:**

| 항목 | 내용 |
|------|------|
| **장점** | 내 월드와 친구 월드를 한 곳에서 확인 가능, 재접속 편의성 향상 |
| **단점** | 기존 월드 패널과 역할이 중복될 수 있음 |
| **연계 이슈** | 이 기능 도입 시 기존 월드 패널 개편이 필요할 수 있음 |

**결정 필요 사항:**
1. 활성 월드 리스트를 별도 패널로 분리할지, 기존 월드 패널에 통합할지
2. 친구 월드 표시 시 프라이버시 설정 필요 여부
3. 월드 패널 전체 UX 재설계 필요 여부

> 📋 **다음 단계:** UX 담당 유수진님과 논의 후 방향 결정

---

## 6. 향후 확장 가능성

| 항목 | 설명 | 우선순위 |
|------|------|---------|
| **활성 월드 리스트** | 내 월드/친구 월드 관리 (검토 중) | 높음 |
| **튜토리얼** | 최초 실행 시 가이드 투어 | 중간 |
| **프로필 페이지** | 프로필 이미지, 자기소개, 포트폴리오 | 낮음 |
| **알림 센터** | 공지사항, 친구 접속, 월드 업데이트 알림 | 중간 |
| **다크 모드** | UI 테마 전환 | 낮음 |
| **추가 언어** | 일본어, 중국어 등 | 장기 |

---

## 관련 문서

- [사용자 플로우](../01_Product/02_User_Flow.md)
- [카메라 시스템](../02_Features/03_Camera_System.md)
- [사용자 역할](../03_Operations/01_User_Roles.md)
- [데이터 생명주기](../03_Operations/04_Data_Lifecycle.md)
