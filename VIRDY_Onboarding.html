<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIRDY 온보딩 문서</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        /* 사이드바 */
        .sidebar {
            width: 280px;
            background: #2c3e50;
            color: white;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
        }

        .sidebar-header {
            padding: 30px 20px;
            background: #1a252f;
            border-bottom: 2px solid #34495e;
        }

        .sidebar-header h1 {
            font-size: 24px;
            margin-bottom: 5px;
            color: #3498db;
        }

        .sidebar-header p {
            font-size: 12px;
            color: #95a5a6;
        }

        .nav-category {
            padding: 15px 20px 5px;
            font-weight: bold;
            font-size: 13px;
            color: #ecf0f1;
            text-transform: uppercase;
            margin-top: 10px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0 10px 15px;
        }

        .sidebar li {
            margin: 0;
        }

        .sidebar a {
            display: block;
            padding: 8px 15px;
            color: #bdc3c7;
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.2s;
            font-size: 14px;
        }

        .sidebar a:hover {
            background: #34495e;
            color: #fff;
            transform: translateX(5px);
        }

        /* 메인 콘텐츠 */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 40px;
            max-width: 1200px;
        }

        .doc-section {
            background: white;
            padding: 40px;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .doc-header {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        .doc-category {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        h1 {
            font-size: 32px;
            margin: 20px 0;
            color: #2c3e50;
        }

        h2 {
            font-size: 24px;
            margin: 30px 0 15px;
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
        }

        h3 {
            font-size: 20px;
            margin: 25px 0 10px;
            color: #555;
        }

        h4 {
            font-size: 16px;
            margin: 20px 0 10px;
            color: #666;
        }

        p {
            margin: 10px 0;
            color: #555;
        }

        /* 테이블 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        th {
            background: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #ecf0f1;
        }

        tr:hover {
            background: #f8f9fa;
        }

        /* 코드 */
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        pre {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }

        pre code {
            background: none;
            color: inherit;
            padding: 0;
        }

        /* 리스트 */
        ul {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin: 8px 0;
            color: #555;
        }

        /* 구분선 */
        hr {
            border: none;
            border-top: 2px solid #ecf0f1;
            margin: 30px 0;
        }

        /* 강조 */
        strong {
            color: #2c3e50;
            font-weight: 600;
        }

        em {
            color: #555;
        }

        /* 반응형 */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                position: relative;
                height: auto;
            }

            .main-content {
                margin-left: 0;
                padding: 20px;
            }
        }
    </style>
    <script>
        function showSection(id) {
            const section = document.getElementById(id);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
    </script>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1>🎬 VIRDY</h1>
                <p>기획 문서 통합본</p>
                <p style="margin-top: 10px; font-size: 11px;">생성일: 2026-02-02 16:29</p>
            </div>
            <nav>
                <div class="nav-category">📦 제품 정의</div>
<ul>
<li><a href="#01_Product_01_Product_Overview" onclick="showSection('01_Product_01_Product_Overview')">제품 개요</a></li>
<li><a href="#01_Product_02_User_Flow" onclick="showSection('01_Product_02_User_Flow')">사용자 플로우</a></li>
</ul>
<div class="nav-category">⚙️ 핵심 기능</div>
<ul>
<li><a href="#02_Features_01_Avatar_System" onclick="showSection('02_Features_01_Avatar_System')">아바타 시스템</a></li>
<li><a href="#02_Features_02_Tracker_System" onclick="showSection('02_Features_02_Tracker_System')">트래커 시스템</a></li>
<li><a href="#02_Features_03_Camera_System" onclick="showSection('02_Features_03_Camera_System')">카메라 시스템</a></li>
<li><a href="#02_Features_04_World_System" onclick="showSection('02_Features_04_World_System')">월드 시스템</a></li>
<li><a href="#02_Features_05_Network_System" onclick="showSection('02_Features_05_Network_System')">네트워크 시스템</a></li>
<li><a href="#02_Features_06_SDK" onclick="showSection('02_Features_06_SDK')">SDK</a></li>
</ul>
<div class="nav-category">🔒 운영 기획</div>
<ul>
<li><a href="#03_Operations_01_User_Roles" onclick="showSection('03_Operations_01_User_Roles')">사용자 역할</a></li>
<li><a href="#03_Operations_02_License_System" onclick="showSection('03_Operations_02_License_System')">라이선스 체계</a></li>
<li><a href="#03_Operations_03_Security" onclick="showSection('03_Operations_03_Security')">보안 시스템</a></li>
<li><a href="#03_Operations_04_Data_Lifecycle" onclick="showSection('03_Operations_04_Data_Lifecycle')">데이터 생명주기</a></li>
<li><a href="#03_Operations_05_Risk_Management" onclick="showSection('03_Operations_05_Risk_Management')">리스크 관리</a></li>
<li><a href="#03_Operations_06_Account_System" onclick="showSection('03_Operations_06_Account_System')">계정 시스템</a></li>
</ul>
<div class="nav-category">🎨 UI/UX</div>
<ul>
<li><a href="#04_Design_01_UI_Specification" onclick="showSection('04_Design_01_UI_Specification')">UI 기획</a></li>
</ul>
<div class="nav-category">🛠️ 기술 설계</div>
<ul>
<li><a href="#05_Technical_01_Architecture" onclick="showSection('05_Technical_01_Architecture')">기술 아키텍처</a></li>
<li><a href="#05_Technical_02_Development_Status" onclick="showSection('05_Technical_02_Development_Status')">개발 현황</a></li>
</ul>

            </nav>
        </aside>

        <main class="main-content">
            <section id="01_Product_01_Product_Overview" class="doc-section">
<div class="doc-header"><span class="doc-category">제품 정의</span></div>
<h1>제품 개요</h1><hr></p><h2>1. 개요</h2><p><strong>VIRDY</strong>는 버추얼 크리에이터를 위한 올인원 모션캡처 라이브 스트리밍 솔루션이다. 하나의 프로그램 안에서 아바타 설정, 다종 모션캡처 장비 연동, 가상 카메라 운영, 커스텀 월드 업로드, 실시간 멀티유저 협업까지 모두 수행할 수 있다.</p><p>개인 VTuber부터 프로덕션 스튜디오까지, Motioncapture 기반 라이브 콘텐츠 제작에 필요한 전 과정을 단일 프로그램으로 통합하는 것이 VIRDY의 핵심 가치이다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 제품 비전</h3><p><strong>"Mocap 라이브 콘텐츠 제작의 진입 장벽을 낮추고, 개인부터 스튜디오까지 하나의 도구로 커버한다."</strong></p><p>기존 모캡 라이브 제작 환경은 여러 프로그램을 조합해야 하고, 멀티유저 협업이 어려우며, 각 장비별 별도 솔루션이 필요했다. VIRDY는 이를 하나로 통합한다.</p><h3>2.2 핵심 가치</h3><table>
<thead><tr><th>가치</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>올인원</strong></td><td>아바타 + 모캡 + 카메라 + 월드 + 서버를 단일 프로그램에서 제공</td></tr>
<tr><td><strong>다종 장비 지원</strong></td><td>Facial 5종, Body 5종, Hand 4종 등 14종 이상의 모캡 장비를 지원</td></tr>
<tr><td><strong>실시간 멀티 환경</strong></td><td>최대 100명이 동시 접속하여 역할 분담 협업 가능</td></tr>
<tr><td><strong>커스텀 월드</strong></td><td>사용자가 직접 제작한 3D 월드를 업로드하고 방송 / 촬영에 사용</td></tr>
<tr><td><strong>크리에이터 생태계</strong></td><td>SDK를 통해 월드/아바타를 제작하고 공유하는 생태계 구축</td></tr>
</tbody></table>
<h3>2.3 타겟 사용자</h3><h4>주력 타겟: 개인 VTuber / 크리에이터</h4><ul><li>혼자 또는 소규모로 방송하는 개인 크리에이터</li>
<li>저가~중가 모캡 장비 사용 (SteamVR, iFacialMocap, Leap Motion, WebCam 등)</li>
<li>간편한 설정과 빠른 방송 시작을 원함</li>
<li>커스텀 월드 및 기능 세팅으로 차별화된 방송 환경 구축 니즈</li></p><h4>주력 타겟 2: 프로덕션 스튜디오</h4><p><li>전문 장비를 갖춘 방송/콘텐츠 제작 스튜디오</li>
<li>고가 모캡 장비 사용 (Vicon, Manus, StretchSense 등)</li>
<li>다수 스탭이 역할 분담하여 동시 작업</li>
<li>PD가 여러 카메라맨의 화면을 받아 실시간 스위칭</li></p><h3>2.4 제품 정보</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>개발사</strong></td><td>*VIRDY Studio</td></tr>
<tr><td><strong>플랫폼</strong></td><td>Windows 전용</td></tr>
<tr><td><strong>엔진</strong></td><td>Unity 2022.3.62f3 (URP 14.0.12)</td></tr>
<tr><td><strong>배포</strong></td><td>Steam (주력)</td></tr>
<tr><td><strong>수익 모델</strong></td><td>SaaS 구독 (영구 라이선스 검토 중)</td></tr>
<tr><td><strong>개발 상태</strong></td><td>개발 / 내부 테스트 단계</td></tr>
</tbody></table>
<h3>2.5 핵심 기능 요약</h3><table>
<thead><tr><th>기능</th><th>설명</th><th>상태</th></tr></thead>
<tbody>
<tr><td><strong>아바타 시스템</strong></td><td>VRM 아바타 로딩, ARKit Facial, 암호화 저장, 자체 확장자 계획</td><td>✅ / 📋 확장자</td></tr>
<tr><td><strong>트래커 시스템</strong></td><td>Facial 5종 + Body 5종 + Hand 4종 연동, 캘리브레이션</td><td>✅</td></tr>
<tr><td><strong>카메라 시스템</strong></td><td>10채널 가상 카메라, 4가지 View 모드, Channel Link</td><td>✅</td></tr>
<tr><td><strong>월드 시스템</strong></td><td>AssetBundle 커스텀 월드, Public/Private 공유, 라이팅 제어</td><td>✅</td></tr>
<tr><td><strong>네트워크</strong></td><td>Photon Fusion 2 기반 최대 100명 세션, 데이터 압축 동기화</td><td>✅</td></tr>
<tr><td><strong>채팅</strong></td><td>월드 내 텍스트 채팅</td><td>✅</td></tr>
<tr><td><strong>친구 시스템</strong></td><td>Firebase 기반 친구 목록, Algolia 검색, Invite / Join 기능</td><td>✅</td></tr>
<tr><td><strong>SDK</strong></td><td>월드/아바타 빌드, 인터랙티브 기능, 외부 배포 예정</td><td>🚧</td></tr>
<tr><td><strong>라이선스</strong></td><td>SaaS 티어 (Free/Pro/Studio/Enterprise)</td><td>📋</td></tr>
<tr><td><strong>음성 채팅</strong></td><td>세션 내 음성 채팅</td><td>📋</td></tr>
<tr><td><strong>로컬 모드</strong></td><td>서버 없이 혼자 사용</td><td>📋</td></tr>
<tr><td><strong>런처</strong></td><td>자동 업데이트 + 인증 런처</td><td>📋</td></tr>
<tr><td><strong>세션 녹화</strong></td><td>모션 데이터 녹화 및 재생</td><td>📋</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 단일 프로그램 통합의 트레이드오프</h3><p>VIRDY는 모든 기능을 하나의 프로그램에 통합한다. 이는 사용성 측면에서 장점이지만, 메모리/성능 관리에 주의가 필요하다. <br></p><h3>3.2 개인 사용자와 스튜디오의 동시 지원</h3><p>두 타겟 사이에 요구사항 차이가 크다.</p><table>
<thead><tr><th>항목</th><th>개인 크리에이터</th><th>프로덕션 스튜디오</th></tr></thead>
<tbody>
<tr><td>설정 복잡도</td><td>최소화</td><td>세밀한 컨트롤 필요</td></tr>
<tr><td>동시 접속</td><td>1~3명</td><td>5명 이상</td></tr>
<tr><td>장비 가격대</td><td>저가~중가</td><td>고가 전문 장비</td></tr>
<tr><td>워크플로우</td><td>혼자 또는 소규모</td><td>역할 분담 (PD, 카메라맨, 출연자)</td></tr>
</tbody></table>
세팅에 대한 온보딩을 제공하여 'Simple Setup', 'Advanced Setup' 같은 빠른 세팅 가이드를 제공하는 것 고려 필요.</p><h3>3.3 Steam 배포 고려</h3><p>Steam을 주력 배포 채널로 사용할 경우:
<li>Steam DRM / 인증 연동 필요</li>
<li>Steam Workshop을 월드/아바타/에셋 공유에 활용 가능성 검토</li>
<li>Steam 리뷰 / 커뮤니티 관리 필요</li>
<li>가격 정책이 SaaS 구독과 Steam 구매 모델 사이에서 충돌할 수 있음</li>
  - 상용화 기획 페이지에서 상세 다룰 예정
<hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>월드 참여 중 네트워크 끊김</td><td>로컬 상태 유지, 재접속 시 복구 시도</td></tr>
<tr><td>지원하지 않는 VRM 버전 업로드</td><td>오류 메시지와 함께 지원 버전 안내</td></tr>
<tr><td>무료 티어 기능 한도 초과</td><td>업그레이드 안내 팝업, 기능 차단 (데이터 손실 없이)</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>방향</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>자체 아바타 확장자</strong></td><td>애니메이션/스크립트 내장 포맷</td><td>높음</td></tr>
<tr><td><strong>로컬 모드</strong></td><td>네트워크 없이 단독 사용</td><td>높음</td></tr>
<tr><td><strong>세션 녹화/재생</strong></td><td>모션 데이터 녹화 및 재생</td><td>중간</td></tr>
<tr><td><strong>배포(Steam, 자체)</strong></td><td>자동 업데이트 + 토큰 인증</td><td>중간</td></tr>
<tr><td><strong>NDI 출력</strong></td><td>방송 장비 연동 출력</td><td>낮음</td></tr>
<tr><td><strong>음성 채팅</strong></td><td>세션 내 실시간 음성 통화</td><td>낮음</td></tr>
<tr><td><strong>에셋 마켓플레이스</strong></td><td>월드/아바타 공유 및 거래 (+ Steam Workshop)</td><td>장기</td></tr>
<tr><td><strong>엔터프라이즈 라이선스</strong></td><td>대규모 스튜디오용 커스텀 계약</td><td>장기</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>사용자 플로우</li>
<li>아바타 시스템</li>
<li>라이선스 체계</li>
<li>개발 현황</li>
</ul>
</section>
<section id="01_Product_02_User_Flow" class="doc-section">
<div class="doc-header"><span class="doc-category">제품 정의</span></div>
<h1>사용자 플로우</h1><hr></p><h2>1. 개요</h2><p>이 문서는 VIRDY의 전체 사용자 플로우를 정의한다. 개발자가 앱 흐름을 이해하고, QA가 테스트 케이스를 도출하며, 기획자가 UX를 검증하는 데 활용된다.</p><h3>1.1 Scene 구조</h3><p>VIRDY는 <strong>인증 → 로비 → 월드</strong> 3단계로 구성되며, 각 단계는 Unity Scene과 1:1 대응된다.</p><table>
<thead><tr><th>Scene</th><th>Build Index</th><th>역할</th><th>주요 기능</th></tr></thead>
<tbody>
<tr><td><strong>SIGN</strong></td><td>0</td><td>인증</td><td>로그인, 회원가입, 비밀번호 리셋</td></tr>
<tr><td><strong>LOBBY</strong></td><td>1</td><td>준비</td><td>아바타/트래커/월드 설정, 월드 생성/참가</td></tr>
<tr><td><strong>WORLD</strong></td><td>2</td><td>실시간 프로덕션</td><td>모션캡처, 카메라, 방송 송출</td></tr>
</tbody></table>
<h3>1.2 사용자 역할</h3><table>
<thead><tr><th>역할</th><th>대상</th><th>권한</th></tr></thead>
<tbody>
<tr><td><strong>Creator</strong></td><td>크리에이터, 출연자</td><td>모든 기능 사용 가능 (아바타, 트래커, 월드 생성)</td></tr>
<tr><td><strong>Manager</strong></td><td>PD, 카메라맨, 스태프</td><td>제한적 기능 (카메라/조명만, 아바타/모션캡처 사용 불가)</td></tr>
</tbody></table>
<hr></p><h2>2. 핵심 플로우</h2><h3>2.1 전체 서비스 플로우</h3><pre><code class="mermaid">flowchart TD
    Start([프로그램 실행]) --> CheckToken{자동 로그인<br>토큰 존재?}</p><p>    CheckToken -->|Yes| ValidateToken["토큰 유효성 검증"]
    CheckToken -->|No| SignScene["Sign Scene 로드"]</p><p>    ValidateToken --> TokenValid{토큰 유효?}
    TokenValid -->|Yes| LobbyScene["Lobby Scene 진입"]
    TokenValid -->|No| SignScene</p><p>    SignScene --> Auth["인증 플로우"]
    Auth --> AuthSuccess{인증 성공?}
    AuthSuccess -->|Yes| LobbyScene
    AuthSuccess -->|No| SignScene</p><p>    LobbyScene --> LobbyFlow["로비 플로우"]
    LobbyFlow --> WorldEntry{월드 진입}</p><p>    WorldEntry -->|월드 생성| CreateSession["월드 생성"]
    WorldEntry -->|월드 참가| JoinSession["월드 참가"]
    WorldEntry -->|로그아웃| SignScene</p><p>    CreateSession --> WorldScene["World Scene 진입"]
    JoinSession --> WorldScene</p><p>    WorldScene --> WorldFlow["월드 내 활동"]
    WorldFlow --> ExitWorld{월드 나가기}</p><p>    ExitWorld -->|Yes| Disconnect["월드 종료"]
    ExitWorld -->|No| WorldFlow</p><p>    Disconnect --> LobbyScene</p><p>    style Start fill:#e1f5e1
    style SignScene fill:#fff4e6
    style LobbyScene fill:#e3f2fd
    style WorldScene fill:#f3e5f5</code></pre><hr></p><h3>2.2 인증 플로우 (Sign Scene)</h3><h4>2.2.1 로그인</h4><table>
<thead><tr><th>단계</th><th>동작</th><th>성공 시</th><th>실패 시</th></tr></thead>
<tbody>
<tr><td>1</td><td>이메일/비밀번호 입력</td><td>다음 단계</td><td>입력 오류 표시</td></tr>
<tr><td>2</td><td>Firebase Auth 로그인 API 호출</td><td>다음 단계</td><td>오류 표시 (잘못된 비밀번호/계정 없음/네트워크 오류)</td></tr>
<tr><td>3</td><td>이메일 인증 확인</td><td>다음 단계</td><td>경고 + 인증 메일 재발송 옵션</td></tr>
<tr><td>4</td><td>자동 로그인 토큰 저장</td><td>다음 단계</td><td>-</td></tr>
<tr><td>5</td><td>Firestore에서 사용자 정보 로드</td><td>Lobby Scene 전환</td><td>재시도 또는 로그아웃</td></tr>
</tbody></table>
<h4>2.2.2 회원가입</h4><table>
<thead><tr><th>단계</th><th>동작</th><th>성공 시</th><th>실패 시</th></tr></thead>
<tbody>
<tr><td>1</td><td>이용약관 동의</td><td>다음 단계</td><td>로그인 화면으로</td></tr>
<tr><td>2</td><td>이메일, 비밀번호, 닉네임</td><td>다음 단계</td><td>폼 검증 오류 표시</td></tr>
<tr><td>3</td><td>Firebase Auth 계정 생성</td><td>다음 단계</td><td>이메일 중복/네트워크 오류</td></tr>
<tr><td>4</td><td>Firestore에 사용자 정보 저장</td><td>다음 단계</td><td>계정 삭제 후 로그인 화면으로</td></tr>
<tr><td>5</td><td>인증 메일 발송</td><td>로그인 화면으로</td><td>경고 표시 (재발송 가능)</td></tr>
</tbody></table>
<strong>필수 입력 필드:</strong>
<ul><li>이메일 (유효한 형식)</li>
<li>비밀번호 (8자 이상, 영문+숫자 조합)</li>
<li>닉네임 (필수)</li></p><h4>2.2.3 비밀번호 리셋</h4><p>이메일 입력 → Firebase Auth 비밀번호 리셋 API 호출 → 리셋 메일 발송 완료 → 로그인 화면으로</p><hr></p><h3>2.3 로비 플로우 (Lobby Scene)</h3><h4>2.3.1 Creator 로비 기능</h4><table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>액터 설정</strong></td><td>최대 6개 슬롯, 각 슬롯에 아바타 1개 + 트래커 (Facial/Body/Hand 각 1개) 할당</td></tr>
<tr><td><strong>아바타 설정</strong></td><td>VRM 업로드/선택, BlendShape 설정, 민감도 조절</td></tr>
<tr><td><strong>트래커 설정</strong></td><td>Facial/Body/Hand 장비 연결, 캘리브레이션</td></tr>
<tr><td><strong>월드 설정</strong></td><td>월드 검색/업로드, 공유 설정</td></tr>
<tr><td><strong>환경설정</strong></td><td>그래픽, 사운드, 키바인딩, 언어</td></tr>
<tr><td><strong>월드 생성</strong></td><td>월드 생성 플로우 시작</td></tr>
<tr><td><strong>월드 참가</strong></td><td>월드 참가 플로우 시작</td></tr>
<tr><td><strong>로그아웃</strong></td><td>Sign Scene으로 전환</td></tr>
</tbody></table>
<h4>2.3.2 Manager 로비 기능</h4><p>Manager는 아래 기능을 사용할 수 있다:</p><table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>월드 설정</strong></td><td>월드 검색/업로드, 공유 설정</td></tr>
<tr><td><strong>환경설정</strong></td><td>그래픽, 사운드, 키바인딩, 언어</td></tr>
<tr><td><strong>월드 생성</strong></td><td>월드 생성 플로우 시작</td></tr>
<tr><td><strong>월드 참가</strong></td><td>월드 참가 플로우 시작</td></tr>
<tr><td><strong>로그아웃</strong></td><td>Sign Scene으로 전환</td></tr>
</tbody></table>
> <strong>Manager 제약:</strong> 아바타/트래커 설정 불가 (카메라/조명 전용 역할)</p><h4>2.3.3 호스트와 월드 관리</h4><p>> <strong>용어:</strong> 사용자에게는 "세션"이라는 기술 용어 대신 "월드"와 "호스트"를 사용한다.</p><p><strong>호스트 (Host):</strong>
<li>월드를 연 사용자가 해당 월드의 <strong>호스트</strong>가 됨</li>
<li>플레이어 목록에서 👑 왕관 아이콘으로 표시</li>
<li>호스트가 나가면 남은 유료 사용자에게 자동 이전 (10분 유예 후)</li></p><p><strong>호스트 이전 시나리오:</strong></p><table>
<thead><tr><th>상황</th><th>동작</th></tr></thead>
<tbody>
<tr><td>호스트 퇴장 (팅김/나감)</td><td>10분 유예 → 유예 내 복귀 시 호스트 유지</td></tr>
<tr><td>유예 후 미복귀</td><td>남은 유료 사용자에게 호스트 자동 이전</td></tr>
<tr><td>호스트가 새 월드 열기</td><td>기존 월드의 호스트를 다른 유저에게 이전 후 새 월드 생성</td></tr>
<tr><td>유료 사용자 0명</td><td>10분 유예 후 월드 자동 종료</td></tr>
</tbody></table>
> <strong>참고:</strong> 호스트 이전 및 월드 생명주기 상세 정책은 데이터 생명주기 참조
> <strong>참고:</strong> 활성 월드 관리 UI는 검토 중. UI 기획 참조</p><hr></p><h3>2.4 월드 진입 플로우</h3><h4>2.4.1 월드 생성</h4><p>> <strong>개발자 참고:</strong> 내부적으로 Photon Fusion "세션"을 생성하는 플로우이다.</p><table>
<thead><tr><th>단계</th><th>동작</th><th>성공 시</th><th>실패 시</th></tr></thead>
<tbody>
<tr><td>1</td><td>구독 플랜 확인</td><td>다음 단계</td><td>Free 플랜이면 월드 생성 불가 안내</td></tr>
<tr><td>2</td><td>월드 선택 확인</td><td>다음 단계</td><td>"월드를 선택하세요" 경고</td></tr>
<tr><td>3</td><td>4자리 랜덤 월드 코드 생성</td><td>다음 단계</td><td>중복 시 재생성</td></tr>
<tr><td>4</td><td>Photon Fusion 세션 생성</td><td>월드 로딩 시작</td><td>네트워크/서버 오류</td></tr>
</tbody></table>
> <strong>참고:</strong> Creator/Manager 역할과 무관하게 월드 생성 가능. Free 플랜만 월드 생성 제한.</p><h4>2.4.2 월드 참가</h4><p>> <strong>개발자 참고:</strong> 내부적으로 Photon Fusion "세션"에 참가하는 플로우이다.</p><p><strong>참가 방법:</strong>
1. <strong>월드 코드 입력:</strong> 4자리 영숫자 직접 입력
2. <strong>친구 초대 수락:</strong> Chat으로 받은 초대 메시지에서 코드 추출
3. <strong>따라가기:</strong> 친구 목록에서 접속 중인 친구의 월드로 이동</p><table>
<thead><tr><th>단계</th><th>동작</th><th>성공 시</th><th>실패 시</th></tr></thead>
<tbody>
<tr><td>1</td><td>월드 코드 입력/추출</td><td>다음 단계</td><td>형식 오류 표시</td></tr>
<tr><td>2</td><td>Photon 세션 검색</td><td>다음 단계</td><td>"월드를 찾을 수 없습니다"</td></tr>
<tr><td>3</td><td>월드 인원 확인</td><td>다음 단계</td><td>"월드가 가득 찼습니다 (100명)"</td></tr>
<tr><td>4</td><td>Photon Fusion 세션 참가</td><td>월드 로딩 시작</td><td>네트워크/타임아웃 오류</td></tr>
</tbody></table>
<h4>2.4.3 월드 로딩</h4><table>
<thead><tr><th>단계</th><th>표시 메시지</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>"월드 정보 불러오는 중..."</td><td>Firebase Storage에서 메타데이터 다운로드</td></tr>
<tr><td>2</td><td>"월드 데이터 다운로드 중... (XX%)"</td><td>AssetBundle 다운로드 (캐시 확인 후)</td></tr>
<tr><td>3</td><td>"씬 로딩 중..."</td><td>Unity Scene 로드</td></tr>
<tr><td>4</td><td>"월드 접속 중..."</td><td>Photon Chat 구독, NetworkGame 초기화 대기 (30초 타임아웃)</td></tr>
</tbody></table>
<strong>캐싱:</strong>
<li>월드 AssetBundle은 로컬에 캐시 (`Application.persistentDataPath/WorldCache/`)</li>
<li>메타데이터의 버전 해시로 유효성 검증</li>
<li>캐시 유효 시 다운로드 단계 생략</li></p><hr></p><h3>2.5 월드 내 활동</h3><h4>2.5.1 Creator 활동</h4><table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>모션캡처</strong></td><td>연결된 트래커로 실시간 아바타 구동</td></tr>
<tr><td><strong>카메라 조작</strong></td><td>10채널 카메라 전환/이동/설정</td></tr>
<tr><td><strong>아바타 이동</strong></td><td>선택한 액터의 WASD로 아바타 이동 (위치/회전 네트워크 동기화)</td></tr>
<tr><td><strong>채팅</strong></td><td>전체/팀 채팅 메시지 전송</td></tr>
<tr><td><strong>방송 출력</strong></td><td>Spout/윈도우 캡처로 OBS 연동</td></tr>
<tr><td><strong>조명 제어</strong></td><td>Directional Light 강도/방향 조절</td></tr>
<tr><td><strong>포스트 프로세싱</strong></td><td>Bloom/Color 파라미터 조절</td></tr>
<tr><td><strong>Channel Link</strong></td><td>카메라 송출/수신</td></tr>
<tr><td><strong>초대</strong></td><td>친구에게 월드 초대</td></tr>
</tbody></table>
<h4>2.5.2 Manager 활동</h4><table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>카메라 조작</strong></td><td>10채널 카메라 전환/이동/설정</td></tr>
<tr><td><strong>Channel Link</strong></td><td>카메라 송출/수신 (PD 워크플로우)</td></tr>
<tr><td><strong>아바타 이동</strong></td><td>선택한 액터의 WASD로 아바타 이동 (위치/회전 네트워크 동기화)</td></tr>
<tr><td><strong>조명 제어</strong></td><td>Directional Light 강도/방향 조절</td></tr>
<tr><td><strong>포스트 프로세싱</strong></td><td>Bloom/Color 파라미터 조절</td></tr>
<tr><td><strong>채팅</strong></td><td>전체/팀 채팅 메시지 전송</td></tr>
</tbody></table>
<h4>2.5.3 멀티유저 프로덕션 (PD 워크플로우)</h4><p>대규모 프로덕션에서 다수 Manager가 협업하는 구조:</p><table>
<thead><tr><th>역할</th><th>동작</th></tr></thead>
<tbody>
<tr><td><strong>카메라맨 B, C, D</strong></td><td>각자 CAM 1~3 촬영 → PD의 고정 카메라에 Channel Link</td></tr>
<tr><td><strong>PD (A)</strong></td><td>모든 카메라맨의 화면 수신 → R+1~9 키로 실시간 스위칭</td></tr>
<tr><td><strong>Creator</strong></td><td>PD의 Main Screen 수신 → Spout/윈도우 캡처로 방송 송출</td></tr>
</tbody></table>
Creator와 Manager의 조작 차이는 Actor의 존재 유무일뿐, 그외에 시스템적으로 사용을 제한하는 기능은 없다.</p><hr></p><h3>2.6 월드 퇴장</h3><table>
<thead><tr><th>단계</th><th>동작</th><th>비고</th></tr></thead>
<tbody>
<tr><td>1</td><td>확인 팝업 표시</td><td>"월드에서 나가시겠습니까?"</td></tr>
<tr><td>2</td><td>Photon Chat 채널 구독 해제</td><td>실패 시 경고 후 계속</td></tr>
<tr><td>3</td><td>NetworkRunner 종료</td><td>5초 타임아웃 후 강제 종료</td></tr>
<tr><td>4</td><td>월드 AssetBundle 언로드</td><td>메모리 해제</td></tr>
<tr><td>5</td><td>Lobby Scene 로드</td><td>실패 시 프로그램 재시작 필요</td></tr>
</tbody></table>
<hr></p><h3>2.7 소셜 기능</h3><h4>2.7.1 친구 추가</h4><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>친구 검색 UI 열기</td></tr>
<tr><td>2</td><td>검색어 입력 (닉네임 또는 이메일, 2자 이상)</td></tr>
<tr><td>3</td><td>Algolia 검색 API 호출</td></tr>
<tr><td>4</td><td>검색 결과에서 사용자 선택</td></tr>
<tr><td>5</td><td>Firebase에 친구 추가 요청</td></tr>
</tbody></table>
<h4>2.7.2 친구 초대</h4><p>월드 접속 중일 때, 온라인 친구에게 Photon Chat으로 초대 메시지 전송 (`/invite {worldCode}`)</p><h4>2.7.3 따라가기</h4><p>로비에서 친구 목록 조회 → 월드 접속 중인 친구 선택 → 해당 월드로 자동 참가</p><hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 Scene 전환</h3><table>
<thead><tr><th>전환</th><th>조건</th><th>정리 작업</th></tr></thead>
<tbody>
<tr><td>SIGN → LOBBY</td><td>인증 성공</td><td>-</td></tr>
<tr><td>LOBBY → WORLD</td><td>월드 생성/참가 성공</td><td>-</td></tr>
<tr><td>WORLD → LOBBY</td><td>월드 퇴장</td><td>NetworkRunner 종료, AssetBundle 언로드</td></tr>
<tr><td>LOBBY/WORLD → SIGN</td><td>로그아웃</td><td>FusionService 정리</td></tr>
</tbody></table>
<h3>3.2 자동 로그인</h3><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>저장 위치</td><td>PlayerPrefs 또는 로컬 파일</td></tr>
<tr><td>유효 기간</td><td>Firebase 기본 설정 (1시간 ~ 7일)</td></tr>
<tr><td>검증 방식</td><td>프로그램 시작 시 Firebase Auth 토큰 검증</td></tr>
<tr><td>만료 시 동작</td><td>Sign Scene 로드, 재로그인 요구</td></tr>
</tbody></table>
<h3>3.3 네트워크 재연결 전략</h3><table>
<thead><tr><th>서비스</th><th>재연결 전략</th><th>타임아웃</th><th>실패 시 동작</th></tr></thead>
<tbody>
<tr><td><strong>Photon Fusion</strong></td><td>자동 재연결 시도</td><td>30초</td><td>강제 종료, 로비 복귀</td></tr>
<tr><td><strong>Photon Chat</strong></td><td>지수 백오프 (5초 → 60초)</td><td>무제한</td><td>채팅만 비활성화, 세션 유지</td></tr>
<tr><td><strong>Firebase</strong></td><td>즉시 실패, 재시도 없음</td><td>-</td><td>오류 표시, 사용자 재시도 유도</td></tr>
</tbody></table>
<h3>3.4 역할 기반 UI 제어</h3><table>
<thead><tr><th>역할</th><th>로비 UI</th><th>월드 UI</th></tr></thead>
<tbody>
<tr><td><strong>Creator</strong></td><td>액터/아바타/트래커/월드 패널 전체</td><td>모든 기능</td></tr>
<tr><td><strong>Manager</strong></td><td>설정 패널만</td><td>카메라/조명 제어만</td></tr>
</tbody></table>
<h3>3.5 캐싱 전략</h3><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>캐시 위치</td><td>`Application.persistentDataPath/WorldCache/`</td></tr>
<tr><td>버전 관리</td><td>메타데이터의 버전 해시로 유효성 검증</td></tr>
<tr><td>캐시 삭제 조건</td><td>버전 불일치, Scene 로드 실패</td></tr>
<tr><td>최대 캐시 크기</td><td>5GB (향후 설정 가능)</td></tr>
</tbody></table>
<hr></p><h2>4. 예외 처리</h2><h3>4.1 인증 단계</h3><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>이메일 인증 미완료 상태에서 로그인</td><td>경고 표시, 인증 메일 재발송 옵션</td></tr>
<tr><td>회원가입 중 네트워크 중단</td><td>재시도 옵션, 계정 생성 실패 시 Firebase 데이터 롤백</td></tr>
<tr><td>자동 로그인 토큰 만료</td><td>Sign Scene 로드, 재로그인 요구</td></tr>
</tbody></table>
<h3>4.2 로비 단계</h3><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>Free 플랜에서 월드 생성 시도</td><td>UI에서 버튼 비활성화, 업그레이드 안내</td></tr>
<tr><td>Manager가 아바타/트래커 설정 시도</td><td>UI에서 패널 비활성화, 툴팁으로 제약 안내</td></tr>
<tr><td>아바타 파일 업로드 실패</td><td>오류 메시지, 지원 형식 안내 (VRM)</td></tr>
<tr><td>트래커 연결 실패</td><td>장비별 연결 가이드 표시, 재시도 버튼</td></tr>
<tr><td>월드 코드 입력 오류</td><td>"월드를 찾을 수 없습니다" 오류</td></tr>
<tr><td><strong>동시 월드 제한 초과</strong></td><td>새 월드 열기 차단, 기존 월드 닫기 유도</td></tr>
<tr><td><strong>호스트가 새 월드 열기 시도</strong></td><td>기존 월드 닫기 확인 팝업 → 남은 유저에게 호스트 이전</td></tr>
</tbody></table>
<h3>4.3 월드 진입</h3><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>월드 인원 초과 (100명)</td><td>"월드가 가득 찼습니다" 오류, 로비 복귀</td></tr>
<tr><td>월드 다운로드 중 네트워크 끊김</td><td>타임아웃 후 재시도 옵션, 실패 시 로비 복귀</td></tr>
<tr><td>AssetBundle 손상</td><td>캐시 삭제 후 재시도 유도</td></tr>
<tr><td>초기화 타임아웃 (30초)</td><td>자동 연결 해제, 로비 복귀</td></tr>
<tr><td>접속한 월드가 삭제된 상태</td><td>"월드가 삭제되었습니다" 오류, 로비 복귀</td></tr>
</tbody></table>
<h3>4.4 월드 내 활동</h3><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>네트워크 연결 끊김</td><td>30초 재연결 시도, 실패 시 강제 퇴장</td></tr>
<tr><td>Chat 연결 끊김</td><td>백그라운드 재연결, 세션은 유지</td></tr>
<tr><td>Channel Link 이중 연결 시도 (A→B→C)</td><td>"이중 공유는 불가능합니다" 경고</td></tr>
<tr><td>Creator가 아바타 없이 월드 진입</td><td>빈 액터 상태로 참가</td></tr>
</tbody></table>
<h3>4.5 소셜 기능</h3><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>오프라인 친구에게 초대 시도</td><td>"친구가 오프라인 상태입니다" 알림</td></tr>
<tr><td>친구가 없는 월드로 따라가기 시도</td><td>"친구가 월드에 없습니다" 오류</td></tr>
<tr><td>검색 결과 없음</td><td>"다른 검색어를 시도하세요" 안내</td></tr>
</tbody></table>
<hr></p><h2>5. 상태 정의</h2><h3>5.1 Scene 상태</h3><table>
<thead><tr><th>Scene</th><th>상태</th><th>설명</th></tr></thead>
<tbody>
<tr><td>SIGN</td><td>Idle</td><td>로그인 화면 표시 중</td></tr>
<tr><td>SIGN</td><td>Authenticating</td><td>Firebase Auth API 호출 중</td></tr>
<tr><td>LOBBY</td><td>Idle</td><td>로비 화면 표시 중</td></tr>
<tr><td>LOBBY</td><td>CreatingSession</td><td>세션 생성 API 호출 중</td></tr>
<tr><td>LOBBY</td><td>JoiningSession</td><td>세션 참가 API 호출 중</td></tr>
<tr><td>WORLD</td><td>Loading</td><td>월드 로딩 중</td></tr>
<tr><td>WORLD</td><td>Active</td><td>월드 활동 중</td></tr>
<tr><td>WORLD</td><td>Disconnecting</td><td>세션 종료 처리 중</td></tr>
</tbody></table>
<h3>5.2 네트워크 상태</h3><table>
<thead><tr><th>상태</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Disconnected</td><td>세션 연결 안 됨 (로비에서 모든 기능 사용 가능)</td></tr>
<tr><td>Connecting</td><td>세션 연결 시도 중 (로딩 화면)</td></tr>
<tr><td>Connected</td><td>세션 연결됨 (월드 활동 가능)</td></tr>
<tr><td>Reconnecting</td><td>재연결 시도 중 (제한적 활동)</td></tr>
<tr><td>Failed</td><td>연결 실패 (로비로 강제 복귀)</td></tr>
</tbody></table>
<hr></p><h2>6. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>현재</th><th>향후</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>소셜 로그인</strong></td><td>이메일/비밀번호만</td><td>Google, Steam, Discord</td><td>높음</td></tr>
<tr><td><strong>런처</strong></td><td>없음</td><td>자동 업데이트 + 토큰 인증</td><td>높음</td></tr>
<tr><td><strong>로컬 모드</strong></td><td>미지원</td><td>네트워크 없이 단독 사용</td><td>중간</td></tr>
<tr><td><strong>튜토리얼</strong></td><td>없음</td><td>최초 실행 시 온보딩 가이드</td><td>중간</td></tr>
<tr><td><strong>음성 채팅</strong></td><td>미지원</td><td>월드 내 실시간 음성</td><td>낮음</td></tr>
<tr><td><strong>월드 녹화</strong></td><td>미지원</td><td>모션 데이터 녹화 및 재생</td><td>장기</td></tr>
</tbody></table>
<hr></p><h2>7. 관련 문서</h2><p><li>제품 개요</li>
<li>사용자 역할</li>
<li>아바타 시스템</li>
<li>트래커 시스템</li>
<li>카메라 시스템</li>
<li>월드 시스템</li>
<li>네트워크 시스템</li>
<li>라이선스 체계</li>
<li>UI 기획</li>
</ul>
<hr></p><h2>8. 문서 변경 이력</h2><table>
<thead><tr><th>버전</th><th>날짜</th><th>변경 내용</th></tr></thead>
<tbody>
<tr><td>4.2</td><td>2026-01-29</td><td>사용자 용어 통일: "세션"→"월드/호스트", 호스트 이전 정책(10분 유예) 반영</td></tr>
<tr><td>4.1</td><td>2026-01-29</td><td>세션 관리 기능 추가: 내 세션 패널, 세션 강제 종료, 동시 세션 제한 처리</td></tr>
<tr><td>4.0</td><td>2026-01-29</td><td>실용성 중심 재구성: 과도한 플로우차트 제거, 텍스트/테이블 기반으로 변경, 핵심 High-Level 플로우만 유지</td></tr>
<tr><td>3.0</td><td>2026-01-29</td><td>Mermaid 플로우차트 기반 시각화, 모든 분기 및 에러 케이스 명시</td></tr>
<tr><td>2.0</td><td>2026-01-28</td><td>Creator/Manager 역할 구분 명확화, 소셜 기능 추가</td></tr>
<tr><td>1.0</td><td>2025-XX-XX</td><td>초기 작성</td></tr>
</tbody></table>
</p>
</section>
<section id="02_Features_01_Avatar_System" class="doc-section">
<div class="doc-header"><span class="doc-category">핵심 기능</span></div>
<h1>아바타 시스템</h1><hr></p><h2>1. 개요</h2><p>아바타 시스템은 사용자가 자신의 3D 캐릭터를 VIRDY에 가져와 실시간으로 구동하는 기능이다. <br>
VRM 포맷 아바타를 업로드하여 Actor에 불러오고, 트래커와 연결하여 실시간 모션캡처 아바타로 동작한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 지원 아바타 포맷</h3><table>
<thead><tr><th>포맷</th><th>상태</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>VRM 0.x</strong></td><td>✅</td><td>현재 주력 지원 포맷. VRoid Studio, Blender 등에서 제작 가능</td></tr>
<tr><td><strong>VRM 1.0</strong></td><td>📋</td><td>차세대 VRM 포맷, 지원은 되나 검증 X</td></tr>
<tr><td><strong>VSF</strong></td><td>📋</td><td>VSeeFace 포맷, 지원중이나 일부 VSF 스크립트는 테스트 필요</td></tr>
<tr><td><strong>자체 확장자</strong></td><td>📋</td><td>애니메이션/스크립트 내장 포맷, 배포 할 VIRDY SDK에서 빌드</td></tr>
</tbody></table>
<h3>2.2 아바타 로딩 파이프라인</h3><table>
<thead><tr><th>단계</th><th>동작</th><th>설명</th></tr></thead>
<tbody>
<tr><td>1</td><td>파일 선택</td><td>로컬 VRM 파일 업로드 / 리스트 내 선택</td></tr>
<tr><td>2</td><td>VRM 파싱</td><td>UniVRM으로 VRM 파일 로드 및 메타데이터 추출</td></tr>
<tr><td>3</td><td>머티리얼 변환</td><td>MToon 셰이더 → URP Toon Lit 셰이더로 자동 변환</td></tr>
<tr><td>4</td><td>본 매핑</td><td>Humanoid 본 자동 매핑 + IK 설정</td></tr>
<tr><td>5</td><td>표정 설정</td><td>BlendShapeProxy 기반 52종 ARKit BlendShape 매핑</td></tr>
<tr><td>6</td><td>Puppet 생성</td><td>트래커 데이터를 아바타에 연결하는 중간 계층 생성</td></tr>
<tr><td>7</td><td>씬 배치</td><td>아바타를 Scene에 불러오기</td></tr>
</tbody></table>
<h3>2.3 아바타 저장 및 관리</h3><h4>저장 경로</h4><table>
<thead><tr><th>위치</th><th>용도</th></tr></thead>
<tbody>
<tr><td><strong>Firebase Storage</strong></td><td>클라우드 원본 저장 (암호화)</td></tr>
<tr><td><strong>로컬 캐시</strong></td><td>빠른 재로딩용 (앱 데이터 폴더)</td></tr>
</tbody></table>
<h4>아바타 목록 관리</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>업로드</td><td>로컬 VRM → Firebase Storage 암호화 업로드</td></tr>
<tr><td>다운로드</td><td>Firebase → 로컬 캐시 저장</td></tr>
<tr><td>삭제</td><td>Firebase 삭제 (로컬 캐시도 삭제?)</td></tr>
<tr><td>캐시</td><td>이미 다운로드한 아바타는 로컬 캐시에서 바로 로드</td></tr>
</tbody></table>
<h3>2.4 표정 시스템</h3><p>VIRDY는 ARKit 호환 52종 BlendShape를 지원한다.</p><h4>BlendShape 카테고리</h4><table>
<thead><tr><th>카테고리</th><th>주요 항목</th></tr></thead>
<tbody>
<tr><td>눈 (Eyes)</td><td>깜빡임, 시선 방향, 찡그림, 크게뜨기</td></tr>
<tr><td>눈썹 (Brows)</td><td>내리기, 올리기 (안쪽/바깥쪽)</td></tr>
<tr><td>입/턱 (Mouth/Jaw)</td><td>미소, 찡그림, 오므리기, 벌리기, 좌우 이동</td></tr>
<tr><td>볼/코/혀</td><td>볼 부풀리기, 코 찡그림, 혀 내밀기</td></tr>
</tbody></table>
<h4>민감도 조절</h4><p>사용자가 부위별로 트래킹 민감도를 조절할 수 있다.</p><table>
<thead><tr><th>파라미터</th><th>범위</th><th>설명</th></tr></thead>
<tbody>
<tr><td>시선 강도 (Gaze)</td><td>0~1</td><td>눈동자 움직임 반영 정도</td></tr>
<tr><td>눈썹 강도 (Eyebrow)</td><td>0~1</td><td>눈썹 움직임 반영 정도</td></tr>
<tr><td>입/볼 강도 (Mouth)</td><td>0~1</td><td>입과 볼 움직임 반영 정도</td></tr>
</tbody></table>
<h4>Facial Blendshape Config 세부 조절</h4><p>ARKit 52 Blendshape를 개별 세부 조절할 수 있다. <br>
e.g. 움직임을 0.4 정도만 움직여도 0.8로 Output이 나오게 하는 기능.</p><h3>2.5 아바타 블렌드셰이프 커스텀 설정</h3><p>기본 표정 외에 사용자가 추가 BlendShape를 설정할 수 있다.</p><table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td>BlendShape 목록 조회</td><td>VRM에 포함된 모든 BlendShape 표시</td></tr>
<tr><td>커스텀 표정 매핑</td><td>특정 키/트리거에 BlendShape 조합 할당</td></tr>
<tr><td>GameObject 연동</td><td>BlendShape와 연계하여 오브젝트 활성화/비활성화</td></tr>
</tbody></table>
<h3>2.6 액터(Actor) 구조</h3><p>Actor는 아바타 + 트래커 조합의 단위이다.</p><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>슬롯 수</td><td>최대 6개</td></tr>
<tr><td>구성</td><td>아바타 1개 + Facial 트래커 1개 + Body 트래커 1개 + Hand 트래커 1개</td></tr>
<tr><td>저장</td><td>슬롯별 설정이 로컬에 JSON으로 저장됨. 재접속시 자동 로드</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 암호화 및 저작권 보호</h3><ul><li>VRM 파일은 업로드/캐시 시 암호화 적용</li>
<li>로컬 캐시에서도 암호화 상태로 저장되어 직접 파일 추출 방지</li>
<li>VRM 메타데이터의 저작권 정보 존중 (AllowedUser, ViolentUsage 등)</li></p><h3>3.2 메모리 관리</h3><p><li>아바타 텍스처는 메모리 사용의 주요 원인</li>
<li>월드 진입 시 아바타 + 월드가 동시에 로드되므로 메모리 예산 관리 필요</li>
<li>다수 아바타 동시 로드 시 (멀티유저) LOD 또는 품질 조절 검토</li>
  - VIRDY-SDK를 통한 Avatar Build 시, Analysis 분석 및 자동 최적화 기능 개발 예정</p><h3>3.4 네트워크 동기화 대상</h3><p>아바타의 네트워크 동기화 데이터:</p><table>
<thead><tr><th>데이터</th><th>수량</th><th>설명</th></tr></thead>
<tbody>
<tr><td>본 회전</td><td>22개</td><td>Hips ~ Toes</td></tr>
<tr><td>손가락 포즈</td><td>40개</td><td>양손 각 20개</td></tr>
<tr><td>표정 값</td><td>100개</td><td>BlendShape 값</td></tr>
<tr><td>위치</td><td>3개</td><td>Hip + 손 오프셋</td></tr>
</tbody></table>
<hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>지원하지 않는 VRM 버전 업로드</td><td>오류 메시지 + 지원 버전 안내</td></tr>
<tr><td>VRM 본 매핑 불완전 (필수 본 누락)</td><td>경고 표시, 누락 본은 기본 포즈</td></tr>
<tr><td>아바타 파일 손상</td><td>로드 실패 → 재업로드 안내</td></tr>
<tr><td>개인 Storage 용량 초과</td><td>업로드 실패 안내, 기존 아바타 정리 및 Pro / 상위 라이선스 권유</td></tr>
<tr><td>로컬 캐시 손상</td><td>자동 재다운로드</td></tr>
<tr><td>동일 아바타를 중복 업로드</td><td>기존 아바타 덮어쓰기 안내. 중복 감지는 파일명, VRM 버전</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>VRM 1.0</strong></td><td>차세대 VRM 포맷 지원</td><td>높음</td></tr>
<tr><td><strong>자체 확장자</strong></td><td>애니메이션/스크립트 내장 아바타 포맷, SDK에서 빌드</td><td>높음</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>트래커 시스템</li>
<li>SDK</li>
<li>네트워크 시스템</li>
<li>사용자 플로우</li>
</ul>
</section>
<section id="02_Features_02_Tracker_System" class="doc-section">
<div class="doc-header"><span class="doc-category">핵심 기능</span></div>
<h1>트래커 시스템</h1><hr></p><h2>1. 개요</h2><p>트래커 시스템은 다양한 모션캡처 장비를 VIRDY에 연결하여 실시간으로 아바타를 구동하는 핵심 기능이다. Facial(얼굴), Body(바디), Hand(핸드) 3개 카테고리로 총 14종 이상의 장비를 지원하며, 개인 크리에이터의 저가 장비부터 프로덕션 스튜디오의 전문 장비까지 폭넓게 대응한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 트래커 데이터 파이프라인</h3><p>트래커 데이터는 아래 단계를 거쳐 아바타에 적용된다.</p><table>
<thead><tr><th>단계</th><th>동작</th><th>설명</th></tr></thead>
<tbody>
<tr><td>1</td><td>장비 입력</td><td>물리 장비로부터 실시간 데이터 수신</td></tr>
<tr><td>2</td><td>TrackerData 변환</td><td>장비별 데이터를 통일된 구조로 변환</td></tr>
<tr><td>3</td><td>Puppet 생성</td><td>트래커별 중간 본 계층 구조 생성</td></tr>
<tr><td>4</td><td>리타게팅</td><td>본 매핑 및 IK 계산을 통해 아바타 본에 맞춤</td></tr>
<tr><td>5</td><td>아바타 적용</td><td>최종 아바타 본에 포즈 적용</td></tr>
<tr><td>6</td><td>네트워크 동기화</td><td>적용된 포즈를 네트워크로 전송</td></tr>
</tbody></table>
<h3>2.2 액터와 트래커 관계</h3><p>하나의 Actor(액터)에는 아래 트래커가 각 1개씩 할당된다.</p><table>
<thead><tr><th>트래커</th><th>역할</th><th>필수 여부</th></tr></thead>
<tbody>
<tr><td><strong>Facial Tracker</strong></td><td>얼굴 표정 (52종 BlendShape)</td><td>선택</td></tr>
<tr><td><strong>Motion Tracker</strong></td><td>신체 움직임 (본 회전)</td><td>선택</td></tr>
<tr><td><strong>Hand Tracker</strong></td><td>손가락 움직임 (30개 본)</td><td>선택</td></tr>
</tbody></table>
> 모든 트래커는 선택 사항이다. 연결하지 않은 트래커의 해당 부위는 기본 포즈를 유지한다.</p><p>> 일부 Motion Tracker는 Facial/Hand 또한 움직일 수 있다.</p><h3>2.3 Facial Tracker (얼굴 트래킹)</h3><h4>지원 장비</h4><table>
<thead><tr><th>장비</th><th>연결 방식</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>iFacialMocap</strong></td><td>WiFi/UDP</td><td>iPhone 기반, 가장 보편적</td></tr>
<tr><td><strong>VTube Studio</strong></td><td>로컬 API</td><td>기존 VTS 사용자 대상</td></tr>
<tr><td><strong>Facemotion3D</strong></td><td>WiFi/UDP</td><td>iPhone 기반, iFacial과 VIRDY 내부 기능 차이 없음</td></tr>
<tr><td><strong>OpenSeeFace</strong></td><td>로컬</td><td>무료, 웹캠 기반</td></tr>
<tr><td><strong>OSC Protocol</strong></td><td>OSC</td><td>범용 프로토콜, 커스텀 연동</td></tr>
</tbody></table>
<h4>페이셜 민감도 설정</h4><p>사용자가 부위별로 트래킹 반영 정도를 조절할 수 있다.</p><table>
<thead><tr><th>파라미터</th><th>범위</th><th>설명</th></tr></thead>
<tbody>
<tr><td>시선 강도 (Gaze)</td><td>0~1</td><td>눈동자 움직임 반영 정도</td></tr>
<tr><td>눈썹 강도 (Eyebrow)</td><td>0~1</td><td>눈썹 움직임 반영 정도</td></tr>
<tr><td>입/볼 강도 (Mouth)</td><td>0~1</td><td>입과 볼 움직임 반영 정도</td></tr>
</tbody></table>
Facial Blendshape Config를 통해 더욱 상세한 설정이 가능하다.</p><h4>Spine 연동</h4><p>페이셜 트래킹만 사용할 때, 머리 방향에 따라 상체(Spine)가 자연스럽게 따라 움직이는 기능이다.</p><table>
<thead><tr><th>파라미터</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Scale</td><td>Spine 회전 크기 조절</td></tr>
<tr><td>Lerp</td><td>Spine 회전 보간 속도 조절</td></tr>
</tbody></table>
<h3>2.4 Motion Tracker (바디 트래킹)</h3><h4>지원 장비</h4><table>
<thead><tr><th>장비</th><th>연결 방식</th><th>가격대</th><th>대상</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>SteamVR</strong></td><td>SteamVR API</td><td>중저가</td><td>개인 크리에이터</td><td>컨트롤러 + 트래커 조합</td></tr>
<tr><td><strong>VMC Protocol</strong></td><td>UDP/OSC</td><td>무료</td><td>개인 크리에이터</td><td>다른 모캡 앱과 연동</td></tr>
<tr><td><strong>Xsens</strong></td><td>전용 SDK</td><td>고가</td><td>개인/기업 크리에이터</td><td>관성 센서 기반</td></tr>
<tr><td><strong>MOVIN</strong></td><td>전용 SDK</td><td>고가</td><td>개인/기업 크리에이터</td><td>관성 센서 기반</td></tr>
<tr><td><strong>Vicon</strong></td><td>DataStream SDK</td><td>최고가</td><td>전문 스튜디오</td><td>광학 기반, 최고 품질</td></tr>
</tbody></table>
<h4>SteamVR 트래커 할당</h4><p>SteamVR 사용 시, 물리 장치를 신체 부위에 할당한다.</p><table>
<thead><tr><th>부위</th><th>장치 예시</th></tr></thead>
<tbody>
<tr><td>머리</td><td>Tracker 1 혹은 HMD</td></tr>
<tr><td>왼손</td><td>Controller L</td></tr>
<tr><td>오른손</td><td>Controller R</td></tr>
<tr><td>허리</td><td>Tracker 2</td></tr>
<tr><td>왼발</td><td>Tracker 3</td></tr>
<tr><td>오른발</td><td>Tracker 4</td></tr>
</tbody></table>
추가 옵션:
<ul><li>화면에 SteamVR 트래커 위치 시각화</li>
<li>모션 미러링 (좌우 반전)</li>
<li>캘리브레이션 포즈: T Pose, I Pose 지원</li></p><h4>Vicon 특이사항</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>리타게팅</td><td>별도의 고급 리타게팅 처리 사용</td></tr>
<tr><td>미러링</td><td>Vicon 자체 미러링 방식 적용 (일반 미러링과 분리)</td></tr>
<tr><td>Prop 트래킹</td><td>소품(Props) 트래킹 지원 — 물체를 별도로 트래킹하며 Hand와 세밀한 인터랙션</td></tr>
</tbody></table>
<h3>2.5 Hand Tracker (핸드 트래킹)</h3><h4>지원 장비</h4><table>
<thead><tr><th>장비</th><th>연결 방식</th><th>특징</th><th>대상</th></tr></thead>
<tbody>
<tr><td><strong>Leap Motion</strong></td><td>USB/전용 SDK</td><td>책상 위 센서, 저렴</td><td>개인 크리에이터</td></tr>
<tr><td><strong>Mollisen</strong></td><td>전용 SDK</td><td>장갑형</td><td>개인 크리에이터</td></tr>
<tr><td><strong>Manus</strong></td><td>전용 SDK</td><td>장갑형, 고품질</td><td>전문가</td></tr>
<tr><td><strong>StretchSense</strong></td><td>전용 SDK</td><td>장갑형</td><td>전문가</td></tr>
</tbody></table>
<h4>손가락 본 구조</h4><table>
<thead><tr><th>구분</th><th>본 수</th><th>설명</th></tr></thead>
<tbody>
<tr><td>왼손</td><td>15개</td><td>엄지~새끼 각 3관절</td></tr>
<tr><td>오른손</td><td>15개</td><td>엄지~새끼 각 3관절</td></tr>
<tr><td>합계</td><td>30개</td><td>네트워크 동기화 시 40개 muscle 값으로 전송</td></tr>
</tbody></table>
<h4>Leap Motion 설정</h4><table>
<thead><tr><th>파라미터</th><th>설명</th></tr></thead>
<tbody>
<tr><td>모션 강도</td><td>손가락 움직임 반영 정도</td></tr>
<tr><td>위치 오프셋 (X/Y/Z)</td><td>센서 위치 보정</td></tr>
<tr><td>회전 오프셋 (X/Y/Z)</td><td>센서 방향 보정</td></tr>
</tbody></table>
<h4>Mollisen 캘리브레이션</h4><p>Mollisen 장갑은 2단계 캘리브레이션이 필요하다.</p><table>
<thead><tr><th>단계</th><th>포즈</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1단계 (MIN)</td><td>보자기 (손 최대 펴기)</td><td>최소값 기준점 설정</td></tr>
<tr><td>2단계 (MAX)</td><td>주먹 (손 최대 쥐기)</td><td>최대값 기준점 설정</td></tr>
</tbody></table>
캘리브레이션 모드: 양손 / 왼손만 / 오른손만 선택 가능</p><h3>2.6 SteamVR 캘리브레이션 시스템</h3><h4>캘리브레이션 모드</h4><table>
<thead><tr><th>모드</th><th>포즈</th><th>용도</th></tr></thead>
<tbody>
<tr><td><strong>T-Pose</strong></td><td>양팔 수평 펴기</td><td>바디 트래킹 기본 캘리브레이션</td></tr>
<tr><td><strong>I-Pose</strong></td><td>차렷 자세</td><td>대체 캘리브레이션</td></tr>
</tbody></table>
<h4>캘리브레이션 플로우</h4><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>캘리브레이션 포즈 선택 및 시작 버튼 클릭</td></tr>
<tr><td>2</td><td>T-Pose 또는 I-Pose 실루엣, 캘리 안내 메시지 표시</td></tr>
<tr><td>3</td><td>카운트다운 (초 단위)</td></tr>
<tr><td>4</td><td>포즈 캡처 및 기준점 설정</td></tr>
<tr><td>5</td><td>캘리브레이션 완료 → 정상 트래킹 시작</td></tr>
</tbody></table>
<h2>3. 설계 시 고려사항</h2><h3>3.1 장비별 연결 방식 차이</h3><p>각 장비마다 연결 프로토콜이 다르므로, 통일된 TrackerData 인터페이스로 추상화해야 한다.</p><table>
<thead><tr><th>연결 유형</th><th>해당 장비</th><th>고려사항</th></tr></thead>
<tbody>
<tr><td>WiFi/UDP</td><td>iFacialMocap, Facemotion3D</td><td>네트워크 지연, 방화벽</td></tr>
<tr><td>로컬 API</td><td>VTube Studio, OpenSeeFace</td><td>포트 충돌 가능</td></tr>
<tr><td>OSC</td><td>OSC Protocol, VMC</td><td>표준 프로토콜, 설정 유연</td></tr>
<tr><td>전용 SDK</td><td>SteamVR, Vicon, Xsens, MOVIN, Manus, Mollisen, StretchSense, Leap Motion</td><td>SDK 버전 관리, 라이선스</td></tr>
</tbody></table>
<h3>3.2 다중 트래커 우선순위</h3><p>Facial + Motion + Hand가 동시에 활성화될 때 본 충돌을 방지해야 한다.</p><p><li>Eye 본은 Facial 전용으로 처리 (Motion에서 제외)</li>
<li>손가락 본은 Hand 전용으로 처리 (Motion에서 제외)</li>
<li>나머지 본은 Motion이 우선</li></p><h3>3.3 Vicon 예외 처리</h3><p>Vicon은 다른 장비와 처리 방식이 다르다.</p><p><li>별도 리타게팅 컴포넌트 사용</li>
<li>미러링 로직 분리</li>
<li>세밀한 Prop 트래킹 추가 지원</li></p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>트래커 연결 중 장비 연결 해제</td><td>마지막 포즈 프리징 (혹은 장비 Timeout용 대기 모션 재생), 재연결 안내</td></tr>
<tr><td>WiFi 트래커 네트워크 지연</td><td>프레임 보간으로 끊김 방지</td></tr>
<tr><td>SteamVR 트래커 할당 충돌 (동일 장치 중복)</td><td>경고 표시, 재할당 유도</td></tr>
<tr><td>캘리브레이션 미 진행 상태로 월드 진입 시도</td><td>캘리브레이션/리타게팅 안내</td></tr>
<tr><td>Facial만 연결 시</td><td>Spine은 기본 연동, 추후 Facial Pendulum Tracking 지원</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>웹캠 페이셜</strong></td><td>XRAnimator, WebCam Motioncapture 등 웹캠 기반 얼굴 트래킹 추가</td><td>높음</td></tr>
<tr><td><strong>트래커 프리셋</strong></td><td>자주 쓰는 장비 조합을 프리셋으로 저장</td><td>중간</td></tr>
<tr><td><strong>MotionBuilder 연동</strong></td><td>Autodesk MotionBuilder 실시간 스트리밍</td><td>낮음</td></tr>
<tr><td><strong>Optitrack</strong></td><td>광학 모캡 추가 지원</td><td>낮음</td></tr>
<tr><td><strong>자동 장비 감지</strong></td><td>연결된 장비 자동 인식 및 설정 제안</td><td>장기</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>아바타 시스템</li>
<li>네트워크 시스템</li>
<li>UI 기획</li>
<li>사용자 플로우</li>
</ul>
</section>
<section id="02_Features_03_Camera_System" class="doc-section">
<div class="doc-header"><span class="doc-category">핵심 기능</span></div>
<h1>카메라 시스템</h1><hr></p><h2>1. 개요</h2><p>카메라 시스템은 VIRDY의 가상 방송 환경에서 촬영, 모니터링, 방송 출력을 담당한다. 10개 채널의 가상 카메라를 운영하며, 4가지 View 모드와 Channel Link를 통해 개인 크리에이터부터 프로덕션 스튜디오까지 다양한 워크플로우를 지원한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 10채널 가상 카메라 구조</h3><table>
<thead><tr><th>채널</th><th>이름</th><th>타입</th><th>설명</th></tr></thead>
<tbody>
<tr><td>0</td><td>Free CAM</td><td>자유 카메라</td><td>WASD + 마우스로 자유 이동, 프리셋 저장 불가</td></tr>
<tr><td>1~9</td><td>CAM 01 ~ CAM 09</td><td>고정 카메라</td><td>Transform 프리셋 저장 가능, Channel Link 가능</td></tr>
</tbody></table>
<h4>카메라별 저장 데이터</h4><table>
<thead><tr><th>데이터</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Position</td><td>카메라 위치 (3D 좌표)</td></tr>
<tr><td>Rotation</td><td>카메라 회전 (Euler 각도)</td></tr>
<tr><td>Focal Length</td><td>초점 거리 (줌)</td></tr>
<tr><td>카메라 설정</td><td>DOF, Follow, LookAt 등</td></tr>
</tbody></table>
<h3>2.2 카메라 모드</h3><h4>FreeCam (자유 카메라)</h4><table>
<thead><tr><th>조작</th><th>키</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기본 이동</td><td>W / A / S / D</td><td>카메라 앞/뒤/좌/우 이동</td></tr>
<tr><td>상승/하강</td><td>Q / E</td><td>카메라 상하 이동</td></tr>
<tr><td>빠른 이동</td><td>Shift</td><td>카메라 이동 속도 증가</td></tr>
<tr><td>시점 회전</td><td>마우스 우클릭 드래그</td><td>카메라 방향 변경</td></tr>
<tr><td>줌</td><td>마우스 휠</td><td>Focal Length 조절</td></tr>
</tbody></table>
조절 가능한 설정:</p><table>
<thead><tr><th>설정</th><th>설명</th></tr></thead>
<tbody>
<tr><td>카메라 속도</td><td>이동 속도</td></tr>
<tr><td>줌 속도</td><td>마우스 휠 민감도</td></tr>
<tr><td>회전 민감도</td><td>마우스 드래그 민감도</td></tr>
</tbody></table>
<h4>Fixed Camera (고정 카메라)</h4><table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td>카메라 위치 저장/로드</td><td>Transform을 저장하고 불러오기</td></tr>
<tr><td>Channel Link</td><td>다른 유저에게 카메라 뷰 공유</td></tr>
<tr><td>Spectator 미리보기</td><td>9개 카메라 동시 미리보기</td></tr>
<tr><td>전체 카메라 저장/로드</td></tr>
</tbody></table>
 모든 카메라 로컬 저장 및 불러오기 (월드 재접속, 변경시 사용)</p><h3>2.3 View 모드</h3><p>4가지 View 모드를 제공하여 다양한 상황에 맞는 화면 구성을 지원한다.</p><table>
<thead><tr><th>모드</th><th>화면 구성</th><th>용도</th></tr></thead>
<tbody>
<tr><td><strong>Default</strong></td><td>Main Screen만 표시</td><td>일반 방송 (개인 크리에이터, 화면녹화)</td></tr>
<tr><td><strong>Manager</strong></td><td>Main + Sub + Spectator (9분할)</td><td>제작/매니저 모드</td></tr>
<tr><td><strong>Studio</strong></td><td>9분할 모니터링 화면</td><td>스튜디오 모니터링</td></tr>
<tr><td><strong>Spout</strong></td><td>Spout 텍스처 출력</td><td>OBS 연동 방송 송출</td></tr>
</tbody></table>
<h4>Default 모드</h4><ul><li>Main Screen 단일 화면</li>
<li>가장 기본적인 방송 화면 구성</li></p><h4>Manager 모드</h4><table>
<thead><tr><th>영역</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Main Screen</td><td>메인 송출 화면</td></tr>
<tr><td>Spectator View</td><td>CAM 01~09의 9분할 미리보기</td></tr>
<tr><td>Manager CAM</td><td>자유롭게 조작하는 FreeCam</td></tr>
</tbody></table>
<h4>Studio 모드</h4><p><li>9분할 화면으로 CAM 01~09를 동시 모니터링</li>
<li>스튜디오 환경에서 다수 카메라를 한 눈에 확인</li>
<li>메모리/GPU 최적화: 모니터링 카메라 해상도 / 프레임 다운그레이드 기능 제공</li></p><h4>Spout 모드</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>출력 경로</td><td>VIRDY → Spout Sender → OBS (Spout2 Source)</td></tr>
<tr><td>출력 내용</td><td>Main Screen만 전송 (UI 제외)</td></tr>
<tr><td>장점</td><td>GPU 메모리 직접 공유로 저지연, 채팅 등 UI가 방송에 포함되지 않음</td></tr>
<tr><td>해상도</td><td>설정에 따라 조절 가능</td></tr>
</tbody></table>
<h3>2.4 Channel Link 시스템</h3><p>Channel Link는 멀티유저 환경에서 다른 유저의 카메라 뷰를 주고받는 기능이다.</p><h4>연결 모드</h4><table>
<thead><tr><th>모드</th><th>설명</th></tr></thead>
<tbody>
<tr><td>없음 (None)</td><td>Channel Link 미사용</td></tr>
<tr><td>송출 (Sending)</td><td>내 카메라 뷰를 다른 유저에게 전송</td></tr>
<tr><td>수신 (Receiving)</td><td>다른 유저의 카메라 뷰를 수신</td></tr>
</tbody></table>
<h4>연결 제약</h4><table>
<thead><tr><th>항목</th><th>제한</th></tr></thead>
<tbody>
<tr><td>최대 송출 대상</td><td>제한 없음</td></tr>
<tr><td>이중 공유</td><td>불가 (A→B→C 형태 차단)</td></tr>
</tbody></table>
<h4>PD 워크플로우 (프로덕션)</h4><p>Channel Link를 활용한 전형적인 프로덕션 구성:</p><table>
<thead><tr><th>역할</th><th>동작</th></tr></thead>
<tbody>
<tr><td>카메라맨 B</td><td>CAM 1~3 촬영 → PD의 1~3 고정 카메라에 Send</td></tr>
<tr><td>카메라맨 C</td><td>CAM 1~3 촬영 → PD의 4~6 고정 카메라에 Send</td></tr>
<tr><td>카메라맨 D</td><td>CAM 1~3 촬영 → PD의 7~9 고정 카메라에 Send</td></tr>
<tr><td>PD (A)</td><td>9개 채널 Receive → Main Screen에 카메라 스위칭 (R+1~9)</td></tr>
<tr><td>방송 송출</td><td>PD의 Main Screen → Creator의 Main Screen으로 Send → Creator의 Main Screen을 방송 송출 (OBS Game Capture 혹은 Spout2)</td></tr>
</tbody></table>
<h3>2.5 카메라 설정</h3><h4>기본 설정</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>카메라 속도</td><td>FreeCam 이동 속도</td></tr>
<tr><td>줌 속도</td><td>마우스 휠 민감도 및 Z, C 세기</td></tr>
<tr><td>회전 민감도</td><td>마우스 드래그 민감도</td></tr>
</tbody></table>
<h4>렌즈 설정</h4><table>
<thead><tr><th>항목</th><th>범위</th><th>설명</th></tr></thead>
<tbody>
<tr><td>초점 거리 (Focal Length)</td><td>20~200mm</td><td>줌 레벨</td></tr>
<tr><td>조리개 (Aperture)</td><td>조절 가능</td><td>배경 흐림 정도 영향</td></tr>
</tbody></table>
<h4>포커스 설정 (DoF)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>포커스 사용</td><td>피사계 심도 활성화/비활성화</td></tr>
<tr><td>포커스 심도</td><td>DoF 블러 강도</td></tr>
<tr><td>자동 포커스 대상</td><td>특정 Actor를 선택하여 자동 초점</td></tr>
</tbody></table>
<h4>Follow / LookAt 설정</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Follow 대상</td><td>카메라가 따라가는 대상 Actor</td></tr>
<tr><td>LookAt 대상</td><td>카메라가 바라보는 대상 Actor</td></tr>
<tr><td>LookAt Offset Y</td><td>바라보기 대상의 Y축 오프셋 (높이 조절)</td></tr>
</tbody></table>
<h3>2.6 카메라 단축키</h3><table>
<thead><tr><th>키</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1~9</td><td>해당 번호 카메라로 Main Screen 전환</td></tr>
<tr><td>R</td><td>FreeCam으로 전환</td></tr>
<tr><td>W/A/S/D</td><td>FreeCam 전후좌우 이동</td></tr>
<tr><td>Q/E</td><td>FreeCam 상승/하강</td></tr>
<tr><td>Shift</td><td>FreeCam 빠른 이동</td></tr>
<tr><td>마우스 드래그</td><td>시점 회전</td></tr>
<tr><td>마우스 휠</td><td>줌 인/아웃</td></tr>
<tr><td>V</td><td>장면 크로스페이드 On/Off (전환 애니메이션)</td></tr>
</tbody></table>
<h3>2.7 카메라 전환 및 블렌딩</h3><p>카메라 전환 시 크로스페이드 블렌딩을 지원한다.</p><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>전환 옵션 사용</td><td>V (On/Off)</td></tr>
<tr><td>블렌딩</td><td>부드러운 카메라 전환 애니메이션</td></tr>
</tbody></table>
<h3>2.8 네트워크 동기화</h3><p>카메라 데이터는 네트워크를 통해 다른 유저에게 동기화된다.</p><table>
<thead><tr><th>동기화 대상</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Position</td><td>카메라 위치</td></tr>
<tr><td>Rotation</td><td>카메라 회전</td></tr>
<tr><td>Focal Length</td><td>초점 거리</td></tr>
<tr><td>Bool 설정 (3개)</td><td>DOF 등 On/Off 설정</td></tr>
<tr><td>Float 설정 (6개)</td><td>민감도, 오프셋 등 수치 설정</td></tr>
</tbody></table>
네트워크 보간(Interpolation)을 통해 카메라 움직임이 부드럽게 전달된다.</p><hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 Spout 출력 성능</h3><p><li>Spout은 GPU 메모리를 직접 공유하므로 CPU 부하가 낮음</li>
<li>해상도가 높아질수록 VRAM 사용량 증가</li>
<li>OBS 측 Spout2 Source 플러그인 설치 필요</li>
<li>Spout 출력할 UI 별도 문서 항목으로 분류 필요</li></p><h3>3.2 Channel Link 네트워크 대역폭</h3><p><li>Channel Link는 카메라 Transform만 동기화 (영상 스트리밍이 아님)</li>
<li>데이터 동기화에 대한 최적화 및 압축 등 필요 (변화가 없는데도 계속 업데이트 하면 안 됨)</li></p><h3>3.3 카메라 데이터 압축</h3><p><li>Position 및 Rotation 데이터 압축</li>
<li>네트워크 대역폭 최소화를 위한 R&D 지속 필요</li></p><h3>3.4 Cinemachine 통합</h3><p><li>Unity Cinemachine을 활용하여 카메라 블렌딩 및 DoF 처리</li>
<li>CinemachineVirtualCamera: 각 채널의 가상 카메라</li>
<li>CinemachineBrain: 카메라 전환/블렌딩 제어</li>
<li>CinemachineAutoDoFFocus: 자동 피사계 심도 포커스</li></p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>이중 Channel Link 시도 (A→B→C)</td><td>"이중 공유는 불가능합니다" 경고, 시스템 차단</td></tr>
<tr><td>Channel Link 송출 중 상대방 퇴장</td><td>송출 자동 해제, 알림 표시</td></tr>
<tr><td>Channel Link 수신 중 송출자 퇴장</td><td>수신 자동 해제, 내 카메라 시점으로 복귀</td></tr>
<tr><td>Spout 출력 중 OBS 미실행</td><td>송출 데이터 무시, VIRDY 내부 동작에 영향 없음</td></tr>
<tr><td>카메라 프리셋 저장 후 월드 변경</td><td>프리셋은 어느 월드에서든 로드 가능. 단, 월드 구조에 따라 프리셋 불러올 시 정상적인 카메라 위치가 아닐 수 있음.</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>NDI 출력</strong></td><td>방송 장비 연동용 NDI 프로토콜 지원</td><td>낮음</td></tr>
<tr><td><strong>카메라 애니메이션</strong></td><td>카메라 이동 경로를 사전 설정하여 자동 재생, 인게임 시퀀스 기능</td><td>낮음</td></tr>
<tr><td><strong>카메라 프리셋 공유</strong></td><td>다른 유저와 카메라 프리셋 공유</td><td>장기</td></tr>
<tr><td><strong>렌즈 효과 확장</strong></td><td>필름 그레인, 비네팅 등 시네마 효과 추가</td><td>장기</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>사용자 플로우</li>
<li>네트워크 시스템</li>
<li>사용자 역할</li>
<li>UI 기획</li>
</ul>
</section>
<section id="02_Features_04_World_System" class="doc-section">
<div class="doc-header"><span class="doc-category">핵심 기능</span></div>
<h1>월드 시스템</h1><hr></p><h2>1. 개요</h2><p>월드(World)는 VIRDY에서 사용자들이 실시간으로 모여 방송하고 협업하는 가상 공간이다. 사용자는 VIRDY SDK로 Unity 씬을 월드로 빌드하여 업로드하고, 다른 사용자와 공유할 수 있다. 월드는 AssetBundle로 패키징되어 Firebase에 저장되며, Photon 세션을 통해 멀티유저 환경을 제공한다. 로컬 환경에서도 불러올 수 있다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 월드 구성요소</h3><table>
<thead><tr><th>구성요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>WorldData</strong></td><td>월드 메타데이터 (제목, 설명, 공개설정, 버전 등)</td></tr>
<tr><td><strong>AssetBundle</strong></td><td>Unity 씬이 패키징된 번들 파일</td></tr>
<tr><td><strong>VIRDYWorldDescriptor</strong></td><td>월드 설정 컴포넌트 (스폰 포인트, 라이팅, 렌더러)</td></tr>
<tr><td><strong>Photon Session</strong></td><td>실시간 멀티유저 세션</td></tr>
</tbody></table>
<h3>2.2 월드 데이터 구조</h3><h4>기본 정보</h4><table>
<thead><tr><th>필드</th><th>설명</th></tr></thead>
<tbody>
<tr><td>worldId</td><td>고유 식별자 (형식: vw_{GUID})</td></tr>
<tr><td>title</td><td>월드 이름</td></tr>
<tr><td>author</td><td>제작자 이름</td></tr>
<tr><td>authorId</td><td>제작자 사용자 ID</td></tr>
<tr><td>description</td><td>월드 설명</td></tr>
<tr><td>sceneName</td><td>AssetBundle 내 씬 경로</td></tr>
<tr><td>fileSize</td><td>파일 크기 (표시용)</td></tr>
</tbody></table>
<h4>버전 및 통계</h4><table>
<thead><tr><th>필드</th><th>설명</th></tr></thead>
<tbody>
<tr><td>version</td><td>버전 번호 (업데이트 시 증가)</td></tr>
<tr><td>create</td><td>생성 시간</td></tr>
<tr><td>update</td><td>수정 시간</td></tr>
<tr><td>visits</td><td>방문 횟수</td></tr>
</tbody></table>
<h4>썸네일</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>개수</td><td>3장</td></tr>
<tr><td>포맷</td><td>png, jpg 등</td></tr>
<tr><td>저장</td><td>Firebase Storage</td></tr>
</tbody></table>
<h3>2.3 월드 공개 설정</h3><table>
<thead><tr><th>유형</th><th>설명</th><th>접근 가능 사용자</th></tr></thead>
<tbody>
<tr><td><strong>Public</strong></td><td>모든 사용자에게 공개</td><td>전체</td></tr>
<tr><td><strong>Private</strong></td><td>제작자만 접근 가능</td><td>제작자</td></tr>
<tr><td><strong>Private+</strong></td><td>제작자 + 지정 사용자</td><td>제작자 + 공유 대상</td></tr>
</tbody></table>
<h3>2.4 월드 로딩 파이프라인</h3><table>
<thead><tr><th>단계</th><th>동작</th><th>설명</th></tr></thead>
<tbody>
<tr><td>1</td><td>메타데이터 다운로드</td><td>Firebase Functions로 월드 데이터 요청</td></tr>
<tr><td>2</td><td>AssetBundle 다운로드</td><td>Firebase Storage에서 다운로드 (또는 로컬 캐시 사용)</td></tr>
<tr><td>3</td><td>AssetBundle 로드</td><td>메모리에 번들 로드</td></tr>
<tr><td>4</td><td>씬 로드</td><td>월드 씬 로드</td></tr>
<tr><td>5</td><td>렌더링 설정</td><td>월드 렌더러 Feature 병합, 필수 기능(NiloToon, ToonLit 등) 보장</td></tr>
<tr><td>7</td><td>SDK 컴포넌트 초기화</td><td>VIRDYBehaviour, VIRDYNetworkBehaviour 초기화 호출</td></tr>
</tbody></table>
<h4>씬 초기화 시 자동 처리</h4><table>
<thead><tr><th>항목</th><th>동작</th></tr></thead>
<tbody>
<tr><td>EventSystem</td><td>자동 비활성화 (VIRDY 메인 EventSystem과 충돌 방지)</td></tr>
<tr><td>Camera</td><td>자동 비활성화 (VIRDY 카메라 시스템 사용)</td></tr>
<tr><td>AudioListener</td><td>자동 비활성화 (메인 AudioListener 사용)</td></tr>
<tr><td>레이어 > 29</td><td>자동 재설정 (예약 레이어)</td></tr>
<tr><td>오디오 소스</td><td>AudioMixer "Master/World" 연결</td></tr>
</tbody></table>
<h3>2.6 월드 업로드 및 관리</h3><h4>신규 월드 업로드</h4><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>파일 다이얼로그로 AssetBundle 파일 선택</td></tr>
<tr><td>2</td><td>씬 경로 및 파일 크기 추출</td></tr>
<tr><td>3</td><td>썸네일 3장 업로드</td></tr>
<tr><td>4</td><td>AssetBundle을 Firebase Storage에 업로드</td></tr>
<tr><td>5</td><td>Firestore에 월드 메타데이터 저장</td></tr>
<tr><td>6</td><td>버전 번호 초기화 (version = 1)</td></tr>
</tbody></table>
<h4>월드 업데이트</h4><table>
<thead><tr><th>변경 사항</th><th>동작</th></tr></thead>
<tbody>
<tr><td>메타데이터만 변경 (제목, 설명, 공개설정)</td><td>Firestore 직접 업데이트</td></tr>
<tr><td>파일 변경</td><td>썸네일/AssetBundle 재업로드 + version 증가</td></tr>
<tr><td>공유 대상 변경</td><td>shared 관련 DB Collection만 업데이트</td></tr>
</tbody></table>
<h4>월드 삭제</h4><p>Firestore 메타데이터 + Storage 파일 + 로컬 캐시(?)를 모두 삭제한다.</p><h3>2.7 월드 목록 관리</h3><table>
<thead><tr><th>목록</th><th>설명</th></tr></thead>
<tbody>
<tr><td>전체 공개 월드</td><td>worlds_public 컬렉션의 모든 월드</td></tr>
<tr><td>내 월드</td><td>내가 제작한 월드</td></tr>
<tr><td>공유받은 월드</td><td>다른 사용자가 나에게 공유한 월드</td></tr>
<tr><td>즐겨찾기 월드</td><td>즐겨찾기에 추가한 월드</td></tr>
</tbody></table>
<h4>정렬 옵션</h4><table>
<thead><tr><th>옵션</th><th>기준</th></tr></thead>
<tbody>
<tr><td>최신순</td><td>update 내림차순</td></tr>
<tr><td>오래된순</td><td>update 오름차순</td></tr>
<tr><td>인기순</td><td>visits 내림차순</td></tr>
<tr><td>비인기순</td><td>visits 오름차순</td></tr>
</tbody></table>
<h3>2.8 VIRDYWorldDescriptor</h3><p>월드 씬에 필수적인 SDK 컴포넌트로, 아래 설정을 포함한다.</p><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>SpawnPoint</td><td>플레이어 스폰 위치 (미설정 시 Descriptor 위치 사용)</td></tr>
<tr><td>RendererData</td><td>월드 전용 렌더러 설정 (오버라이드 가능)</td></tr>
<tr><td>GlobalVolume</td><td>포스트 프로세싱 볼륨</td></tr>
<tr><td>CustomDirectionalLight</td><td>월드 방향광 (선택)</td></tr>
<tr><td>UnityVersion / URPVersion</td><td>빌드 환경 버전 정보</td></tr>
</tbody></table>
렌더러 오버라이드 시, VIRDY는 월드의 렌더러 기능을 적용하되 NiloToon/ToonLit(아바타 렌더링)과 HighlightPlus(하이라이트)는 반드시 보장한다.</p><h3>2.9 런타임 커스터마이징</h3><p>월드 진입 후 실시간으로 조절할 수 있는 항목이다. 세션 내 모든 유저가 Slider UI를 통해 조작할 수 있으며, 변경 사항은 세션 전체에 실시간으로 동기화된다.</p><h4>방향광(Directional Light) 제어</h4><table>
<thead><tr><th>파라미터</th><th>범위</th><th>UI</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Intensity</td><td>0~10</td><td>Slider</td><td>광원 강도</td></tr>
<tr><td>Rotation X</td><td>0°~360°</td><td>Slider</td><td>수직 회전 (태양 고도)</td></tr>
<tr><td>Rotation Y</td><td>0°~360°</td><td>Slider</td><td>수평 회전 (태양 방위)</td></tr>
</tbody></table>
<h4>포스트 프로세싱 제어</h4><table>
<thead><tr><th>효과</th><th>조절 항목</th><th>UI</th></tr></thead>
<tbody>
<tr><td><strong>Bloom</strong></td><td>Threshold, Intensity, Scatter, Enable</td><td>Slider + Toggle</td></tr>
<tr><td><strong>Color Adjustments</strong></td><td>Post Exposure, Contrast, Saturation, Enable</td><td>Slider + Toggle</td></tr>
</tbody></table>
<h4>멀티유저 동기화 플로우</h4><p>세션 내 Light/PostProcess 값은 <strong>모든 유저에게 공유되는 단일 상태</strong>이다. 누구든 값을 변경하면 세션 전체에 즉시 반영된다.</p><table>
<thead><tr><th>단계</th><th>동작</th><th>설명</th></tr></thead>
<tbody>
<tr><td>1</td><td>유저가 Slider를 조작</td><td>방향광 Intensity, Rotation 또는 PostProcess 파라미터 변경</td></tr>
<tr><td>2</td><td>로컬에 즉시 적용</td><td>조작한 유저의 화면에 변경값이 즉시 반영</td></tr>
<tr><td>3</td><td>RPC로 전체 전파</td><td>StateAuthority → 모든 Proxy에 Reliable RPC 전송</td></tr>
<tr><td>4</td><td>전체 유저에게 적용</td><td>세션 내 모든 유저의 화면에 동일한 값이 반영</td></tr>
</tbody></table>
<strong>시나리오 예시:</strong></p><p>> 유저 A, B, C, D가 같은 세션에 접속해 있다.</p><p>> 1. 유저 A가 Directional Light의 Intensity를 5로 조절한다 → A, B, C, D 모두 Intensity 5가 적용된다.
> 2. 이후 유저 C가 Light의 Rotation X를 45°로 변경한다 → A, B, C, D 모두 Rotation X 45°가 적용된다.
> 3. 유저 B가 Bloom의 Intensity를 높인다 → A, B, C, D 모두 동일한 Bloom Intensity가 적용된다.</p><p>> 즉, <strong>마지막으로 조작한 유저의 값이 세션 전체의 현재 상태</strong>가 된다.</p><h4>동기화 특성</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>제어 권한</td><td>세션 내 모든 유저가 조작 가능 (역할 제한 없음)</td></tr>
<tr><td>동기화 방식</td><td>RPC (StateAuthority → Proxies, Reliable)</td></tr>
<tr><td>적용 범위</td><td>세션 전체 (모든 접속자에게 동일하게 반영)</td></tr>
<tr><td>충돌 처리</td><td>마지막 조작값이 최종값</td></tr>
<tr><td>후속 참가자</td><td>세션 참가 시 현재 상태값을 수신하여 동기화</td></tr>
</tbody></table>
<h3>2.10 세션 관리</h3><h4>세션 생성</h4><p>유저가 월드를 선택하고 "월드 생성" 버튼을 누르면 본인은 세션으로 이동, 4자리 숫자 세션 코드가 생성된다.</p><h4>세션 참가</h4><table>
<thead><tr><th>방법</th><th>설명</th></tr></thead>
<tbody>
<tr><td>세션 코드 입력</td><td>4자리 코드를 입력하여 참가</td></tr>
<tr><td>친구 초대/따라가기</td><td>소셜 기능을 통해 참가</td></tr>
</tbody></table>
<h3>2.11 월드 언로드</h3><p>월드에서 나갈 때 데이터 및 메모리 정리에 대한 순서가 필요할지 개발팀 문의 예정.</p><h3>2.12 월드 제작 가이드라인</h3><h4>필수 구성요소</h4><table>
<thead><tr><th>구성요소</th><th>필수 여부</th><th>설명</th></tr></thead>
<tbody>
<tr><td>VIRDYWorldDescriptor</td><td>필수</td><td>월드 설정 앵커</td></tr>
<tr><td>Spawn Point Transform</td><td>필수</td><td>플레이어 스폰 위치</td></tr>
<tr><td>Directional Light</td><td>권장</td><td>주 광원</td></tr>
<tr><td>Volume (Post Processing)</td><td>권장</td><td>포스트 프로세싱</td></tr>
</tbody></table>
<h4>성능 권장사항</h4><table>
<thead><tr><th>항목</th><th>권장 값</th></tr></thead>
<tbody>
<tr><td>Draw Calls</td><td>300 미만</td></tr>
<tr><td>폴리곤 수</td><td>50만 미만</td></tr>
<tr><td>텍스처 메모리</td><td>개별 텍스처 2048 미만 사용 권장</td></tr>
<tr><td>실시간 광원</td><td>4개 미만</td></tr>
<tr><td>라이트맵</td><td>사용 권장</td></tr>
</tbody></table>
<h4>제작 시 주의사항</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Cinemachine Camera 추가 금지</td><td>VIRDY 카메라 시스템과 충돌</td></tr>
<tr><td>AudioListener 추가 금지</td><td>메인 AudioListener와 충돌</td></tr>
<tr><td>레이어 30 이상 사용 자제</td><td>예약된 레이어</td></tr>
<tr><td>오디오 소스</td><td>AudioMixer "Master/World" 사용</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 AssetBundle 호환성</h3><ul><li>월드 AssetBundle은 Streamed Scene AssetBundle이어야 함 (1개 씬)</li>
<li>Unity 버전 및 URP 버전이 VIRDY 클라이언트와 호환되어야 함</li>
<li>VIRDYWorldDescriptor에 빌드 환경 버전 정보를 기록하여 호환성 추적</li></p><h3>3.2 메모리 관리</h3><p><li>AssetBundle 로드 시 메모리 급증 가능 (특히 텍스처가 많은 월드)</li>
<li>언로드 시 `Unload(true)`로 완전 해제 필수</li>
<li>월드 + 아바타가 동시에 로드되므로 총 메모리 예산 관리 필요</li></p><h3>3.3 렌더러 병합 시 필수 기능 보장</h3><p>월드가 커스텀 렌더러를 사용할 경우에도 NiloToon/ToonLit(아바타 셰이더)와 HighlightPlus(상호작용 하이라이트)가 반드시 포함되어야 한다.</p><h3>3.4 네트워크 동기화 범위</h3><p>메인 라이트 및 포스트 프로세싱 설정 변경은 RPC를 통해 모든 접속자에게 동기화된다. 세션 내 어떤 유저든 Slider를 조작하면 모든 참가자에게 동일하게 적용된다.</p><p><li><strong>동기화 대상</strong>: Directional Light (Intensity, Rotation X/Y) + PostProcess (Bloom, Color Adjustments)</li>
<li><strong>동기화 단위</strong>: 세션 전체 (개별 유저 단위가 아님)</li>
<li><strong>충돌 정책</strong>: Last-Write-Wins — 여러 유저가 동시에 조작할 경우 마지막 RPC가 최종값이 됨</li>
<li><strong>늦은 참가자 처리</strong>: 세션에 나중에 참가한 유저도 현재 Light/PostProcess 상태를 수신받아 동기화된 상태로 시작</li>
<li><strong>Local 상태 on/off?</strong>: 월드 내 유저들과 동기화되지 않고, 혼자 Local로 전환하여 쓸 수 있는 상태를 만들 것인가? 고민</li></p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>AssetBundle이 Streamed Scene이 아닌 경우</td><td>업로드 시 검증 실패, 오류 안내</td></tr>
<tr><td>VIRDYWorldDescriptor가 누락된 월드</td><td>기본값으로 동작 (스폰 포인트 = 원점)</td></tr>
<tr><td>월드 다운로드 중 네트워크 끊김</td><td>타임아웃 후 오류 표시, 로비 복귀</td></tr>
<tr><td>캐시된 월드의 버전이 서버와 불일치</td><td>서버 버전 다운로드 후 캐시 갱신</td></tr>
<tr><td>월드 언로드 시 메모리 누수</td><td>Unload(true)로 강제 해제, 이후 GC 호출</td></tr>
<tr><td>삭제된 월드에 접속 시도</td><td>"월드를 찾을 수 없습니다" 오류, 로비 복귀</td></tr>
<tr><td>공유 권한이 취소된 월드 접근</td><td>Firestore 보안 규칙으로 차단, 목록에서 자동 제거</td></tr>
<tr><td>동일 월드 중복 업로드</td><td>기존 월드 업데이트로 처리 (version 증가)</td></tr>
<tr><td>월드 내 EventSystem/Camera 존재</td><td>자동 비활성화 처리</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>Steam Workshop 연동</strong></td><td>Steam Workshop을 통한 월드 배포</td><td>중간</td></tr>
<tr><td><strong>월드 태그/카테고리</strong></td><td>월드 검색을 위한 태그 시스템</td><td>중간</td></tr>
<tr><td><strong>월드 버전 관리</strong></td><td>이전 버전 롤백 기능</td><td>낮음</td></tr>
<tr><td><strong>월드 마켓플레이스</strong></td><td>커뮤니티 월드 공유/판매 플랫폼</td><td>장기</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>카메라 시스템</li>
<li>네트워크 시스템</li>
<li>SDK</li>
<li>사용자 플로우</li>
<li>기술 아키텍처</li>
</ul>
</section>
<section id="02_Features_05_Network_System" class="doc-section">
<div class="doc-header"><span class="doc-category">핵심 기능</span></div>
<h1>네트워크 시스템</h1><hr></p><h2>1. 개요</h2><p>네트워크 시스템은 Photon Fusion 2 Shared Mode를 기반으로 VIRDY의 실시간 멀티유저 협업을 지원한다. 최대 100명이 동시 접속하여 아바타, 카메라, 채팅을 실시간으로 동기화하며, 데이터 압축과 보간 기술로 네트워크 대역폭을 최적화한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 네트워크 구성요소</h3><table>
<thead><tr><th>구성요소</th><th>역할</th></tr></thead>
<tbody>
<tr><td><strong>FusionService</strong></td><td>세션 수명주기 관리 (생성, 참가, 종료)</td></tr>
<tr><td><strong>FusionLobby</strong></td><td>로비 연결 및 세션 검색</td></tr>
<tr><td><strong>NetworkGame</strong></td><td>세션 루트 오브젝트 (플레이어, 채널, 액터 관리)</td></tr>
<tr><td><strong>NetworkPlayer</strong></td><td>플레이어별 인증 정보 및 위치 동기화</td></tr>
<tr><td><strong>NetworkActor</strong></td><td>아바타 본/표정/손가락 동기화</td></tr>
<tr><td><strong>NetworkChannel</strong></td><td>카메라 위치/설정/Channel Link 동기화</td></tr>
<tr><td><strong>ChatService</strong></td><td>Photon Chat 기반 텍스트 채팅 및 초대 시스템</td></tr>
</tbody></table>
<h3>2.2 기본 설정</h3><table>
<thead><tr><th>항목</th><th>값</th></tr></thead>
<tbody>
<tr><td>게임 모드</td><td>Photon Fusion 2 Shared Mode</td></tr>
<tr><td>최대 플레이어</td><td>100명</td></tr>
<tr><td>로비 유형</td><td>Custom</td></tr>
<tr><td>로비 이름</td><td>VIRDY.{버전}</td></tr>
<tr><td>세션 코드</td><td>4자리 영숫자 (예: A1B2)</td></tr>
</tbody></table>
<h3>2.3 세션 생성 및 참가</h3><h4>세션 생성</h4><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>사용자가 월드를 선택하고 "세션 생성" 클릭 (Free 플랜 제외)</td></tr>
<tr><td>2</td><td>4자리 랜덤 세션 코드 생성</td></tr>
<tr><td>3</td><td>세션 속성에 worldId 포함</td></tr>
<tr><td>4</td><td>Photon 세션 생성 → 월드 로딩 → 접속 완료</td></tr>
</tbody></table>
<h4>세션 참가</h4><table>
<thead><tr><th>방법</th><th>설명</th></tr></thead>
<tbody>
<tr><td>세션 코드 입력</td><td>4자리 코드를 입력하여 세션에 참가</td></tr>
<tr><td>친구 초대 수락</td><td>Chat으로 받은 초대를 수락하여 참가</td></tr>
<tr><td>따라가기</td><td>친구가 있는 세션에 참가 요청</td></tr>
</tbody></table>
<h3>2.4 세션 연결 플로우</h3><h4>연결 과정</h4><table>
<thead><tr><th>단계</th><th>동작</th><th>상태 표시</th></tr></thead>
<tbody>
<tr><td>1</td><td>로비 Runner 종료</td><td>"초기화 중..."</td></tr>
<tr><td>2</td><td>Firebase Storage에서 월드 다운로드</td><td>"월드 데이터 다운로드 중... (XX%)"</td></tr>
<tr><td>3</td><td>AssetBundle 로드</td><td>"씬 로딩 중..."</td></tr>
<tr><td>4</td><td>NetworkRunner 생성 및 세션 참가</td><td>"세션 접속 중..."</td></tr>
<tr><td>5</td><td>연결 대기 (30초 타임아웃)</td><td>-</td></tr>
<tr><td>6</td><td>Photon Chat 채널 구독</td><td>-</td></tr>
<tr><td>7</td><td>WorldScene 로드 대기</td><td>-</td></tr>
<tr><td>8</td><td>NetworkGame 초기화 완료</td><td>로딩 해제</td></tr>
</tbody></table>
<h4>연결 해제 과정</h4><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>채팅 구독 해제</td></tr>
<tr><td>2</td><td>NetworkRunner 종료</td></tr>
<tr><td>3</td><td>월드 언로드 (AssetBundle 메모리 해제)</td></tr>
<tr><td>4</td><td>로비 복귀</td></tr>
</tbody></table>
<h3>2.5 네트워크 오브젝트 계층</h3><p>세션에 접속하면 아래 오브젝트가 플레이어별로 생성된다.</p><table>
<thead><tr><th>오브젝트</th><th>수량</th><th>설명</th></tr></thead>
<tbody>
<tr><td>NetworkGame</td><td>1개 (세션당)</td><td>모든 플레이어/채널/액터를 관리하는 루트</td></tr>
<tr><td>NetworkPlayer</td><td>1개 (플레이어당)</td><td>사용자 정보, 아바타 위치</td></tr>
<tr><td>NetworkChannel</td><td>1개 (플레이어당)</td><td>10개 카메라 + Channel Link</td></tr>
<tr><td>NetworkActor</td><td>최대 6개 (플레이어당)</td><td>아바타별 본/표정/손가락</td></tr>
</tbody></table>
<h3>2.6 아바타 동기화 데이터</h3><table>
<thead><tr><th>데이터</th><th>수량</th><th>설명</th></tr></thead>
<tbody>
<tr><td>본 회전</td><td>22개</td><td>Hips ~ Toes (Quaternion)</td></tr>
<tr><td>손가락 포즈</td><td>40개</td><td>양손 각 20개 (muscle 값)</td></tr>
<tr><td>표정(BlendShape)</td><td>100개</td><td>ARKit 52종 + 확장</td></tr>
<tr><td>위치</td><td>3개</td><td>Hip 위치 + 손 오프셋</td></tr>
</tbody></table>
<h4>동기화 본 목록 (22개)</h4><table>
<thead><tr><th>부위</th><th>본</th></tr></thead>
<tbody>
<tr><td>몸통</td><td>Hips, Spine, Chest, UpperChest, Neck, Head</td></tr>
<tr><td>왼팔</td><td>LeftShoulder, LeftUpperArm, LeftLowerArm, LeftHand</td></tr>
<tr><td>오른팔</td><td>RightShoulder, RightUpperArm, RightLowerArm, RightHand</td></tr>
<tr><td>왼다리</td><td>LeftUpperLeg, LeftLowerLeg, LeftFoot, LeftToes</td></tr>
<tr><td>오른다리</td><td>RightUpperLeg, RightLowerLeg, RightFoot, RightToes</td></tr>
</tbody></table>
<h3>2.7 FPS 모드 동기화</h3><p>아바타를 월드 내에서 WASD로 이동할 때의 동기화 데이터:</p><table>
<thead><tr><th>데이터</th><th>설명</th></tr></thead>
<tbody>
<tr><td>IsFPSMode</td><td>FPS 모드 활성화 여부</td></tr>
<tr><td>FPSPosition</td><td>FPS 위치</td></tr>
<tr><td>FPSRotation</td><td>FPS 회전</td></tr>
<tr><td>FPSSpeed</td><td>이동 속도</td></tr>
<tr><td>FPSAnimationState</td><td>애니메이션 상태 (Idle/Walk/Jump/Run)</td></tr>
</tbody></table>
<h3>2.8 Props 동기화</h3><p>Vicon 등 전문 장비에서 소품(Props) 트래킹 시 동기화:</p><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>최대 수량</td><td>20개</td></tr>
<tr><td>동기화 데이터</td><td>이름, 위치, 회전</td></tr>
</tbody></table>
<h3>2.9 Sync 모드 (동기화 품질)</h3><p>네트워크 동기화 품질은 <strong>Live</strong>와 <strong>Ultra</strong> 두 가지 모드로 구분되며, 구독 플랜에 따라 제공 범위가 달라진다.</p><table>
<thead><tr><th>모드</th><th>대상 플랜</th><th>특징</th><th>용도</th></tr></thead>
<tbody>
<tr><td><strong>Live Sync</strong></td><td>모든 플랜</td><td>경량 모션 데이터, 비용 효율적</td><td>일반 방송, 개인 사용</td></tr>
<tr><td><strong>Ultra Sync</strong></td><td>Enterprise 전용</td><td>고품질 모션 데이터, 높은 대역폭</td><td>공연, 특수 연출, 전문 프로덕션</td></tr>
</tbody></table>
<h4>Live Sync</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>대상</td><td>모든 구독 플랜 (무료 포함)</td></tr>
<tr><td>데이터 전송량</td><td>경량화된 모션 데이터</td></tr>
<tr><td>비용 효율</td><td>높음</td></tr>
<tr><td>품질</td><td>일반 사용에 충분한 수준</td></tr>
</tbody></table>
<h4>Ultra Sync</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>대상</td><td>Enterprise 플랜 전용</td></tr>
<tr><td>데이터 전송량</td><td>고용량 모션 데이터</td></tr>
<tr><td>비용 효율</td><td>낮음 (대역폭 비용 높음)</td></tr>
<tr><td>품질</td><td>전문 프로덕션 수준</td></tr>
<tr><td>조건</td><td>네트워크 품질 기준 충족 필요</td></tr>
</tbody></table>
<h4>Sync 모드 설계 원칙</h4><ul><li>Sync 품질은 기술 옵션이 아닌 <strong>비용 및 계약 개념</strong>으로 관리</li>
<li>현재 사용 중인 고용량 모션 데이터는 일반 사용에 부적합</li>
<li>Live Sync 전용으로 최적화된 경량 모션 데이터 개발 필요</li>
<li>Ultra Sync 네트워크 조건 미달 시 Live로 자동 전환</li></p><p>> Sync 모드별 구독 플랜은 라이선스 체계 참조</p><h3>2.10 데이터 압축</h3><p>네트워크 대역폭 절감을 위해 다양한 압축 기법을 적용한다.</p><table>
<thead><tr><th>데이터 유형</th><th>원본 크기</th><th>압축 후</th><th>절감률</th></tr></thead>
<tbody>
<tr><td>Quaternion (본 회전)</td><td>16 bytes</td><td>8 bytes (short×4)</td><td>50%</td></tr>
<tr><td>BlendShape (표정)</td><td>4 bytes</td><td>1 byte (sbyte)</td><td>75%</td></tr>
<tr><td>Position (위치)</td><td>Accuracy(0.1f) 양자화</td><td>가변</td><td>가변</td></tr>
</tbody></table>
추가 최적화:
<li>변경 감지: 유의미한 변경이 있는 데이터만 전송</li>
<li>분산 액터 업데이트: 프레임당 최대 3명의 액터만 서버에 업데이트 (라운드 로빈)</li></p><h3>2.11 보간 시스템</h3><p>원격 플레이어의 움직임을 부드럽게 표시하기 위한 보간 처리:</p><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>히스토리 버퍼</td><td>2프레임 히스토리</td></tr>
<tr><td>본 회전</td><td>Quaternion Slerp 보간</td></tr>
<tr><td>위치</td><td>선형 보간</td></tr>
<tr><td>업데이트 주기</td><td>StateAuthority: FixedUpdate / Proxy: Render</td></tr>
</tbody></table>
<h3>2.12 채팅 시스템</h3><p>Photon Chat을 활용한 텍스트 채팅 및 소셜 기능:</p><h4>채팅 기능</h4><table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td>전체 채팅</td><td>세션 내 모든 사용자에게 메시지 전송</td></tr>
<tr><td>팀 채팅</td><td>팀원에게만 메시지 전송</td></tr>
</tbody></table>
<h4>소셜 명령</h4><table>
<thead><tr><th>명령</th><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td>/invite</td><td>초대</td><td>친구에게 현재 세션 참가 요청</td></tr>
<tr><td>/follow</td><td>따라가기</td><td>친구가 있는 세션에 참가 요청</td></tr>
<tr><td>/bring</td><td>데려오기</td><td>친구를 내 세션으로 이동</td></tr>
</tbody></table>
<h4>재연결 전략</h4><table>
<thead><tr><th>시도</th><th>대기 시간</th></tr></thead>
<tbody>
<tr><td>1~6회</td><td>5초</td></tr>
<tr><td>7회 이상</td><td>60초</td></tr>
<tr><td>최대 시도 초과</td><td>연결 실패 알림</td></tr>
</tbody></table>
<h3>2.13 RPC 사용 패턴</h3><p>주요 데이터 동기화에 사용되는 RPC 패턴:</p><table>
<thead><tr><th>용도</th><th>방향</th><th>채널</th></tr></thead>
<tbody>
<tr><td>플레이어 초기화</td><td>StateAuthority → All</td><td>Reliable</td></tr>
<tr><td>채팅 메시지</td><td>All → All</td><td>Reliable</td></tr>
<tr><td>라이팅 동기화</td><td>StateAuthority → Proxies</td><td>Reliable</td></tr>
<tr><td>Channel Link 요청</td><td>All → StateAuthority</td><td>Reliable</td></tr>
<tr><td>스폰포인트 제어</td><td>All → StateAuthority</td><td>Reliable</td></tr>
</tbody></table>
<h3>2.14 Light / PostProcess 네트워크 동기화</h3><p>세션 내 Directional Light와 PostProcess 파라미터는 모든 유저에게 공유되는 세션 전역 상태이다. 어떤 유저든 Slider UI를 통해 값을 변경하면 RPC로 전체 세션에 전파된다.</p><h4>동기화 대상</h4><table>
<thead><tr><th>기능</th><th>파라미터</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>Directional Light</strong></td><td>Intensity</td><td>광원 강도 (0~10)</td></tr>
<tr><td><strong>Directional Light</strong></td><td>Rotation X</td><td>수직 회전 / 태양 고도 (0°~360°)</td></tr>
<tr><td><strong>Directional Light</strong></td><td>Rotation Y</td><td>수평 회전 / 태양 방위 (0°~360°)</td></tr>
<tr><td><strong>Bloom</strong></td><td>Threshold, Intensity, Scatter, Enable</td><td>블룸 효과 파라미터</td></tr>
<tr><td><strong>Color Adjustments</strong></td><td>Post Exposure, Contrast, Saturation, Enable</td><td>색감 보정 파라미터</td></tr>
</tbody></table>
<h4>동기화 플로우</h4><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>유저가 Slider UI로 Light 또는 PostProcess 파라미터를 변경</td></tr>
<tr><td>2</td><td>로컬에 즉시 적용 (조작자 화면에 바로 반영)</td></tr>
<tr><td>3</td><td>StateAuthority → 모든 Proxy로 Reliable RPC 전송</td></tr>
<tr><td>4</td><td>수신한 모든 유저의 화면에 동일한 값 적용</td></tr>
</tbody></table>
<h4>동기화 특성</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>방향</td><td>StateAuthority → Proxies</td></tr>
<tr><td>채널</td><td>Reliable</td></tr>
<tr><td>제어 권한</td><td>세션 내 모든 유저가 조작 가능</td></tr>
<tr><td>충돌 정책</td><td>Last-Write-Wins (마지막 RPC가 최종값)</td></tr>
<tr><td>후속 참가자</td><td>세션 참가 시 현재 상태값을 수신하여 동기화 상태로 시작</td></tr>
</tbody></table>
<h3>2.15 스폰포인트 네트워크 제어</h3><p>월드의 스폰포인트 위치를 네트워크를 통해 제어할 수 있다.</p><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>위치/회전</td><td>네트워크로 동기화</td></tr>
<tr><td>제어권</td><td>한 번에 1명만 스폰포인트 제어 가능</td></tr>
<tr><td>요청 방식</td><td>RPC로 StateAuthority에 제어권 요청</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 Shared Mode 특성</h3><p>Photon Fusion 2 Shared Mode를 사용하므로:</p><p><li>각 플레이어가 자신의 오브젝트에 대한 StateAuthority를 가짐</li>
<li>서버가 아닌 클라이언트가 자신의 데이터를 직접 업데이트</li>
<li>호스트 없이 모든 클라이언트가 동등한 권한</li></p><h3>3.2 대역폭 관리</h3><p>100명 동시 접속 시 데이터 양이 급증하므로:</p><p><li>프레임당 최대 3명의 액터만 서버 업데이트 (분산 처리)</li>
<li>Quaternion 50% 압축 + BlendShape 75% 압축</li>
<li>유의미한 변경만 전송 (변경 감지)</li>
<li>위치 데이터 양자화</li></p><h3>3.3 버전 호환성</h3><p>로비 이름에 버전을 포함 (VIRDY.{버전})하여 서로 다른 버전의 클라이언트가 같은 세션에 접속하는 것을 방지한다.</p><h3>3.4 세션 속성</h3><p>세션에 worldId를 포함시켜 참가자가 올바른 월드를 다운로드하도록 보장한다.</p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>세션 코드 오류 (존재하지 않는 코드)</td><td>"세션을 찾을 수 없습니다" 오류 표시</td></tr>
<tr><td>연결 대기 타임아웃 (30초)</td><td>자동 연결 해제, 오류 알림, 로비 복귀</td></tr>
<tr><td>월드 다운로드 실패</td><td>연결 해제, 오류 알림</td></tr>
<tr><td>예기치 않은 연결 끊김</td><td>자동 연결 해제, 로비 복귀</td></tr>
<tr><td>Chat 연결 끊김</td><td>지수 백오프 자동 재연결 (5초 → 60초)</td></tr>
<tr><td>Chat 재연결 최대 시도 초과</td><td>연결 실패 알림 표시</td></tr>
<tr><td>이중 Channel Link 시도</td><td>"이중 공유는 불가능합니다" 경고</td></tr>
<tr><td>스폰포인트 제어 충돌</td><td>이미 다른 사용자가 제어 중이면 요청 거부</td></tr>
<tr><td>세션 최대 인원(100명) 초과</td><td>참가 거부, 안내 메시지</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>음성 채팅</strong></td><td>세션 내 실시간 음성 통화</td><td>중간</td></tr>
<tr><td><strong>세션 녹화/재생</strong></td><td>모션 데이터 녹화 및 재생</td><td>중간</td></tr>
<tr><td><strong>로컬 모드</strong></td><td>네트워크 없이 단독 사용</td><td>중간</td></tr>
<tr><td><strong>서버 리전 선택</strong></td><td>사용자가 가까운 서버 선택</td><td>낮음</td></tr>
<tr><td><strong>관전 모드</strong></td><td>참가하지 않고 세션 관전</td><td>장기</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>월드 시스템</li>
<li>카메라 시스템</li>
<li>사용자 플로우</li>
<li>기술 아키텍처</li>
<li>라이선스 체계</li>
<li>리스크 관리</li>
<li>보안 시스템</li>
</ul>
</section>
<section id="02_Features_06_SDK" class="doc-section">
<div class="doc-header"><span class="doc-category">핵심 기능</span></div>
<h1>SDK</h1><hr></p><h2>1. 개요</h2><p>VIRDY SDK는 월드 및 아바타 크리에이터가 커스텀 인터랙티브 콘텐츠를 제작할 수 있도록 제공하는 Unity 패키지이다. SDK를 사용하면 3D 월드를 AssetBundle로 빌드하고, 네트워크 동기화가 가능한 인터랙티브 오브젝트를 추가하며, 자체 확장자 아바타를 빌드할 수 있다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 SDK 패키지 정보</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td>패키지 이름</td><td>com.parable.virdy-sdk</td></tr>
<tr><td>표시 이름</td><td>VIRDY SDK</td></tr>
<tr><td>지원 Unity</td><td>2022.3 LTS</td></tr>
<tr><td>의존성</td><td>Cinemachine 2.9.7</td></tr>
<tr><td>배포 상태</td><td>🚧 개발 중 (외부 배포 예정)</td></tr>
</tbody></table>
<h3>2.2 SDK 구성</h3><table>
<thead><tr><th>폴더</th><th>내용</th></tr></thead>
<tbody>
<tr><td>Editor/</td><td>에디터 전용 도구 (빌드, 인스펙터)</td></tr>
<tr><td>Runtime/</td><td>핵심 SDK 컴포넌트</td></tr>
<tr><td>Runtime/ShaderController/</td><td>셰이더 및 비주얼 제어 컴포넌트</td></tr>
<tr><td>Runtime/EX/</td><td>확장 기능 (PostIt 등)</td></tr>
<tr><td>Plugins/uWindowCapture/</td><td>윈도우 캡처 통합</td></tr>
<tr><td>Samples/</td><td>예제 씬 및 프리팹</td></tr>
<tr><td>Resources/Settings/</td><td>기본 설정</td></tr>
</tbody></table>
<h3>2.3 베이스 클래스</h3><p>SDK의 모든 인터랙티브 컴포넌트는 아래 2개 베이스 클래스 중 하나를 상속한다.</p><h4>VIRDYBehaviour (비네트워크)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>용도</td><td>네트워크 동기화가 필요 없는 인터랙티브 컴포넌트</td></tr>
<tr><td>생명주기</td><td>Initialize (월드 로드 시) → DeInitialize (월드 언로드 시)</td></tr>
<tr><td>기능</td><td>Transform 위치/회전 원본 저장 및 복원</td></tr>
<tr><td>사용 예시</td><td>애니메이션, UI, 조명 효과, 시각 전용 오브젝트</td></tr>
</tbody></table>
<h4>VIRDYNetworkBehaviour (네트워크)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>용도</td><td>네트워크 동기화가 필요한 인터랙티브 컴포넌트</td></tr>
<tr><td>상속</td><td>Photon Fusion의 NetworkBehaviour</td></tr>
<tr><td>생명주기</td><td>Initialize → DeInitialize (VIRDYBehaviour와 동일)</td></tr>
<tr><td>필수 요구</td><td>NetworkObject 컴포넌트 필요</td></tr>
<tr><td>기능</td><td>Networked 속성, RPC 메서드 사용 가능</td></tr>
<tr><td>사용 예시</td><td>문, 스위치, 동기화 오브젝트, 공유 UI</td></tr>
</tbody></table>
<h3>2.4 VIRDYWorldDescriptor</h3><p>월드 씬에 필수적인 싱글톤 컴포넌트로, 월드 설정과 초기화를 관리한다.</p><table>
<thead><tr><th>설정</th><th>설명</th></tr></thead>
<tbody>
<tr><td>SpawnPoint</td><td>아바타 스폰 위치</td></tr>
<tr><td>RendererData</td><td>URP 렌더러 설정 (오버라이드 가능)</td></tr>
<tr><td>GlobalVolume</td><td>포스트 프로세싱 볼륨</td></tr>
<tr><td>CustomDirectionalLight</td><td>방향광 설정</td></tr>
<tr><td>UnityVersion / URPVersion</td><td>빌드 환경 버전 정보</td></tr>
</tbody></table>
초기화 시 씬 내 모든 VIRDYBehaviour 및 VIRDYNetworkBehaviour를 탐색하여 Initialize를 호출한다.</p><p>에디터 생성: Hierarchy 우클릭 → GameObject/VIRDY/VIRDYWorldDescriptor</p><h3>2.5 인터랙티브 컴포넌트</h3><h4>VIRDYObjectActivator</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>이름으로 오브젝트 그룹 활성화/비활성화</td></tr>
<tr><td>네트워크</td><td>불필요</td></tr>
<tr><td>사용 예시</td><td>버튼으로 조명/파티클 그룹 토글</td></tr>
</tbody></table>
<h4>VIRDYGlobalFunction (네트워크)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>키 기반 함수를 모든 플레이어에게 브로드캐스트</td></tr>
<tr><td>네트워크</td><td>필요 (RPC)</td></tr>
<tr><td>지원 인자</td><td>없음 / int / string</td></tr>
<tr><td>사용 예시</td><td>특수 효과 활성화, 애니메이션 트리거, 이벤트 전파</td></tr>
</tbody></table>
<h4>VIRDYMultiObjectControl</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>오브젝트 배열을 순차적으로 활성화/비활성화</td></tr>
<tr><td>네트워크</td><td>불필요</td></tr>
<tr><td>사용 예시</td><td>갤러리 이전/다음, 캐러셀 디스플레이</td></tr>
</tbody></table>
<h4>VIRDYVideoPlayer</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>비디오 클립 재생, 페이드 전환, RenderTexture 출력</td></tr>
<tr><td>네트워크</td><td>불필요</td></tr>
<tr><td>구성</td><td>VideoClip + RenderTexture + FadeUI 1:1 매핑</td></tr>
</tbody></table>
<h4>VIRDYRoulette (네트워크)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>이징 커브 기반 회전 룰렛</td></tr>
<tr><td>네트워크</td><td>필요 (동기화된 랜덤 결과)</td></tr>
<tr><td>사용 예시</td><td>복권, 스핀 게임, 랜덤 결과 표시</td></tr>
</tbody></table>
<h4>VIRDYInputFieldSync (네트워크)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>텍스트 입력을 여러 UI에 네트워크 브로드캐스트</td></tr>
<tr><td>네트워크</td><td>필요</td></tr>
<tr><td>사용 예시</td><td>자막 디스플레이, 공유 채팅</td></tr>
</tbody></table>
<h3>2.6 조명 제어 컴포넌트</h3><h4>VIRDYLightController</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>포인트 라이트 프리셋 전환, 파티클 효과 토글</td></tr>
<tr><td>라이트 수</td><td>최대 3개 포인트 라이트</td></tr>
<tr><td>프리셋</td><td>색상(3개), 강도, 범위 조합</td></tr>
<tr><td>전환</td><td>부드러운 색상 전환 (Lerp)</td></tr>
</tbody></table>
<h4>VIRDYMirrorBall</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>HSV 색상 순환 + 회전 + 밝기 제어</td></tr>
<tr><td>제어</td><td>MusicStart / MusicStop (페이드아웃)</td></tr>
</tbody></table>
<h3>2.7 셰이더 및 VFX 컴포넌트</h3><h4>VIRDYMaterialController (네트워크)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>머티리얼 셰이더 속성을 네트워크로 동기화</td></tr>
<tr><td>입력</td><td>UI 슬라이더(VIRDYMaterialSlider) 또는 직접 float 값</td></tr>
<tr><td>사용 예시</td><td>조명 색상/강도 제어, 투명도, 셰이더 파라미터</td></tr>
</tbody></table>
<h4>VIRDYVFXController (네트워크)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>Visual Effect Graph 파라미터를 네트워크로 제어</td></tr>
<tr><td>지원 속성</td><td>Float, Slider(0~1), Vector2, Gradient(색상 프리셋)</td></tr>
</tbody></table>
<h4>EmissionController</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>이름 매칭으로 머티리얼 발광 강도 제어</td></tr>
<tr><td>사용 예시</td><td>캐릭터 머티리얼 발광, 네온 효과</td></tr>
</tbody></table>
<h3>2.8 UI 컴포넌트</h3><h4>VIRDYWorldUI</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>World Space Canvas를 VIRDY 이벤트 카메라에 자동 연결</td></tr>
<tr><td>설정</td><td>컴포넌트 추가만으로 자동 설정</td></tr>
<tr><td>카메라 전환</td><td>카메라 변경 시 자동 업데이트</td></tr>
</tbody></table>
<h4>VIRDYScreenUI</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>Screen Space Camera Canvas 자동 설정</td></tr>
<tr><td>설정</td><td>렌더 모드, 레이어, Z-오더 자동 관리</td></tr>
</tbody></table>
<h4>VIRDYFadeUI</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>UI 페이드 인/아웃 + 선택적 위치 이동</td></tr>
<tr><td>애니메이션</td><td>DOTween 기반 (조건부 컴파일: VIRDY_DOTWEEN)</td></tr>
<tr><td>설정</td><td>Duration, Ease In/Out, 위치 시작/끝</td></tr>
</tbody></table>
<h4>VIRDYCinemachineTrack</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>Timeline 재생을 활성 카메라 Brain에 자동 바인딩</td></tr>
<tr><td>사용 예시</td><td>플레이어 카메라 변경에 적응하는 시네마틱 시퀀스</td></tr>
</tbody></table>
<h3>2.9 확장 컴포넌트</h3><h4>BlendShapeManager</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>VRM 아바타 BlendShape + 연계 GameObject 제어</td></tr>
<tr><td>설정</td><td>대상 인덱스, VRM 메타 타이틀, BlendShape 경로/이름</td></tr>
<tr><td>사용 예시</td><td>아바타 커스텀 표정, 바디 모프</td></tr>
</tbody></table>
<h4>VIRDYPostItController</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>물리 기반 포스트잇 부착/분리 시스템</td></tr>
<tr><td>구성</td><td>PostItStickyController (개별) + VIRDYPaperAero (종이비행기)</td></tr>
<tr><td>연동</td><td>NetworkActor.WriteBuffer에서 틱 호출</td></tr>
</tbody></table>
<h4>VIRDYVelocity (네트워크)</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>네트워크 동기화 물리 힘 (선형 속도 + 토크)</td></tr>
<tr><td>필수</td><td>NetworkObject + NetworkRigidbody + Rigidbody</td></tr>
<tr><td>사용 예시</td><td>물리 오브젝트, 공, 인터랙티브 소품</td></tr>
</tbody></table>
<h4>VIRDYTimer</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>경과 시간 또는 현재 시간 표시</td></tr>
<tr><td>출력</td><td>시/분/초/밀리초 별도 TextMeshPro</td></tr>
<tr><td>제어</td><td>Start / Stop / Reset / GetCurrentTime</td></tr>
</tbody></table>
<h4>OSCReceiver</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>기능</td><td>외부 OSC 메시지를 VIRDYGlobalFunction으로 라우팅</td></tr>
<tr><td>연동</td><td>VSeeFace, Resolume 등 OSC 앱</td></tr>
<tr><td>지원</td><td>인자 없음, int, string 메시지</td></tr>
</tbody></table>
<h3>2.10 에디터 도구</h3><h4>VIRDYWorldDescriptorEditor</h4><table>
<thead><tr><th>기능</th><th>설명</th></tr></thead>
<tbody>
<tr><td>렌더러 상태 표시</td><td>URP 기능 목록 (SSAO, HBAO, Volumetric 등)</td></tr>
<tr><td>월드 빌더</td><td>출력 경로 설정 + 원클릭 AssetBundle 빌드</td></tr>
<tr><td>빌드 방식</td><td>ChunkBasedCompression, 매니페스트 정리</td></tr>
</tbody></table>
<h4>컴포넌트별 에디터</h4><table>
<thead><tr><th>에디터</th><th>기능</th></tr></thead>
<tbody>
<tr><td>VIRDYFadeUIEditor</td><td>에디터에서 페이드 애니메이션 테스트</td></tr>
<tr><td>VIRDYVideoPlayerEditor</td><td>비디오 클립 재생 테스트</td></tr>
<tr><td>VIRDYLightTransitionEditor</td><td>라이트 프리셋 전환 테스트</td></tr>
</tbody></table>
<h3>2.11 샘플 프리팹</h3><table>
<thead><tr><th>프리팹</th><th>설명</th></tr></thead>
<tbody>
<tr><td>VIRDYWorld.prefab</td><td>Descriptor 사전 설정된 템플릿 월드</td></tr>
<tr><td>VIRDYMaterialController.prefab</td><td>셰이더 제어 설정 예제</td></tr>
<tr><td>VIRDYUwc.prefab</td><td>윈도우 캡처 통합 예제</td></tr>
<tr><td>uWC Window List Item.prefab</td><td>윈도우 선택 UI</td></tr>
</tbody></table>
<h3>2.12 조건부 컴파일 심볼</h3><table>
<thead><tr><th>심볼</th><th>설명</th></tr></thead>
<tbody>
<tr><td>VIRDY_CORE</td><td>프레임워크 빌드 (Context 접근 가능)</td></tr>
<tr><td>VIRDY_DOTWEEN</td><td>DOTween 애니메이션 활성화</td></tr>
<tr><td>VIRDY_HORIZONBASEDAMBIENTOCCLUSION</td><td>HBAO 렌더러</td></tr>
<tr><td>VIRDY_OCCASOFTWARE_ALTOS</td><td>Altos 렌더러</td></tr>
<tr><td>VIRDY_VOLUMETRICLIGHTS</td><td>볼류메트릭 라이트</td></tr>
<tr><td>VIRDY_VOLUMETRICFOGANDMIST2</td><td>볼류메트릭 포그</td></tr>
</tbody></table>
<h3>2.13 월드 빌드 워크플로우</h3><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>Unity 씬 생성, VIRDYWorldDescriptor 추가</td></tr>
<tr><td>2</td><td>스폰 포인트, Directional Light, GlobalVolume 설정</td></tr>
<tr><td>3</td><td>인터랙티브 컴포넌트 추가 (VIRDYBehaviour/VIRDYNetworkBehaviour 상속)</td></tr>
<tr><td>4</td><td>에디터에서 테스트</td></tr>
<tr><td>5</td><td>VIRDYWorldDescriptorEditor의 "Build" 클릭 → AssetBundle 생성</td></tr>
<tr><td>6</td><td>VIRDY 로비에서 AssetBundle 업로드</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 SDK 외부 배포</h3><ul><li>SDK는 외부 크리에이터에게 웹사이트/문서를 통해 배포 예정</li>
<li>월드 빌드 + 아바타 빌드(자체 확장자) 기능 포함</li>
<li>외부 배포 시 VIRDY_CORE 심볼 없이 사용 가능해야 함</li></p><h3>3.2 네트워크 컴포넌트의 NetworkObject 요구</h3><p>VIRDYNetworkBehaviour를 사용하는 모든 오브젝트는 NetworkObject 컴포넌트가 필수이다. 이를 누락하면 네트워크 동기화가 작동하지 않으므로, RequireComponent 어트리뷰트로 강제한다.</p><h3>3.3 월드 내 충돌 방지</h3><p>월드 AssetBundle에 포함된 EventSystem, Camera, AudioListener는 VIRDY 메인 시스템과 충돌하므로 자동 비활성화된다. SDK 사용자에게 이 제약을 명확히 안내해야 한다.</p><h3>3.4 프레임워크 통합 포인트</h3><p>SDK 컴포넌트는 VIRDY 프레임워크와 아래 지점에서 연결된다:</p><table>
<thead><tr><th>연결</th><th>설명</th></tr></thead>
<tbody>
<tr><td>카메라 이벤트</td><td>VIRDYWorldUI, VIRDYCinemachineTrack이 카메라 전환을 감지</td></tr>
<tr><td>생명주기</td><td>VIRDYWorldDescriptor가 월드 로드/언로드 시 모든 컴포넌트 초기화/정리</td></tr>
<tr><td>네트워크</td><td>VIRDYNetworkBehaviour가 Photon Fusion 세션에 자동 참여</td></tr>
<tr><td>PostIt</td><td>VIRDYPostItController가 NetworkActor.WriteBuffer에서 틱 호출</td></tr>
</tbody></table>
<hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>VIRDYWorldDescriptor 누락 월드</td><td>기본값으로 동작 (스폰 포인트 = 원점)</td></tr>
<tr><td>NetworkObject 없이 VIRDYNetworkBehaviour 사용</td><td>RequireComponent로 자동 추가 강제</td></tr>
<tr><td>월드에 EventSystem/Camera/AudioListener 포함</td><td>자동 비활성화</td></tr>
<tr><td>SDK 버전과 클라이언트 버전 불일치</td><td>VIRDYWorldDescriptor의 UnityVersion/URPVersion으로 감지</td></tr>
<tr><td>DOTween 미설치 상태에서 FadeUI 사용</td><td>VIRDY_DOTWEEN 심볼 미정의 시 DOTween 코드 비활성화</td></tr>
<tr><td>다수의 VIRDYWorldDescriptor 존재</td><td>싱글톤으로 하나만 유지</td></tr>
<tr><td>OSC 포트 충돌</td><td>사용자에게 포트 변경 안내</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>외부 SDK 배포</strong></td><td>웹사이트/문서를 통한 외부 크리에이터 배포</td><td>높음</td></tr>
<tr><td><strong>자체 아바타 확장자</strong></td><td>애니메이션/스크립트 내장 아바타 빌드 기능</td><td>높음</td></tr>
<tr><td><strong>SDK 문서화</strong></td><td>API 레퍼런스, 튜토리얼, 예제 프로젝트</td><td>높음</td></tr>
<tr><td><strong>커스텀 컴포넌트 추가</strong></td><td>투표, 리더보드, 미니게임 등</td><td>중간</td></tr>
<tr><td><strong>비주얼 스크립팅</strong></td><td>코드 없이 인터랙션 설정</td><td>장기</td></tr>
<tr><td><strong>월드/아바타 마켓플레이스</strong></td><td>커뮤니티 콘텐츠 공유/판매</td><td>장기</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>월드 시스템</li>
<li>네트워크 시스템</li>
<li>아바타 시스템</li>
</ul>
</section>
<section id="03_Operations_01_User_Roles" class="doc-section">
<div class="doc-header"><span class="doc-category">운영 기획</span></div>
<h1>사용자 역할</h1><hr></p><h2>1. 개요</h2><p>VIRDY는 Creator와 Manager 두 가지 역할을 제공하여 프로덕션급 워크플로우를 지원한다. Creator는 아바타와 모션캡처를 포함한 전체 기능을 사용하며, Manager는 카메라/조명 등 프로덕션 지원에 집중한다. 역할은 회원가입 시 선택되며 계정에 고정된다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 역할 정의</h3><table>
<thead><tr><th>구분</th><th>Creator</th><th>Manager</th></tr></thead>
<tbody>
<tr><td>핵심 정의</td><td>아바타 + 모캡을 갖춘 전체 기능 사용자</td><td>프로덕션 제어에 집중하는 지원 사용자</td></tr>
<tr><td>리소스 사용</td><td>높음 (아바타, 애니메이션, 모캡 처리)</td><td>낮음 (아바타/모캡 없음)</td></tr>
<tr><td>주 사용 대상</td><td>콘텐츠 크리에이터, VTuber, 출연자</td><td>카메라맨, PD, 조명 기술자</td></tr>
</tbody></table>
<h3>2.2 역할별 기능 권한</h3><table>
<thead><tr><th>기능</th><th>Creator</th><th>Manager</th><th>비고</th></tr></thead>
<tbody>
<tr><td>아바타 인스턴스화</td><td>✅</td><td>❌</td><td>핵심 차이점</td></tr>
<tr><td>모션캡처 장비 연결</td><td>✅</td><td>❌</td><td>Facial/Body/Hand</td></tr>
<tr><td>FreeCam 카메라</td><td>✅</td><td>✅</td><td></td></tr>
<tr><td>고정 카메라 (1~9)</td><td>✅</td><td>✅</td><td></td></tr>
<tr><td>Channel Link 송신/수신</td><td>✅</td><td>✅</td><td></td></tr>
<tr><td>조명 제어</td><td>✅</td><td>✅</td><td>방향광</td></tr>
<tr><td>포스트 프로세싱 제어</td><td>✅</td><td>✅</td><td>Bloom, Color</td></tr>
<tr><td>세션 생성</td><td>✅</td><td>✅</td><td>Free 플랜만 제한 (역할 무관)</td></tr>
<tr><td>월드 참가</td><td>✅</td><td>✅</td><td>세션 코드로 참가</td></tr>
<tr><td>아바타 설정 패널</td><td>✅</td><td>❌</td><td></td></tr>
<tr><td>트래커 설정 패널</td><td>✅</td><td>❌</td><td></td></tr>
<tr><td>전체 채팅</td><td>✅</td><td>✅</td><td></td></tr>
<tr><td>팀 채팅</td><td>✅</td><td>✅</td><td>역할별 분리</td></tr>
</tbody></table>
<h3>2.3 역할 선택 및 저장</h3><h4>선택 시점</h4><p>회원가입 시 Creator 또는 Manager를 선택한다. 상호 배타적이며, 선택 후 계정에 고정된다.</p><h4>저장 구조</h4><table>
<thead><tr><th>위치</th><th>저장 방식</th></tr></thead>
<tbody>
<tr><td>Firebase Firestore</td><td>users/{userId}/isCreator (boolean)</td></tr>
<tr><td>로컬 캐시</td><td>UserData.IsCreator</td></tr>
<tr><td>네트워크 동기화</td><td>NetworkPlayer.IsCreator (RPC)</td></tr>
</tbody></table>
<h4>네트워크 동기화</h4><p>월드 입장 시 RPC를 통해 모든 접속자에게 역할이 전파된다. 이를 통해:
<ul><li>플레이어 목록에서 역할별 색상 표시</li>
<li>팀 채팅 라우팅</li>
<li>UI 기능 접근 제어</li></p><h3>2.4 팀 채팅 시스템</h3><p>역할 기반으로 팀 채팅이 분리된다.</p><table>
<thead><tr><th>채팅 모드</th><th>수신 대상</th><th>설명</th></tr></thead>
<tbody>
<tr><td>전체 채팅 [All]</td><td>모든 접속자</td><td>역할 무관</td></tr>
<tr><td>Creator 팀 [Creator]</td><td>Creator만</td><td>Creator 역할 사용자에게만 전송</td></tr>
<tr><td>Manager 팀 [Manager]</td><td>Manager만</td><td>Manager 역할 사용자에게만 전송</td></tr>
</tbody></table>
<h4>시각적 구분</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>플레이어 목록 색상</td><td>Creator/Manager 별도 색상</td></tr>
<tr><td>채팅 메시지 접두사</td><td>팀 채팅 시 (Creator) 또는 (Manager) 표시</td></tr>
<tr><td>채팅 입력 모드 표시</td><td>[All] / [Creator] / [Manager]</td></tr>
</tbody></table>
<h3>2.5 프로덕션 워크플로우</h3><h4>가상 방송 스튜디오 시나리오</h4><table>
<thead><tr><th>역할</th><th>담당자</th><th>주요 업무</th></tr></thead>
<tbody>
<tr><td>Creator</td><td>출연자</td><td>아바타 연기, 모션캡처 수행</td></tr>
<tr><td>Manager</td><td>PD</td><td>카메라 스위칭, 방송 송출 결정</td></tr>
<tr><td>Manager</td><td>카메라맨 A</td><td>CAM 1~3 촬영</td></tr>
<tr><td>Manager</td><td>카메라맨 B</td><td>CAM 4~6 촬영</td></tr>
<tr><td>Manager</td><td>카메라맨 C</td><td>CAM 7~9 촬영</td></tr>
<tr><td>Manager</td><td>조명 기술자</td><td>방향광, 포스트 프로세싱 조절</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 역할 고정 정책</h3><p>역할은 회원가입 시 1회 선택하며 변경 불가. 이는 역할 기반 리소스 할당과 UI 구성을 단순화하기 위함이다. 향후 역할 변경 기능 추가를 고려할 수 있다.</p><h3>3.2 리소스 최적화</h3><p>Manager는 아바타/모캡 없이 동작하므로 PC 리소스 사용이 상대적으로 낮다. 프로덕션 환경에서 카메라맨/PD 용도의 PC에 최적화된 구성이 가능하다.</p><h3>3.3 Channel Link와 역할</h3><p>Channel Link는 역할에 관계없이 동등한 기능을 제공한다. Creator와 Manager 모두 카메라 송출/수신이 가능하다.</p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>Free 플랜에서 세션 생성 시도</td><td>UI에서 버튼 비활성화, 업그레이드 안내</td></tr>
<tr><td>Manager가 아바타 설정 접근</td><td>로비에서 아바타/트래커 패널 숨김</td></tr>
<tr><td>Creator 없이 Manager만 세션에 존재</td><td>정상 동작 (카메라 조작만 가능)</td></tr>
<tr><td>역할 변경 요청</td><td>현재 미지원, 새 계정 생성 안내</td></tr>
<tr><td>팀 채팅에서 상대 역할 메시지 확인</td><td>팀 채팅은 같은 역할에게만 전송</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>역할 변경</strong></td><td>프로필에서 역할 변경 기능</td><td>낮음</td></tr>
<tr><td><strong>관전자 역할</strong></td><td>방송 관전만 가능한 역할</td><td>장기</td></tr>
<tr><td><strong>커스텀 역할</strong></td><td>프로덕션팀별 세밀한 권한 설정</td><td>장기</td></tr>
<tr><td><strong>역할별 라이선스</strong></td><td>Creator/Manager 별도 가격 정책</td><td>중간</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>제품 개요</li>
<li>사용자 플로우</li>
<li>카메라 시스템</li>
<li>UI 기획</li>
</ul>
</section>
<section id="03_Operations_02_License_System" class="doc-section">
<div class="doc-header"><span class="doc-category">운영 기획</span></div>
<h1>라이선스 체계</h1><hr></p><h2>1. 개요</h2><p>VIRDY의 라이선스 체계는 SaaS 구독 모델을 기반으로 설계된다. <strong>무료 / Pro / Studio / Enterprise</strong> 4단계 티어로 구성되며, 각 티어는 사용자 세그먼트(개인 입문자, 크리에이터, 프로덕션 스튜디오, 기업)별 차별화된 기능과 비용 구조를 제공한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 구독 플랜 티어</h3><table>
<thead><tr><th>항목</th><th>무료</th><th>Pro (개인)</th><th>Studio</th><th>Enterprise</th></tr></thead>
<tbody>
<tr><td><strong>대상</strong></td><td>개인 입문자</td><td>개인 크리에이터</td><td>프로덕션 스튜디오</td><td>기업/대규모 프로덕션</td></tr>
<tr><td><strong>방 생성</strong></td><td>❌</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td><strong>방 최대 인원</strong></td><td>-</td><td>3명</td><td>6명</td><td>10명+</td></tr>
<tr><td><strong>동시 방 보유</strong></td><td>0개</td><td>1개</td><td>3개</td><td>10개+</td></tr>
<tr><td><strong>매니저 모드</strong></td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr>
<tr><td><strong>Sync 모드</strong></td><td>Live</td><td>Live</td><td>Live</td><td>Live / Ultra</td></tr>
<tr><td><strong>아바타 슬롯</strong></td><td>0개</td><td>3개</td><td>10개</td><td>협의</td></tr>
<tr><td><strong>아바타 용량 제한</strong></td><td>-</td><td>중</td><td>높음</td><td>협의</td></tr>
<tr><td><strong>스토리지</strong></td><td>로컬만</td><td>클라우드 (소량)</td><td>클라우드</td><td>클라우드 (대용량)</td></tr>
<tr><td><strong>상업적 사용</strong></td><td>❌</td><td>✅</td><td>✅</td><td>✅</td></tr>
</tbody></table>
<h3>2.2 Sync 모드</h3><p>네트워크 동기화 품질은 <strong>Live</strong>와 <strong>Ultra</strong> 두 가지 모드로 구분된다.</p><table>
<thead><tr><th>모드</th><th>대상 플랜</th><th>특징</th><th>용도</th></tr></thead>
<tbody>
<tr><td><strong>Live</strong></td><td>모든 플랜</td><td>경량 모션 데이터, 비용 효율적</td><td>일반 방송, 개인 사용</td></tr>
<tr><td><strong>Ultra</strong></td><td>Enterprise 전용</td><td>고품질 모션 데이터, 높은 대역폭</td><td>공연, 특수 연출, 전문 프로덕션</td></tr>
</tbody></table>
<strong>Sync 모드 설계 원칙:</strong>
<ul><li>Sync 품질은 기술 옵션이 아닌 <strong>비용 및 계약 개념</strong>으로 관리</li>
<li>현재 사용 중인 고용량 모션 데이터는 일반 사용에 부적합</li>
<li>Live Sync 전용으로 최적화된 경량 모션 데이터 개발 필요</li></p><h3>2.3 스토리지 정책</h3><p>구독 종료 후에도 데이터를 보관하는 것 자체가 지속적인 비용 부담이므로, 스토리지는 <strong>총 용량(GB) 기준이 아닌 보관 가능한 개수(아바타/월드 단위) 기준</strong>으로 관리한다.</p><table>
<thead><tr><th>티어</th><th>아바타 보관</th><th>월드 보관</th><th>비고</th></tr></thead>
<tbody>
<tr><td>무료</td><td>0개</td><td>0개</td><td>로컬 저장만 가능</td></tr>
<tr><td>Pro</td><td>3개</td><td>1개</td><td>개별 용량 제한 있음</td></tr>
<tr><td>Studio</td><td>10개</td><td>5개</td><td>개별 용량 제한 있음</td></tr>
<tr><td>Enterprise</td><td>협의</td><td>협의</td><td>맞춤 계약</td></tr>
</tbody></table>
<h3>2.4 Enterprise 플랜</h3><p>Enterprise 플랜은 <strong>시트(Seat) 기반</strong>으로 접근 권한을 제공한다.</p><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>구조</td><td>여러 개인 계정을 초대하여 사용</td></tr>
<tr><td>권한 관리</td><td>시트별 권한 할당 가능</td></tr>
<tr><td>Ultra Sync</td><td>특정 상황(공연, 특수 연출)에서만 제공</td></tr>
<tr><td>맞춤 계약</td><td>아바타/월드 슬롯, 스토리지 등 협의</td></tr>
</tbody></table>
<h3>2.5 방 생성 및 세션 제한</h3><p>비용 부담이 가장 큰 요소는 <strong>다운로드 트래픽</strong>이므로, 이를 사용자에게 직접 노출하지 않고 <strong>구독 플랜별 제한</strong>으로 관리한다.</p><table>
<thead><tr><th>제한 항목</th><th>무료</th><th>Pro</th><th>Studio</th><th>Enterprise</th></tr></thead>
<tbody>
<tr><td>동시 세션 생성</td><td>0</td><td>1</td><td>3</td><td>10+</td></tr>
</tbody></table>
<strong>세션 유지 조건:</strong>
<li>유료 플랜 사용자가 최소 1명 이상 접속 중일 때만 세션 유지</li>
<li>Free 사용자만 남은 세션은 "0명" 취급 → 10분 유예 후 파기</li>
<li>세션 소유자 퇴장 시 남은 유료 사용자에게 소유권 자동 이전</li></p><p><strong>세션 관리 기능:</strong>
<li>유료 플랜 사용자는 로비에서 "내 세션" 패널을 통해 활성 세션 관리</li>
<li>세션 리스트 조회, 재접속, 강제 종료 가능</li>
<li>동시 세션 제한에 걸렸을 때 기존 세션 종료 후 새 세션 생성</li></p><p>> 세션 생명주기 상세 정책은 데이터 생명주기 참조</p><h3>2.6 무료 플랜 설계 원칙</h3><p>초기 유저 확보를 위해 무료 플랜에서도 최대한 많은 기능을 제공하되, <strong>비용에 직접적인 영향을 주는 요소는 반드시 제한</strong>한다.</p><table>
<thead><tr><th>허용</th><th>제한</th></tr></thead>
<tbody>
<tr><td>세션 참가 (초대받아서)</td><td>방 생성</td></tr>
<tr><td>기본 트래커 사용</td><td>아바타 클라우드 저장</td></tr>
<tr><td>로컬 아바타 사용</td><td>월드 업로드</td></tr>
<tr><td>채팅 참여</td><td>-</td></tr>
</tbody></table>
<h3>2.7 가격 정책 (검토 중)</h3><table>
<thead><tr><th>모델</th><th>설명</th><th>상태</th></tr></thead>
<tbody>
<tr><td>SaaS 구독</td><td>월간/연간 구독</td><td>📋 주력 검토</td></tr>
<tr><td>Steam 연동</td><td>Steam 가격 정책 연동, DRM</td><td>📋 검토 중</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 비용 산정 원칙</h3><p>비용 산정은 항상 <strong>최악의 경우(Worst Case)</strong>를 기준으로 고려한다.</p><table>
<thead><tr><th>비용 요소</th><th>중요도</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>Photon 서버 비용</strong></td><td>높음</td><td>동시 접속자 수, 세션 수에 비례</td></tr>
<tr><td><strong>다운로드 트래픽</strong></td><td>높음</td><td>월드/아바타 다운로드 (현재 1GB당 약 150원)</td></tr>
<tr><td><strong>스토리지 비용</strong></td><td>중간</td><td>비활성 계정 데이터 장기 보관 시 누적</td></tr>
</tbody></table>
<h3>3.2 리전별 비용 차이</h3><p>Firebase Storage 다운로드 비용은 리전에 따라 다르므로, 서비스 리전 선택 시 비용 확인 필요.</p><h3>3.3 플랜 등급 하락 정책</h3><p>Enterprise → 하위 플랜으로 등급 하락 시:</p><table>
<thead><tr><th>정책</th><th>설명</th></tr></thead>
<tbody>
<tr><td>즉시 삭제</td><td>❌ 부적절</td></tr>
<tr><td>유예 기간</td><td>일정 기간 데이터 다운로드 가능</td></tr>
<tr><td>Archive/Frozen</td><td>아카이브로 데이터 이동 (서버 비용 감축)</td></tr>
<tr><td>장기 미복귀</td><td>6~12개월 후 데이터 삭제</td></tr>
</tbody></table>
> 상세 정책은 데이터 생명주기 문서 참조</p><h3>3.4 결제 시스템 (미구현)</h3><p>현재 코드베이스에 결제/빌링 시스템이 없다. 향후 구현 시 고려할 사항:</p><p><li>Stripe 또는 결제 게이트웨이 통합</li>
<li>구독 상태 관리 (Firebase Functions)</li>
<li>라이선스 키 발급 및 검증</li>
<li>평가판 기간 로직</li>
<li>Steam DRM / 가격 정책 연동</li></p><h3>3.5 보안 취약점</h3><table>
<thead><tr><th>취약점</th><th>설명</th></tr></thead>
<tbody>
<tr><td>클라이언트 측 제한만 적용</td><td>서버 측 검증 없음</td></tr>
<tr><td>메모리 해킹 가능</td><td>MaxActorSize 런타임 변경 가능</td></tr>
</tbody></table>
향후 서버 측 라이선스 검증, 암호화된 라이선스 토큰, 주기적 라이선스 확인이 필요하다.</p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>무료 플랜에서 방 생성 시도</td><td>UI에서 비활성화 + 업그레이드 안내</td></tr>
<tr><td>구독 만료 시</td><td>데이터 손실 없이 기능 차단, 갱신 안내</td></tr>
<tr><td>동시 방 한도 초과</td><td>새 방 생성 차단, 기존 방 종료 유도</td></tr>
<tr><td>Enterprise → Pro 등급 하락</td><td>유예 기간 제공, 데이터 아카이브</td></tr>
<tr><td>결제 실패</td><td>유예 기간 제공 후 기능 제한</td></tr>
<tr><td>Ultra Sync 네트워크 조건 미달</td><td>Live로 자동 전환 + 안내</td></tr>
</tbody></table>
<hr></p><h2>5. 미결정 쟁점</h2><table>
<thead><tr><th>항목</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>무료 플랜 제공 기능의 최종 범위</td><td>📋 논의 필요</td><td>-</td></tr>
<tr><td>플랜별 아바타/월드 보관 개수</td><td>📋 논의 필요</td><td>-</td></tr>
<tr><td>구독 종료 후 데이터 보관 기간</td><td>📋 논의 필요</td><td>Google Drive 등 벤치마킹</td></tr>
<tr><td>방 생성 및 초대 제한 수치</td><td>📋 논의 필요</td><td>-</td></tr>
<tr><td>Enterprise 시트 구조의 구체적 운영 방식</td><td>📋 논의 필요</td><td>-</td></tr>
<tr><td>플랜별 가격</td><td>📋 논의 필요</td><td>-</td></tr>
</tbody></table>
<hr></p><h2>6. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>4티어 플랜 구현</strong></td><td>무료/Pro/Studio/Enterprise</td><td>높음</td></tr>
<tr><td><strong>결제 시스템</strong></td><td>Stripe/Steam 결제 연동</td><td>높음</td></tr>
<tr><td><strong>라이선스 서버</strong></td><td>서버 측 라이선스 검증</td><td>중간</td></tr>
<tr><td><strong>평가판</strong></td><td>기간 한정 Pro/Studio 체험</td><td>중간</td></tr>
<tr><td><strong>Ultra Sync 구현</strong></td><td>Enterprise 전용 고품질 동기화</td><td>중간</td></tr>
</tbody></table>
<hr></p><h2>7. 변경 이력</h2><table>
<thead><tr><th>버전</th><th>날짜</th><th>변경 내용</th><th>작성자</th></tr></thead>
<tbody>
<tr><td>2.0</td><td>2026-01-28</td><td>초기 라이선스 체계 문서 작성</td><td>VIRDY Studio</td></tr>
<tr><td>2.1</td><td>2026-01-28</td><td>VIRDY_LITE 전면 제거, Standard 단일 빌드로 통합</td><td>VIRDY Studio</td></tr>
<tr><td>3.0</td><td>2026-01-29</td><td>4티어 구독 플랜 체계 확정, Sync 모드(Live/Ultra) 추가, 스토리지 개수 기반 정책, Enterprise 시트 모델 추가</td><td>VIRDY Studio</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>제품 개요</li>
<li>사용자 역할</li>
<li>보안 시스템</li>
<li>데이터 생명주기</li>
<li>리스크 관리</li>
<li>계정 시스템</li>
<li>네트워크 시스템</li>
</ul>
</section>
<section id="03_Operations_03_Security" class="doc-section">
<div class="doc-header"><span class="doc-category">운영 기획</span></div>
<h1>보안 시스템</h1><hr></p><h2>1. 개요</h2><p>VIRDY의 보안 시스템은 Firebase 서비스를 기반으로 인증, 데이터 보호, 아바타 저작권 보호를 구현한다. 클라이언트-서버 간 HTTPS 통신, Firestore 보안 규칙, Firebase Functions를 통한 서버 측 검증, VRM 파일 암호화를 주요 보안 계층으로 사용한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 보안 아키텍처</h3><table>
<thead><tr><th>계층</th><th>서비스</th><th>역할</th></tr></thead>
<tbody>
<tr><td>인증</td><td>Firebase Auth</td><td>이메일/비밀번호 인증, 토큰 관리</td></tr>
<tr><td>데이터 보호</td><td>Firestore 보안 규칙</td><td>사용자/월드/아바타 데이터 접근 제어</td></tr>
<tr><td>서버 로직</td><td>Firebase Functions</td><td>서버 측 검증, 민감 작업 처리</td></tr>
<tr><td>파일 저장</td><td>Firebase Storage</td><td>보안 규칙 기반 파일 접근 제어</td></tr>
<tr><td>아바타 보호</td><td>VRM 암호화</td><td>아바타 파일 암호화 저장</td></tr>
</tbody></table>
<h3>2.2 인증 시스템</h3><h4>이메일 기반 인증</h4><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>회원가입</td><td>Firebase Functions (signUpV2)를 통해 계정 생성</td></tr>
<tr><td>이메일 인증</td><td>Firebase Auth 이메일 인증 발송 → 인증 완료 필수</td></tr>
<tr><td>로그인</td><td>이메일 + 비밀번호로 인증, 이메일 인증 완료 확인</td></tr>
<tr><td>사용자명 로그인</td><td>사용자명 → Firebase Function으로 이메일 조회 → 이메일 로그인</td></tr>
<tr><td>비밀번호 리셋</td><td>Firebase Auth 비밀번호 리셋 이메일 발송</td></tr>
</tbody></table>
<h4>인증 토큰</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>토큰 방식</td><td>Firebase Auth 토큰 (자동 갱신)</td></tr>
<tr><td>세션 유지</td><td>Firebase SDK가 토큰 수명주기 관리</td></tr>
<tr><td>로그아웃</td><td>Firebase Auth 로그아웃 → 토큰 무효화</td></tr>
</tbody></table>
<h3>2.3 Firestore 보안 규칙</h3><p>Firestore 보안 규칙을 통해 데이터 접근을 제어한다.</p><h4>사용자 데이터</h4><table>
<thead><tr><th>규칙</th><th>설명</th></tr></thead>
<tbody>
<tr><td>읽기</td><td>인증된 사용자만 자신의 데이터 읽기</td></tr>
<tr><td>쓰기</td><td>Firebase Functions를 통해서만 수정 (직접 쓰기 차단)</td></tr>
</tbody></table>
<h4>월드 데이터</h4><table>
<thead><tr><th>유형</th><th>읽기 규칙</th><th>쓰기 규칙</th></tr></thead>
<tbody>
<tr><td>Public 월드</td><td>모든 인증 사용자</td><td>제작자만 (Functions 경유)</td></tr>
<tr><td>Private 월드</td><td>제작자만</td><td>제작자만 (Functions 경유)</td></tr>
<tr><td>Private+ 월드</td><td>제작자 + sharedWith 목록</td><td>제작자만 (Functions 경유)</td></tr>
</tbody></table>
<h4>아바타 데이터</h4><table>
<thead><tr><th>규칙</th><th>설명</th></tr></thead>
<tbody>
<tr><td>읽기</td><td>소유자만</td></tr>
<tr><td>쓰기</td><td>소유자만</td></tr>
<tr><td>타인 접근</td><td>Firebase 보안 규칙으로 차단</td></tr>
</tbody></table>
<h3>2.4 Firebase Functions</h3><p>민감한 작업은 클라이언트에서 직접 수행하지 않고 Firebase Functions를 통해 서버 측에서 처리한다.</p><table>
<thead><tr><th>함수</th><th>용도</th></tr></thead>
<tbody>
<tr><td>signUpV2</td><td>회원가입 (계정 생성 + Firestore 저장)</td></tr>
<tr><td>getEmailByUsername</td><td>사용자명 → 이메일 조회</td></tr>
<tr><td>saveWorld</td><td>월드 메타데이터 저장</td></tr>
<tr><td>deleteWorld</td><td>월드 삭제 (Firestore + Storage)</td></tr>
<tr><td>getWorldData</td><td>월드 메타데이터 조회</td></tr>
</tbody></table>
<h3>2.5 아바타 파일 보호</h3><h4>VRM 암호화</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>대상</td><td>VRM 아바타 파일</td></tr>
<tr><td>업로드 시</td><td>암호화 후 Firebase Storage 저장</td></tr>
<tr><td>로컬 캐시</td><td>암호화 상태로 캐시 저장</td></tr>
<tr><td>로드 시</td><td>복호화 후 메모리에서 사용</td></tr>
<tr><td>목적</td><td>파일 직접 추출 방지, 저작권 보호</td></tr>
</tbody></table>
<h4>VRM 저작권 정보 존중</h4><table>
<thead><tr><th>메타데이터</th><th>설명</th></tr></thead>
<tbody>
<tr><td>AllowedUser</td><td>허용 사용자 범위</td></tr>
<tr><td>ViolentUsage</td><td>폭력적 사용 허용 여부</td></tr>
<tr><td>SexualUsage</td><td>성적 사용 허용 여부</td></tr>
<tr><td>CommercialUsage</td><td>상업적 사용 허용 여부</td></tr>
</tbody></table>
<h3>2.6 네트워크 보안</h3><h4>Photon 세션</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>세션 접근</td><td>세션 코드를 아는 사용자만 참가</td></tr>
<tr><td>로비 분리</td><td>버전별 로비 분리 (VIRDY.{버전})</td></tr>
<tr><td>데이터 전송</td><td>Photon 서버를 통한 암호화 전송</td></tr>
</tbody></table>
<h4>Chat 보안</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>인증</td><td>Firebase UserId로 Photon Chat 인증</td></tr>
<tr><td>개인 메시지</td><td>초대/따라가기/데려오기 등 명령은 Private Message로 전송</td></tr>
<tr><td>팀 채팅</td><td>역할 기반 필터링 (클라이언트 측)</td></tr>
</tbody></table>
<h3>2.7 Firebase Storage 보안</h3><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>아바타 파일</td><td>소유자만 읽기/쓰기</td></tr>
<tr><td>월드 파일</td><td>공개 설정에 따라 접근 제어</td></tr>
<tr><td>썸네일</td><td>월드 공개 설정에 따라 공개</td></tr>
<tr><td>전송</td><td>HTTPS 암호화</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 클라이언트 측 보안 한계</h3><p>현재 일부 검증이 클라이언트 측에서만 수행된다.</p><table>
<thead><tr><th>항목</th><th>현재</th><th>개선 방향</th></tr></thead>
<tbody>
<tr><td>액터 수 제한</td><td>클라이언트 상수</td><td>서버 측 검증 추가</td></tr>
<tr><td>역할 확인</td><td>Firestore 평문 저장</td><td>난독화 또는 서버 측 검증</td></tr>
<tr><td>라이선스</td><td>빌드 타임 심볼</td><td>라이선스 서버 도입</td></tr>
</tbody></table>
<h3>3.2 아바타 저작권 보호 강화</h3><p>VRM 파일은 암호화하지만, 메모리에서 복호화된 상태에서 추출 가능성이 있다. 추가 보호 조치:</p><ul><li>런타임 메모리 보호 (난독화)</li>
<li>워터마크 삽입</li>
<li>DRM 수준 보호 (장기)</li></p><h3>3.3 Firebase 의존도</h3><p>보안이 Firebase 서비스에 강하게 의존하고 있다. Firebase 장애 시 전체 인증/데이터 접근이 불가하므로, 장기적으로 자체 인증 서버 백업을 고려할 수 있다.</p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>이메일 인증 미완료 로그인</td><td>인증 메일 재발송 안내</td></tr>
<tr><td>비밀번호 분실</td><td>Firebase Auth 리셋 이메일 발송</td></tr>
<tr><td>Firebase Auth 토큰 만료</td><td>SDK 자동 갱신</td></tr>
<tr><td>타인의 아바타 다운로드 시도</td><td>Firebase Storage 보안 규칙으로 차단</td></tr>
<tr><td>삭제된 월드 공유 링크 접근</td><td>"월드를 찾을 수 없습니다" 오류</td></tr>
<tr><td>Private 월드 권한 없는 접근</td><td>Firestore 보안 규칙으로 차단</td></tr>
<tr><td>암호화된 아바타 파일 손상</td><td>재다운로드 안내</td></tr>
<tr><td>세션 코드 브루트포스</td><td>4자리 코드 + 버전 로비 분리로 완화</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>서버 측 라이선스 검증</strong></td><td>클라이언트 측 제한의 서버 검증</td><td>높음</td></tr>
<tr><td><strong>소셜 로그인</strong></td><td>Google, Steam 등 OAuth 연동</td><td>중간</td></tr>
<tr><td><strong>2단계 인증</strong></td><td>OTP 또는 인증 앱 연동</td><td>낮음</td></tr>
<tr><td><strong>DRM 강화</strong></td><td>아바타/월드 파일 DRM 보호</td><td>장기</td></tr>
<tr><td><strong>런처 인증</strong></td><td>자동 업데이트 + 토큰 인증 런처</td><td>중간</td></tr>
<tr><td><strong>감사 로그</strong></td><td>사용자 행동 로깅 및 모니터링</td><td>중간</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>라이선스 체계</li>
<li>사용자 역할</li>
<li>계정 시스템</li>
<li>데이터 생명주기</li>
<li>리스크 관리</li>
<li>아바타 시스템</li>
<li>네트워크 시스템</li>
</ul>
</section>
<section id="03_Operations_04_Data_Lifecycle" class="doc-section">
<div class="doc-header"><span class="doc-category">운영 기획</span></div>
<h1>데이터 생명주기</h1><hr></p><h2>1. 개요</h2><p>이 문서는 VIRDY 서비스 내 모든 데이터의 생성, 보관, 아카이브, 삭제에 대한 정책을 정의한다. 데이터 유형별로 보관 기간과 처리 방식을 명확히 하여 운영 비용을 최적화하고 사용자 자산을 보호한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 데이터 유형 분류</h3><table>
<thead><tr><th>유형</th><th>예시</th><th>복구 필요성</th><th>보관 기간</th></tr></thead>
<tbody>
<tr><td><strong>유저 자산 데이터</strong></td><td>아바타, 월드</td><td>필수</td><td>장기 (정책에 따라)</td></tr>
<tr><td><strong>계정 데이터</strong></td><td>프로필, 설정, 친구 목록</td><td>필수</td><td>계정 삭제 전까지</td></tr>
<tr><td><strong>로그성 데이터</strong></td><td>세션 로그, 접속 기록</td><td>불필요</td><td>30~90일</td></tr>
<tr><td><strong>실시간 세션 데이터</strong></td><td>방 상태, 채팅</td><td>불필요</td><td>세션 종료 즉시 파기</td></tr>
<tr><td><strong>법적/보안 로그</strong></td><td>결제 기록, 보안 이벤트</td><td>법적 요구</td><td>법적 요구 범위 내</td></tr>
</tbody></table>
<h3>2.2 유저 자산 데이터</h3><p>유저 자산은 바로 지우면 안 되는 데이터로, 신중한 생명주기 관리가 필요하다.</p><table>
<thead><tr><th>자산</th><th>저장 위치</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>아바타</strong></td><td>Firebase Storage</td><td>VRM 파일 (암호화 저장)</td></tr>
<tr><td><strong>월드</strong></td><td>Firebase Storage</td><td>AssetBundle 파일</td></tr>
<tr><td><strong>메타데이터</strong></td><td>Firestore</td><td>아바타/월드 설정, 공유 정보</td></tr>
</tbody></table>
<h3>2.3 로그성 데이터</h3><p>복구 불가능해도 되는 데이터:</p><table>
<thead><tr><th>데이터</th><th>보관 기간</th><th>비고</th></tr></thead>
<tbody>
<tr><td>세션 로그</td><td>30~90일</td><td>디버깅, 분석용</td></tr>
<tr><td>접속 기록</td><td>30~90일</td><td>익명화 가능</td></tr>
<tr><td>서버 성능 로그</td><td>30~90일</td><td>모니터링용</td></tr>
<tr><td>에러 로그</td><td>30~90일</td><td>버그 추적용</td></tr>
</tbody></table>
<hr></p><h2>3. 구독 상태별 데이터 처리</h2><h3>3.1 구독 활성 상태</h3><table>
<thead><tr><th>상태</th><th>데이터 처리</th></tr></thead>
<tbody>
<tr><td>구독 시작</td><td>플랜에 따른 스토리지 할당</td></tr>
<tr><td>구독 유지</td><td>정상 접근 및 사용 가능</td></tr>
</tbody></table>
<h3>3.2 구독 중단 시 처리 플로우</h3><pre><code class="">구독 중단
    ↓
[N일 유예 기간]
    - 데이터 접근 가능 (읽기 전용)
    - 아바타/월드 다운로드 가능
    ↓
[유예 기간 종료]
    - 아카이브로 데이터 이동
    - 서버 비용 감축 (Cold Storage)
    ↓
[장기 미복귀: 6~12개월]
    - 데이터 삭제
    - 단, 로그인 시 삭제 기간 리셋
    - 아카이브 이동 기간은 리셋하지 않음</code></pre><h3>3.3 구독 상태별 상세 정책</h3><table>
<thead><tr><th>단계</th><th>기간</th><th>데이터 상태</th><th>사용자 액션</th></tr></thead>
<tbody>
<tr><td><strong>유예 기간</strong></td><td>구독 종료 후 N일</td><td>읽기 전용</td><td>다운로드 가능</td></tr>
<tr><td><strong>아카이브</strong></td><td>유예 종료 후</td><td>Cold Storage 이동</td><td>재구독 시 복원</td></tr>
<tr><td><strong>삭제 대기</strong></td><td>아카이브 후 6~12개월</td><td>삭제 예정</td><td>로그인 시 기간 리셋</td></tr>
<tr><td><strong>완전 삭제</strong></td><td>삭제 대기 종료</td><td>영구 삭제</td><td>복구 불가</td></tr>
</tbody></table>
<h3>3.4 플랜 등급 하락 시</h3><table>
<thead><tr><th>상황</th><th>처리</th></tr></thead>
<tbody>
<tr><td>Enterprise → Studio</td><td>초과 슬롯 데이터 아카이브</td></tr>
<tr><td>Studio → Pro</td><td>초과 슬롯 데이터 아카이브</td></tr>
<tr><td>Pro → 무료</td><td>클라우드 데이터 아카이브, 로컬 다운로드 유도</td></tr>
</tbody></table>
<hr></p><h2>4. 서버/멀티 세션 생명주기</h2><p>> <strong>용어 정리:</strong> 내부적으로는 "세션(Session)"이라는 기술 용어를 사용하지만, 사용자에게는 "월드"와 "호스트"라는 용어로 노출된다. 이 문서에서는 기술 구현 관점에서 "세션"을 사용한다.</p><h3>4.1 세션 생성 및 호스트</h3><table>
<thead><tr><th>항목</th><th>정책</th></tr></thead>
<tbody>
<tr><td><strong>세션 생성 주체</strong></td><td>유료 플랜(Pro/Studio/Enterprise) 사용자만 생성 가능</td></tr>
<tr><td><strong>호스트 (세션 소유자)</strong></td><td>세션을 생성한 사용자. UI에서 👑 왕관 아이콘으로 표시</td></tr>
<tr><td><strong>동시 세션 제한</strong></td><td>Pro: 1개, Studio: 3개, Enterprise: 10개+</td></tr>
</tbody></table>
<h3>4.2 세션 유지 조건</h3><p>세션은 <strong>유료 플랜 사용자가 최소 1명 이상 접속</strong> 중일 때만 유지된다.</p><table>
<thead><tr><th>조건</th><th>세션 상태</th></tr></thead>
<tbody>
<tr><td>유료 플랜 사용자 1명 이상 접속</td><td>✅ 정상 유지</td></tr>
<tr><td>Free 사용자만 남음</td><td>⚠️ "0명" 취급 → 10분 유예 시작</td></tr>
<tr><td>접속 인원 0명</td><td>⚠️ 10분 유예 시작</td></tr>
</tbody></table>
<strong>핵심 원칙:</strong>
<ul><li>Free 사용자는 세션 유지 인원으로 <strong>카운트되지 않음</strong></li>
<li>Free 사용자만 남은 세션 = 실질적으로 "빈 세션"으로 취급</li>
<li>10분 유예 기간 내 유료 사용자 재접속 시 세션 유지</li></p><h3>4.3 호스트 퇴장 시 처리</h3><p>호스트가 퇴장(팅김/나감)할 때의 처리 규칙:</p><table>
<thead><tr><th>상황</th><th>처리</th></tr></thead>
<tbody>
<tr><td>호스트 퇴장 + 다른 유료 사용자 있음</td><td><strong>즉시 이전하지 않음</strong> → 10분 유예 시작</td></tr>
<tr><td>호스트 퇴장 + Free 사용자만 남음</td><td>10분 유예 후 세션 파기</td></tr>
<tr><td>호스트 퇴장 + 아무도 없음</td><td>10분 유예 후 세션 파기</td></tr>
</tbody></table>
<strong>호스트 퇴장 후 유예 기간 (10분):</strong>
<li>호스트가 재접속하면 그대로 호스트 유지</li>
<li>유예 기간 종료 시 남은 유료 사용자에게 호스트 자동 이전</li>
<li>Free 사용자만 남은 경우 세션 파기</li></p><h3>4.4 호스트 이전 정책</h3><h4>4.4.1 자동 이전 (유예 기간 종료 시)</h4><p>호스트가 10분 유예 기간 내 복귀하지 않으면, 남은 유료 사용자 중 한 명에게 자동 이전된다.</p><p><strong>이전 대상 선정 우선순위:</strong>
1. 동시 세션에 여유가 있는 사용자 (현재 호스트 중인 세션 수 < 플랜 제한)
2. 더 높은 플랜 (Enterprise > Studio > Pro)
3. 접속 시간이 가장 오래된 사용자</p><p><strong>이전 불가 시:</strong>
<li>모든 유료 사용자가 동시 세션 제한에 걸린 경우 → 세션 파기</li></p><h4>4.4.2 강제 이전 (호스트가 새 월드 생성 시)</h4><p>호스트가 유예 기간 중 새 월드를 열려고 할 때:</p><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>"월드 열기" 시도</td></tr>
<tr><td>2</td><td>동시 세션 제한 확인 → 기존 세션 존재</td></tr>
<tr><td>3</td><td>"기존 월드 닫기" 확인 팝업</td></tr>
<tr><td>4</td><td>확인 시: 남은 유료 사용자에게 호스트 이전 후 새 세션 생성</td></tr>
</tbody></table>
<strong>핵심:</strong> 호스트 입장에서는 "월드 닫기"지만, 실제로는 남은 유료 사용자에게 호스트가 이전되는 동작이다.</p><h3>4.5 호스트 표시 (UI)</h3><table>
<thead><tr><th>요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>왕관 아이콘 👑</strong></td><td>플레이어 목록에서 호스트 옆에 표시</td></tr>
<tr><td><strong>실시간 반영</strong></td><td>호스트 이전 시 왕관도 즉시 이동</td></tr>
<tr><td><strong>이전 알림</strong></td><td>"호스트가 변경되었습니다" 토스트 메시지</td></tr>
</tbody></table>
<h3>4.6 세션 파기 조건</h3><table>
<thead><tr><th>조건</th><th>유예 기간</th><th>결과</th></tr></thead>
<tbody>
<tr><td>유료 사용자 0명 (실질적 0명)</td><td>10분</td><td>세션 파기</td></tr>
<tr><td>물리적 접속 인원 0명</td><td>10분</td><td>세션 파기</td></tr>
<tr><td>호스트가 월드 닫기 (이전 대상 없음)</td><td>즉시</td><td>세션 파기</td></tr>
<tr><td>호스트가 월드 닫기 (이전 대상 있음)</td><td>즉시</td><td>호스트 이전 후 세션 유지</td></tr>
</tbody></table>
<strong>유예 기간 동작:</strong>
<li>10분 카운트다운 시작</li>
<li>유예 기간 내 유료 사용자 재접속 시 카운트다운 리셋</li>
<li>Free 사용자 접속은 카운트다운에 영향 없음</li>
<li>10분 경과 시 세션 자동 파기 또는 호스트 이전</li></p><h3>4.7 세션 관리 UI</h3><p>> <strong>참고:</strong> 세션 관리 UI 구성은 현재 검토 중이다. 상세 내용은 UI 기획 참조.</p><h3>4.8 세션 메타데이터</h3><p>세션 종료 후에도 보존되는 데이터:</p><table>
<thead><tr><th>데이터</th><th>저장 방식</th><th>설명</th></tr></thead>
<tbody>
<tr><td>룸 설정</td><td>계정 데이터</td><td>방 생성 시 재사용 가능</td></tr>
<tr><td>권한 설정</td><td>계정 데이터</td><td>매니저 권한 등</td></tr>
<tr><td>프리셋</td><td>계정 데이터</td><td>카메라, 조명 프리셋</td></tr>
</tbody></table>
<hr></p><h2>5. 데이터 삭제 후 서버 보관 기간</h2><table>
<thead><tr><th>데이터 유형</th><th>삭제 요청 후 보관</th><th>비고</th></tr></thead>
<tbody>
<tr><td>실시간 세션 데이터</td><td>종료 즉시 파기</td><td>-</td></tr>
<tr><td>로그성 데이터</td><td>최대 90일</td><td>디버깅/분석 후 파기</td></tr>
<tr><td>유저 자산 데이터</td><td>N일 보관 후 파기</td><td>복구 요청 대비</td></tr>
<tr><td>법적/보안 로그</td><td>법적 요구 범위 내</td><td>결제, 보안 이벤트</td></tr>
</tbody></table>
<hr></p><h2>6. 설계 시 고려사항</h2><h3>6.1 비용 최적화</h3><table>
<thead><tr><th>전략</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>Cold Storage 활용</strong></td><td>아카이브 데이터는 저비용 스토리지로 이동</td></tr>
<tr><td><strong>개수 기반 제한</strong></td><td>용량(GB)이 아닌 개수로 관리하여 예측 가능성 확보</td></tr>
<tr><td><strong>자동 정리</strong></td><td>비활성 계정 데이터 자동 아카이브/삭제</td></tr>
</tbody></table>
<h3>6.2 사용자 경험</h3><table>
<thead><tr><th>원칙</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>데이터 손실 방지</strong></td><td>구독 종료 시 즉시 삭제 금지</td></tr>
<tr><td><strong>충분한 유예 기간</strong></td><td>다운로드 및 백업 시간 제공</td></tr>
<tr><td><strong>명확한 안내</strong></td><td>삭제 예정 시 사전 알림</td></tr>
</tbody></table>
<h3>6.3 벤치마킹 대상</h3><table>
<thead><tr><th>서비스</th><th>참고 정책</th></tr></thead>
<tbody>
<tr><td>Google Drive</td><td>구독 종료 후 데이터 보관 정책</td></tr>
<tr><td>Dropbox</td><td>계정 비활성 시 처리 정책</td></tr>
<tr><td>Adobe Creative Cloud</td><td>플랜 다운그레이드 시 파일 처리</td></tr>
</tbody></table>
<hr></p><h2>7. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>구독 종료 직전 대용량 업로드</td><td>유예 기간 내 다운로드 안내</td></tr>
<tr><td>아카이브 중 재구독</td><td>데이터 즉시 복원</td></tr>
<tr><td>삭제 대기 중 로그인</td><td>삭제 기간 리셋 (아카이브 기간은 유지)</td></tr>
<tr><td>법적 요청으로 데이터 보존 필요</td><td>삭제 일시 중지, 법적 절차 따름</td></tr>
<tr><td>사용자 명시적 삭제 요청</td><td>즉시 접근 차단, 유예 후 완전 삭제</td></tr>
</tbody></table>
<hr></p><h2>8. 미결정 쟁점</h2><table>
<thead><tr><th>항목</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>유예 기간 구체적 일수</td><td>📋 논의 필요</td><td>7일? 14일? 30일?</td></tr>
<tr><td>아카이브 후 삭제까지 기간</td><td>📋 논의 필요</td><td>6개월? 12개월?</td></tr>
<tr><td>0명 세션 유지 시간</td><td>✅ 결정됨</td><td>10분 유예 후 파기</td></tr>
<tr><td>호스트 퇴장 후 유예 시간</td><td>✅ 결정됨</td><td>10분 유예 후 호스트 이전 또는 파기</td></tr>
<tr><td>Cold Storage 구현 방식</td><td>📋 논의 필요</td><td>Firebase 외 옵션 검토</td></tr>
</tbody></table>
<hr></p><h2>9. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>자동 아카이브 시스템</strong></td><td>비활성 데이터 자동 이동</td><td>높음</td></tr>
<tr><td><strong>데이터 내보내기</strong></td><td>사용자 요청 시 전체 데이터 다운로드</td><td>중간</td></tr>
<tr><td><strong>삭제 알림 시스템</strong></td><td>삭제 예정 사전 이메일 알림</td><td>중간</td></tr>
<tr><td><strong>데이터 복원 UI</strong></td><td>아카이브 데이터 셀프 복원</td><td>낮음</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>라이선스 체계</li>
<li>계정 시스템</li>
<li>보안 시스템</li>
<li>리스크 관리</li>
</ul>
</section>
<section id="03_Operations_05_Risk_Management" class="doc-section">
<div class="doc-header"><span class="doc-category">운영 기획</span></div>
<h1>리스크 관리</h1><hr></p><h2>1. 개요</h2><p>이 문서는 VIRDY 서비스 운영 시 막아야 할 위험(Risk)을 식별하고, 각 위험에 대한 대응 방안을 정의한다. 비용, 악용, 네트워크 품질, 신뢰 관련 리스크를 체계적으로 관리하여 서비스 안정성과 수익성을 확보한다.</p><hr></p><h2>2. 리스크 분류</h2><table>
<thead><tr><th>분류</th><th>리스크 번호</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>비용 관련</strong></td><td>R1, R5</td><td>서버/스토리지 비용 폭주</td></tr>
<tr><td><strong>악용 관련</strong></td><td>R2, R3, R9</td><td>무료/저책임 계정의 시스템 악용</td></tr>
<tr><td><strong>UX 관련</strong></td><td>R4</td><td>정상 사용자 피해</td></tr>
<tr><td><strong>네트워크 품질</strong></td><td>R6, R7, R8, R11</td><td>동기화 품질 저하</td></tr>
<tr><td><strong>운영 관련</strong></td><td>R10</td><td>책임 소재 불명확</td></tr>
</tbody></table>
<hr></p><h2>3. 리스크 상세</h2><h3>R1. 방 생성 남발로 인한 서버 및 네트워크 비용 폭주</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>방 생성/종료가 잦을 경우 Photon 및 서버 비용이 예측 불가능해짐</td></tr>
<tr><td><strong>시나리오</strong></td><td>"방 생성 후 이탈"을 반복하는 패턴 악용</td></tr>
<tr><td><strong>영향</strong></td><td>실제 사용 인원 대비 과도한 리소스 사용</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<ul><li>플랜별 동시 방 생성 수 제한 (무료: 0, Pro: 1, Studio: 3, Enterprise: 10+)</li>
<li>방 생성 후 최소 유지 시간 설정 검토</li></p><hr></p><h3>R2. 방 파주기(생성 후 이탈) 악용</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>방을 생성한 뒤 다른 사용자를 위해 남겨두고 이탈하는 행위 반복</td></tr>
<tr><td><strong>시나리오</strong></td><td>사실상 무제한 방 생성 효과 발생</td></tr>
<tr><td><strong>영향</strong></td><td>방 생성 제한이 무력화됨</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>✅ <strong>호스트 유예 정책</strong>: 호스트 퇴장 시 즉시 이전하지 않고 10분 유예</li>
<li>✅ <strong>재접속 우선</strong>: 유예 기간 내 호스트 복귀 시 그대로 호스트 유지</li>
<li>✅ <strong>호스트 이전 조건</strong>: 유예 종료 시 + 다른 유료 사용자가 있을 때만 호스트 자동 이전</li>
<li>✅ <strong>Free 사용자 "0명" 취급</strong>: Free 사용자만 남으면 10분 유예 후 월드 자동 종료</li>
<li>✅ <strong>새 월드 열기 시 이전</strong>: 호스트가 새 월드를 열면 기존 월드의 호스트가 남은 유저에게 이전</li>
<li>결론: 호스트 유예 정책 + 동시 월드 제한으로 악용 방지 및 재접속 편의성 확보</li></p><hr></p><h3>R3. 무료/저책임 계정의 운영 기능 악용</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>비용·운영 책임을 지지 않는 계정이 운영 기능을 사용</td></tr>
<tr><td><strong>시나리오</strong></td><td>무료 계정이 방 생성 또는 운영 기능 악용</td></tr>
<tr><td><strong>영향</strong></td><td>시스템 악용, 품질 저하, 유료/무료 플랜 간 책임 구조 붕괴</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>Free 유저는 방생성이 불가능하기에 해당 이슈에서 제외</li>
<li>Session에 함께 있는 유저들은 상호간 신뢰를 바탕으로 함께 접속된 유저들, 그들간의 악용에 대한 이슈는 크게 없을 것으로 판단됨.</li>
<li>하지만 Session의 코드를 뚫고 들어오는 유저가 있을 수 있음. 코드 수 4자리 -> 더 늘리는 것 고려</li></p><hr></p><h3>R4. 동시 방 제한으로 인한 정상 사용자 피해</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>이미 이탈한 방에 다른 사용자가 남아있어 새 방 생성이 제한됨</td></tr>
<tr><td><strong>시나리오</strong></td><td>개인 사용과 운영 목적 사용 구분 없이 제한 적용</td></tr>
<tr><td><strong>영향</strong></td><td>정상 사용자 불만 증가</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>✅ <strong>호스트 유예 정책</strong>: 퇴장 시 즉시 이전되지 않으므로, 재접속 시 월드 코드 없이 복귀 가능</li>
<li>✅ <strong>새 월드 열기 시 자동 이전</strong>: 기존 월드 닫기 → 남은 유저에게 호스트 이전 (모두 퇴장 X)</li>
<li>✅ <strong>0명 월드 자동 종료</strong>: 유료 사용자 0명 시 10분 유예 후 자동 종료</li>
<li>✅ <strong>플레이어 목록에 호스트 표시</strong>: 👑 왕관으로 현재 호스트 명확히 표시</li>
<li>📋 <strong>활성 월드 리스트 (검토 중)</strong>: 내 월드/친구 월드 관리 UI (UX 협의 필요)</li>
<li>결론: 호스트 유예 + 자동 이전 정책으로 재접속 편의성 확보, 불만 최소화</li></p><hr></p><h3>R5. 구독 종료 후 데이터(월드/아바타) 비용 누적</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>구독 종료된 계정의 데이터가 장기 보관되어 비용 유발</td></tr>
<tr><td><strong>시나리오</strong></td><td>비활성 계정이 지속적인 스토리지 비용 발생</td></tr>
<tr><td><strong>영향</strong></td><td>정리 기준 없을 경우 비용 누적</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>데이터 생명주기 관리 정책 수립 (→ 데이터 생명주기 참조)</li>
<li>아카이브/Frozen 개념 도입</li>
<li>6~12개월 장기 미복귀 시 삭제</li></p><hr></p><h3>R6. 네트워크 품질 미달로 인한 세션 성립 실패</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>특정 리전 또는 사용자 환경에서 RTT, 패킷 손실, 지터가 기준 이하</td></tr>
<tr><td><strong>시나리오</strong></td><td>멀티 세션이 불안정하거나 빈번히 끊김</td></tr>
<tr><td><strong>영향</strong></td><td>Live Sync조차 유지되지 않는 환경은 서비스 실패로 이어짐</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>네트워크 품질 측정 및 사전 경고 시스템</li>
<li>최소 품질 요구사항 명시 및 안내</li>
<li>리전 선택 옵션 제공 검토</li></p><hr></p><h3>R7. Ultra Sync 유지 실패로 인한 Enterprise 신뢰 하락</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>Enterprise 플랜에서 Ultra Sync 선택 후 네트워크 조건 문제로 유지 불가</td></tr>
<tr><td><strong>시나리오</strong></td><td>고가 플랜 구매 후 약속된 품질 제공 실패</td></tr>
<tr><td><strong>영향</strong></td><td>"비싸게 팔고 안 된다"는 인식 형성</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>Ultra → Live 자동 전환 및 안내 시스템</li>
<li>사전 네트워크 테스트 도구 제공</li>
<li>적절한 보상 구조 검토 (크레딧, 환불 정책)</li></p><hr></p><h3>R8. 세션 Sync Mode 혼선으로 인한 품질 불일치</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>Ultra / Live Sync가 명확한 세션 상태로 관리되지 않음</td></tr>
<tr><td><strong>시나리오</strong></td><td>참여자마다 서로 다른 동기화 방식이 섞임</td></tr>
<tr><td><strong>영향</strong></td><td>디버깅 불가, 품질 불균형, 사용자 불만</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>세션 생성 시 Sync Mode 명시적 설정</li>
<li>세션 참가 시 모드 확인 및 동의</li>
<li>모드 불일치 시 참가 거부 또는 경고</li></p><hr></p><h3>R9. 클라이언트 분기 기반 Sync Mode 악용 가능성</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>Photon Shared 구조상 서버가 클라이언트 송신 데이터를 완전히 검증할 수 없음</td></tr>
<tr><td><strong>시나리오</strong></td><td>악의적 클라이언트가 Live 세션에서 Ultra 수준 패킷 송신, 비정상 고빈도 데이터 전송</td></tr>
<tr><td><strong>영향</strong></td><td>리소스 낭비 및 품질 교란</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>클라이언트 측 데이터 전송 빈도 제한</li>
<li>비정상 패턴 감지 및 경고</li>
<li>심각한 악용 시 세션에서 퇴장 처리</li></p><hr></p><h3>R10. Sync Mode 결정 주체 불명확으로 인한 책임 붕괴</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>Ultra / Live Sync 전환 권한이 명확히 정의되지 않음</td></tr>
<tr><td><strong>시나리오</strong></td><td>임의 전환, 사용자 간 분쟁, CS 대응 혼선</td></tr>
<tr><td><strong>영향</strong></td><td>"누가 결정했는가"가 불명확해 운영 책임 붕괴</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>Sync Mode 결정 권한 명확화 (방장/세션 소유자)</li>
<li>변경 이력 로깅</li>
<li>변경 시 참여자 알림</li></p><hr></p><h3>R11. 멀티 동기화 품질 저하로 인한 서비스 평판 악화</h3><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>위험</strong></td><td>글로벌 환경에서 멀티 품질 이슈가 반복됨</td></tr>
<tr><td><strong>시나리오</strong></td><td>"VIRDY는 멀티가 불안정하다"는 인식 고착</td></tr>
<tr><td><strong>영향</strong></td><td>실제 원인이 네트워크/환경이더라도 브랜드 신뢰에 직접적 타격</td></tr>
</tbody></table>
<strong>대응 방안:</strong>
<li>품질 모니터링 대시보드 구축</li>
<li>문제 발생 시 원인 명확화 (VIRDY vs 네트워크 환경)</li>
<li>사용자 교육 및 가이드 제공</li>
<li>최소 요구사항 명시</li></p><hr></p><h2>4. 리스크 우선순위</h2><table>
<thead><tr><th>우선순위</th><th>리스크</th><th>이유</th></tr></thead>
<tbody>
<tr><td><strong>높음</strong></td><td>R1, R5</td><td>직접적인 비용 영향</td></tr>
<tr><td><strong>높음</strong></td><td>R7, R11</td><td>브랜드 신뢰 및 Enterprise 고객 이탈</td></tr>
<tr><td><strong>중간</strong></td><td>R2, R3, R4</td><td>악용 방지 및 UX</td></tr>
<tr><td><strong>중간</strong></td><td>R6, R8</td><td>서비스 품질</td></tr>
<tr><td><strong>낮음</strong></td><td>R9, R10</td><td>운영 복잡도</td></tr>
</tbody></table>
<hr></p><h2>5. 설계 시 고려사항</h2><h3>5.1 비용 관점</h3><p><li>비용 산정은 항상 <strong>Worst Case</strong> 기준</li>
<li>주요 비용 요소: Photon 서버, 다운로드 트래픽, 스토리지</li>
<li>다운로드 트래픽이 가장 큰 비용 요소</li></p><h3>5.2 악용 방지 관점</h3><p><li>기능 제한은 클라이언트 + 서버 양쪽에서 검증</li>
<li>로깅 및 모니터링으로 비정상 패턴 감지</li>
<li>점진적 제재 (경고 → 기능 제한 → 계정 정지)</li></p><h3>5.3 사용자 경험 관점</h3><p><li>정상 사용자가 피해받지 않도록 제한 설계</li>
<li>명확한 안내 및 업그레이드 유도</li>
<li>제한에 걸렸을 때 해결 방법 제공</li></p><hr></p><h2>6. 미결정 쟁점</h2><table>
<thead><tr><th>항목</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>방 생성 후 최소 유지 시간</td><td>📋 논의 필요</td><td>-</td></tr>
<tr><td>0명 월드 자동 종료 시간</td><td>✅ 결정됨</td><td>10분 유예 후 종료</td></tr>
<tr><td>호스트 퇴장 후 유예 시간</td><td>✅ 결정됨</td><td>10분 유예 후 이전 또는 종료</td></tr>
<tr><td>Ultra Sync 실패 시 보상 정책</td><td>📋 논의 필요</td><td>-</td></tr>
<tr><td>비정상 클라이언트 감지 기준</td><td>📋 논의 필요</td><td>-</td></tr>
<tr><td>활성 월드 리스트 UI</td><td>📋 UX 협의 필요</td><td>유수진님과 논의 필요</td></tr>
</tbody></table>
<hr></p><h2>7. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>실시간 모니터링 대시보드</strong></td><td>비용/품질 실시간 추적</td><td>높음</td></tr>
<tr><td><strong>자동 제재 시스템</strong></td><td>비정상 패턴 자동 감지 및 조치</td><td>중간</td></tr>
<tr><td><strong>네트워크 품질 테스트 도구</strong></td><td>사전 환경 검증</td><td>중간</td></tr>
<tr><td><strong>리스크 리포트 자동화</strong></td><td>주간/월간 리스크 현황 리포트</td><td>낮음</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>라이선스 체계</li>
<li>데이터 생명주기</li>
<li>계정 시스템</li>
<li>네트워크 시스템</li>
</ul>
</section>
<section id="03_Operations_06_Account_System" class="doc-section">
<div class="doc-header"><span class="doc-category">운영 기획</span></div>
<h1>계정 시스템</h1><hr></p><h2>1. 개요</h2><p>이 문서는 VIRDY의 계정 생성, 인증, 연동, 삭제에 대한 정책을 정의한다. Steam을 포함한 외부 인증 수단과 VIRDY 내부 계정의 관계, 계정 생명주기, 데이터 귀속 정책을 명확히 한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 계정 구조</h3><p>VIRDY는 <strong>내부 계정</strong>과 <strong>외부 인증 수단</strong>을 분리하여 관리한다.</p><table>
<thead><tr><th>구분</th><th>역할</th><th>예시</th></tr></thead>
<tbody>
<tr><td><strong>VIRDY 계정</strong></td><td>서비스 데이터의 소유 주체</td><td>아바타, 월드, 설정, 친구 목록</td></tr>
<tr><td><strong>외부 인증 수단</strong></td><td>로그인 방법</td><td>Steam, 이메일/비밀번호, (향후) Google</td></tr>
</tbody></table>
<strong>핵심 원칙:</strong>
<ul><li>외부 계정은 <strong>인증 수단일 뿐</strong>, 서비스 데이터의 소유는 VIRDY 계정에 귀속</li>
<li>Steam 연동 해제, 로그인 불가 상황에서도 VIRDY 계정으로 데이터 복구 가능</li></p><h3>2.2 Steam 연동</h3><h4>최초 접속 시 자동 계정 생성</h4><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>Steam으로 VIRDY 최초 실행</td></tr>
<tr><td>2</td><td>Steam ID 확인</td></tr>
<tr><td>3</td><td>VIRDY 계정 자동 생성</td></tr>
<tr><td>4</td><td>저장 데이터: Steam ID, 생성 시각, 접속 지역(국가)</td></tr>
</tbody></table>
<h4>저장해야 하는 데이터</h4><p>계정 복구 및 분쟁 해결을 위해 다음 데이터를 저장한다:</p><table>
<thead><tr><th>데이터</th><th>용도</th></tr></thead>
<tbody>
<tr><td>최초 생성 시 Steam ID</td><td>계정 소유권 확인</td></tr>
<tr><td>최초 생성 시각</td><td>계정 생성 시점 증명</td></tr>
<tr><td>최초 접속 지역(국가)</td><td>분쟁 시 참고 자료</td></tr>
</tbody></table>
<h4>Steam 연동 해제 시</h4><table>
<thead><tr><th>상황</th><th>처리</th></tr></thead>
<tbody>
<tr><td>연동 해제 요청</td><td>VIRDY 계정은 유지, Steam 연동만 해제</td></tr>
<tr><td>연동 끊긴 계정</td><td>삭제 대상 아님, 복구 가능 상태 유지</td></tr>
<tr><td>재연동</td><td>동일 Steam ID로 재연동 가능</td></tr>
</tbody></table>
<h3>2.3 이메일 연동</h3><h4>유료 결제 시 이메일 필수</h4><table>
<thead><tr><th>상황</th><th>이메일 연동</th></tr></thead>
<tbody>
<tr><td>무료 사용 (Steam만)</td><td>선택</td></tr>
<tr><td>유료 결제/구독</td><td><strong>필수</strong></td></tr>
</tbody></table>
<strong>이유:</strong>
<li>결제 영수증 발송</li>
<li>구독 상태 알림</li>
<li>계정 복구 수단 확보</li>
<li>법적 커뮤니케이션 채널</li></p><h3>2.4 인증 방식 우선순위</h3><table>
<thead><tr><th>우선순위</th><th>인증 방식</th><th>상태</th></tr></thead>
<tbody>
<tr><td>1</td><td>Steam 로그인</td><td>✅ 지원 예정</td></tr>
<tr><td>2</td><td>이메일/비밀번호</td><td>✅ 현재 지원</td></tr>
<tr><td>3</td><td>Google OAuth</td><td>📋 계획</td></tr>
</tbody></table>
<hr></p><h2>3. 계정 생명주기</h2><h3>3.1 생성 시점</h3><table>
<thead><tr><th>방법</th><th>동작</th></tr></thead>
<tbody>
<tr><td>Steam 첫 로그인</td><td>VIRDY 계정 자동 생성</td></tr>
<tr><td>이메일 회원가입</td><td>이메일 인증 후 계정 생성</td></tr>
</tbody></table>
<h3>3.2 활성 상태</h3><p>정상적으로 로그인하여 서비스를 사용하는 상태.</p><h3>3.3 비활성 시점</h3><table>
<thead><tr><th>조건</th><th>상태</th></tr></thead>
<tbody>
<tr><td>로그인 수단 전부 끊김</td><td>비활성 (복구 대기)</td></tr>
<tr><td>장기 미접속</td><td>비활성 (데이터 생명주기 정책 적용)</td></tr>
</tbody></table>
<h3>3.4 완전 삭제 시점</h3><table>
<thead><tr><th>조건</th><th>처리</th></tr></thead>
<tbody>
<tr><td>유저 명시적 삭제 요청</td><td>즉시 접근 차단, 유예 기간 후 삭제</td></tr>
<tr><td>장기 미접속 + 구독 종료</td><td>데이터 생명주기 정책에 따라 삭제</td></tr>
</tbody></table>
<strong>삭제 정책:</strong>
<li>즉시 삭제 ❌ → 일정 기간 유예 후 삭제</li>
<li>유예 기간 내 로그인 시 삭제 취소 가능</li>
<li>법적/보안 로그는 별도 보관</li></p><hr></p><h2>4. 외부 연동 생명주기</h2><h3>4.1 핵심 원칙</h3><p><li>외부 계정(Steam 등)은 <strong>인증 수단일 뿐</strong></li>
<li>서비스 데이터의 소유는 <strong>VIRDY 계정</strong>에 귀속</li>
<li>연동 해제/재연동에도 데이터는 VIRDY 계정에 유지</li></p><h3>4.2 연동 상태 변화</h3><table>
<thead><tr><th>상태</th><th>설명</th><th>데이터 영향</th></tr></thead>
<tbody>
<tr><td>연동</td><td>외부 계정으로 로그인 가능</td><td>없음</td></tr>
<tr><td>연동 해제</td><td>해당 방법으로 로그인 불가</td><td>없음 (데이터 유지)</td></tr>
<tr><td>재연동</td><td>동일 계정으로 다시 연동</td><td>없음 (데이터 복구)</td></tr>
</tbody></table>
<h3>4.3 복구 시나리오</h3><table>
<thead><tr><th>시나리오</th><th>복구 방법</th></tr></thead>
<tbody>
<tr><td>Steam 계정 분실</td><td>이메일/비밀번호로 로그인 → Steam 재연동</td></tr>
<tr><td>이메일 분실</td><td>Steam으로 로그인 → 이메일 변경</td></tr>
<tr><td>모든 연동 끊김</td><td>CS 문의 → 본인 확인 후 복구</td></tr>
</tbody></table>
<hr></p><h2>5. 구독과 계정의 관계</h2><h3>5.1 구독 시작</h3><table>
<thead><tr><th>단계</th><th>동작</th></tr></thead>
<tbody>
<tr><td>1</td><td>이메일 연동 확인 (필수)</td></tr>
<tr><td>2</td><td>결제 수단 등록</td></tr>
<tr><td>3</td><td>구독 시작</td></tr>
<tr><td>4</td><td>플랜에 따른 스토리지 할당</td></tr>
</tbody></table>
<h3>5.2 구독 중단</h3><table>
<thead><tr><th>단계</th><th>기간</th><th>동작</th></tr></thead>
<tbody>
<tr><td>유예 기간</td><td>N일</td><td>데이터 다운로드 가능 (아바타, 월드)</td></tr>
<tr><td>아카이브</td><td>유예 후</td><td>데이터 Cold Storage 이동</td></tr>
<tr><td>삭제 대기</td><td>6~12개월</td><td>로그인 시 기간 리셋</td></tr>
<tr><td>완전 삭제</td><td>삭제 대기 종료</td><td>복구 불가</td></tr>
</tbody></table>
> 상세 정책은 데이터 생명주기 참조</p><hr></p><h2>6. 설계 시 고려사항</h2><h3>6.1 계정 복구 용이성</h3><table>
<thead><tr><th>원칙</th><th>설명</th></tr></thead>
<tbody>
<tr><td>다중 인증 수단 권장</td><td>Steam + 이메일 연동 권장</td></tr>
<tr><td>복구 정보 저장</td><td>최초 생성 정보로 소유권 확인</td></tr>
<tr><td>CS 복구 프로세스</td><td>본인 확인 절차 정의 필요</td></tr>
</tbody></table>
<h3>6.2 보안 고려사항</h3><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>Steam ID 검증</td><td>Steam Web API로 정품 확인</td></tr>
<tr><td>이메일 인증</td><td>Firebase Auth 이메일 인증 필수</td></tr>
<tr><td>세션 관리</td><td>Firebase Auth 토큰 기반</td></tr>
</tbody></table>
<h3>6.3 법적 요구사항</h3><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>개인정보 보호</td><td>최소한의 개인정보만 수집</td></tr>
<tr><td>계정 삭제권</td><td>사용자 요청 시 삭제 가능</td></tr>
<tr><td>데이터 이동권</td><td>사용자 데이터 내보내기 기능 검토</td></tr>
</tbody></table>
<hr></p><h2>7. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>Steam 계정 해킹/도용</td><td>CS 문의 → 본인 확인 → Steam 연동 해제</td></tr>
<tr><td>이메일 접근 불가</td><td>Steam으로 로그인 → 이메일 변경</td></tr>
<tr><td>계정 삭제 후 복구 요청</td><td>유예 기간 내: 복구 가능 / 이후: 불가</td></tr>
<tr><td>Steam VAC Ban</td><td>VIRDY 계정에 영향 없음 (별도 정책 검토)</td></tr>
<tr><td>미성년자 계정</td><td>법적 요구사항에 따라 처리 (추가 검토 필요)</td></tr>
<tr><td>계정 양도 요청</td><td>원칙적으로 불가 (정책 정의 필요)</td></tr>
</tbody></table>
<hr></p><h2>8. 미결정 쟁점</h2><table>
<thead><tr><th>항목</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>Steam 로그인 시 받아올 수 있는 데이터 범위</td><td>📋 확인 필요</td><td>Steam Web API 검토</td></tr>
<tr><td>계정 양도 정책</td><td>📋 논의 필요</td><td>-</td></tr>
<tr><td>미성년자 계정 정책</td><td>📋 논의 필요</td><td>법적 검토 필요</td></tr>
<tr><td>CS 본인 확인 절차</td><td>📋 정의 필요</td><td>-</td></tr>
</tbody></table>
<hr></p><h2>9. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>Steam 로그인 구현</strong></td><td>Steam Web API 연동</td><td>높음</td></tr>
<tr><td><strong>Google OAuth</strong></td><td>Google 계정 로그인</td><td>중간</td></tr>
<tr><td><strong>2단계 인증</strong></td><td>OTP 또는 인증 앱</td><td>낮음</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>보안 시스템</li>
<li>라이선스 체계</li>
<li>데이터 생명주기</li>
<li>사용자 역할</li>
</ul>
</section>
<section id="04_Design_01_UI_Specification" class="doc-section">
<div class="doc-header"><span class="doc-category">UI/UX</span></div>
<h1>UI 기획</h1><hr></p><h2>1. 개요</h2><p>VIRDY의 UI는 씬 기반 계층 구조로 구성되며, 전역 UI(GlobalUI)와 씬별 UI(Sign/Lobby/World)로 나뉜다. Creator와 Manager 역할에 따라 표시되는 패널이 다르며, 다국어(한국어/영어)를 지원한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 UI 아키텍처</h3><table>
<thead><tr><th>계층</th><th>범위</th><th>역할</th></tr></thead>
<tbody>
<tr><td><strong>GlobalUI</strong></td><td>전역 (모든 씬)</td><td>알림, 에러 다이얼로그, 로딩, 토스트 메시지, 캘리브레이션</td></tr>
<tr><td><strong>SignScene UI</strong></td><td>인증 씬</td><td>로그인, 회원가입, 비밀번호 리셋</td></tr>
<tr><td><strong>LobbyScene UI</strong></td><td>로비 씬</td><td>액터, 아바타, 트래커, 월드 설정</td></tr>
<tr><td><strong>WorldScene UI</strong></td><td>월드 씬</td><td>카메라, 채팅, 조명, 플레이어 목록</td></tr>
</tbody></table>
모든 UI 패널은 UIController 기본 클래스를 상속하며, OnInitialize(첫 활성화), OnActivate(표시), OnDeactivate(숨김) 생명주기를 따른다.</p><h3>2.2 Sign Scene UI</h3><h4>화면 목록</h4><table>
<thead><tr><th>화면</th><th>설명</th><th>주요 요소</th></tr></thead>
<tbody>
<tr><td>언어 선택</td><td>최초 실행 시</td><td>한국어/영어 선택</td></tr>
<tr><td>로그인</td><td>사용자 인증</td><td>사용자명, 비밀번호, 로그인 버튼</td></tr>
<tr><td>회원가입 1단계</td><td>이메일 인증</td><td>이메일 입력, 인증코드 확인</td></tr>
<tr><td>회원가입 2단계</td><td>닉네임 설정</td><td>닉네임 입력</td></tr>
<tr><td>회원가입 3단계</td><td>비밀번호 설정</td><td>비밀번호, 비밀번호 확인</td></tr>
<tr><td>회원가입 4단계</td><td>역할 선택</td><td>Creator/Manager 토글</td></tr>
<tr><td>회원가입 5단계</td><td>약관 동의</td><td>체크박스, 동의 버튼</td></tr>
<tr><td>비밀번호 리셋</td><td>비밀번호 복구</td><td>이메일 또는 사용자명 입력</td></tr>
</tbody></table>
<h3>2.3 Lobby Scene UI</h3><p>로비 UI는 사이드바를 통해 패널 간 이동한다.</p><h4>패널 목록</h4><table>
<thead><tr><th>패널</th><th>설명</th><th>Creator</th><th>Manager</th></tr></thead>
<tbody>
<tr><td>사이드바</td><td>패널 간 네비게이션</td><td>✅</td><td>✅ (제한)</td></tr>
<tr><td>액터 패널</td><td>액터 슬롯 관리 (최대 6개)</td><td>✅</td><td>❌</td></tr>
<tr><td>아바타 패널</td><td>VRM 아바타 업로드/선택</td><td>✅</td><td>❌</td></tr>
<tr><td>트래커 패널</td><td>Facial/Body/Hand 장비 설정</td><td>✅</td><td>❌</td></tr>
<tr><td>월드 패널</td><td>월드 검색, 업로드, 공유 설정</td><td>✅</td><td>✅</td></tr>
<tr><td>설정 패널</td><td>그래픽, 사운드, 키바인딩, 언어</td><td>✅</td><td>✅</td></tr>
<tr><td>친구 패널</td><td>친구 검색, 추가, 온라인 상태</td><td>✅</td><td>✅</td></tr>
</tbody></table>
<h4>액터 패널 구성</h4><table>
<thead><tr><th>요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td>액터 카드</td><td>아바타 썸네일, 이름, 연결된 트래커 표시</td></tr>
<tr><td>슬롯 탭</td><td>최대 6개 액터 슬롯 전환</td></tr>
<tr><td>추가/삭제</td><td>슬롯 추가 (MaxActorSize 미만일 때), 삭제</td></tr>
<tr><td>편집/복제</td><td>기존 액터 설정 수정 또는 복제</td></tr>
</tbody></table>
<h4>아바타 패널 구성</h4><table>
<thead><tr><th>요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td>아바타 리스트</td><td>업로드한 VRM 아바타 썸네일 목록</td></tr>
<tr><td>업로드 버튼</td><td>로컬 VRM 파일 선택 → 업로드</td></tr>
<tr><td>아바타 상세</td><td>선택한 아바타 이름, 파일 크기</td></tr>
<tr><td>선택/삭제</td><td>액터에 아바타 할당 또는 삭제</td></tr>
</tbody></table>
<h4>트래커 패널 구성</h4><table>
<thead><tr><th>섹션</th><th>요소</th></tr></thead>
<tbody>
<tr><td>페이셜 트래커</td><td>장비 드롭다운, 연결 상태, IP/포트 설정</td></tr>
<tr><td>바디 트래커</td><td>장비 드롭다운, 연결 상태, 트래커 매핑</td></tr>
<tr><td>핸드 트래커</td><td>장비 드롭다운, 연결 상태</td></tr>
<tr><td>민감도 설정</td><td>시선/눈썹/입 강도 슬라이더</td></tr>
<tr><td>캘리브레이션</td><td>T-Pose / I-Pose 캘리브레이션 버튼</td></tr>
</tbody></table>
<h4>월드 패널 구성</h4><table>
<thead><tr><th>요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td>월드 리스트</td><td>공개/내/공유 월드 탭, 썸네일 카드</td></tr>
<tr><td>검색</td><td>Algolia 기반 월드 검색</td></tr>
<tr><td>정렬</td><td>최신순/인기순/오래된순</td></tr>
<tr><td>월드 카드</td><td>썸네일, 제목, 제작자, 방문수, 공개설정</td></tr>
<tr><td>월드 상세</td><td>설명, 공유설정, 편집, 삭제</td></tr>
<tr><td>월드 업로드</td><td>AssetBundle 파일 선택 + 메타데이터 입력</td></tr>
<tr><td>월드 진입</td><td>"세션 생성" 또는 "세션 참가" (코드 입력)</td></tr>
</tbody></table>
<h4>설정 패널 구성</h4><table>
<thead><tr><th>섹션</th><th>항목</th></tr></thead>
<tbody>
<tr><td>그래픽</td><td>해상도, 품질, 프레임 제한, 안티앨리어싱</td></tr>
<tr><td>사운드</td><td>마스터/음악/효과음/월드 볼륨</td></tr>
<tr><td>키바인딩</td><td>커스텀 키 설정</td></tr>
<tr><td>언어</td><td>한국어/영어 전환</td></tr>
</tbody></table>
<h3>2.4 World Scene UI</h3><p>월드 진입 후 표시되는 UI 패널:</p><table>
<thead><tr><th>패널</th><th>설명</th></tr></thead>
<tbody>
<tr><td>카메라 패널</td><td>10개 카메라 슬롯, 프리셋 저장, Channel Link</td></tr>
<tr><td>채팅 패널</td><td>메시지 표시, 입력 필드, 전체/팀 전환</td></tr>
<tr><td>플레이어 목록</td><td>접속자 이름, 역할 색상, 호스트 👑, ME 라벨</td></tr>
<tr><td>조명 제어</td><td>방향광 강도/회전, 포스트 프로세싱</td></tr>
<tr><td>설정 오버레이</td><td>카메라 속도, 줌 속도, 회전 민감도</td></tr>
</tbody></table>
<h4>카메라 패널</h4><table>
<thead><tr><th>요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td>FreeCam 프리뷰</td><td>자유 카메라 미리보기</td></tr>
<tr><td>카메라 슬롯 [1]~[9]</td><td>고정 카메라 선택/전환</td></tr>
<tr><td>FOV 슬라이더</td><td>초점 거리 조절</td></tr>
<tr><td>DoF 설정</td><td>포커스 거리, 자동 포커스 대상</td></tr>
<tr><td>Follow/LookAt</td><td>대상 Actor 선택</td></tr>
<tr><td>Channel Link</td><td>접속자 목록, 송출/수신 제어</td></tr>
<tr><td>프리셋 저장</td><td>현재 카메라 Transform 프리셋 저장</td></tr>
</tbody></table>
<h4>채팅 패널</h4><table>
<thead><tr><th>요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td>채팅 모드 탭</td><td>[All] / [Creator] / [Manager] 전환</td></tr>
<tr><td>메시지 표시</td><td>역할별 색상 코딩, 팀 접두사</td></tr>
<tr><td>입력 필드</td><td>텍스트 입력, 전송 버튼</td></tr>
</tbody></table>
<h4>플레이어 목록</h4><table>
<thead><tr><th>요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td>이름</td><td>최대 16자 표시 (초과 시 ... 처리)</td></tr>
<tr><td>역할 색상</td><td>Creator/Manager 별도 색상</td></tr>
<tr><td><strong>호스트 표시</strong></td><td>👑 왕관 아이콘 (호스트 옆에 표시)</td></tr>
<tr><td>ME 라벨</td><td>본인 식별</td></tr>
<tr><td>초대/따라가기</td><td>소셜 기능 버튼</td></tr>
</tbody></table>
<strong>호스트 표시 동작:</strong>
<ul><li>월드를 연 사용자에게 👑 왕관 아이콘 표시</li>
<li>호스트 이전 시 왕관도 실시간으로 이동</li>
<li>호스트 변경 시 "호스트가 변경되었습니다" 토스트 메시지</li></p><h3>2.5 GlobalUI</h3><p>모든 씬에서 공통으로 표시되는 전역 UI:</p><table>
<thead><tr><th>요소</th><th>설명</th></tr></thead>
<tbody>
<tr><td>알림 팝업</td><td>초대, 따라가기 요청 등</td></tr>
<tr><td>에러 다이얼로그</td><td>연결 실패, 오류 메시지</td></tr>
<tr><td>로딩 인디케이터</td><td>비동기 작업 진행 표시</td></tr>
<tr><td>토스트 메시지</td><td>짧은 알림 (복사 완료, 저장 완료 등)</td></tr>
<tr><td>캘리브레이션 UI</td><td>T-Pose/I-Pose 안내, 카운트다운</td></tr>
</tbody></table>
<h3>2.6 View 모드별 레이아웃</h3><p>월드 진입 후 4가지 View 모드에 따라 화면 레이아웃이 달라진다.</p><table>
<thead><tr><th>모드</th><th>레이아웃</th></tr></thead>
<tbody>
<tr><td>Default</td><td>Main Screen만 전체 화면</td></tr>
<tr><td>Manager</td><td>Main Screen + Spectator (9분할) + Manager CAM</td></tr>
<tr><td>Studio</td><td>9분할 모니터링 전체 화면</td></tr>
<tr><td>Spout</td><td>Main Screen → Spout 텍스처 출력 (UI 제외)</td></tr>
</tbody></table>
<h3>2.7 다국어 지원</h3><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>지원 언어</td><td>한국어, 영어</td></tr>
<tr><td>선택 시점</td><td>최초 실행 시 + 설정에서 변경 가능</td></tr>
<tr><td>적용 방식</td><td>Localization 키 기반 텍스트 치환</td></tr>
</tbody></table>
<h3>2.8 Figma 디자인 화면 목록</h3><p>Figma에서 관리되는 주요 디자인 화면:</p><table>
<thead><tr><th>카테고리</th><th>화면</th><th>수량</th></tr></thead>
<tbody>
<tr><td>런처</td><td>대기, 토큰, 업데이트, 에러 등</td><td>9개</td></tr>
<tr><td>로그인</td><td>기본, 비밀번호 표시</td><td>2개</td></tr>
<tr><td>회원가입</td><td>이메일 인증 ~ 가입 완료</td><td>9개</td></tr>
<tr><td>액터 설정</td><td>메인, 아바타, 트래커, 표정</td><td>4개</td></tr>
<tr><td>월드 설정</td><td>리스트, 상세, 생성, 편집</td><td>4개</td></tr>
<tr><td>월드 진입</td><td>로딩, 메인 뷰, 설정 오버레이</td><td>3개</td></tr>
<tr><td>카메라</td><td>모드별 레이아웃, Channel Link</td><td>복수</td></tr>
</tbody></table>
> Figma 디자인은 별도로 관리되며, 이 문서에서는 화면 구성과 기능 정의만 다룬다.</p><hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 역할별 UI 분기</h3><p>Creator와 Manager는 로비에서 표시되는 패널이 다르다. Manager에게는 아바타/트래커 패널이 표시되지 않는다. 세션 생성은 역할과 무관하게 가능하며, Free 플랜만 제한된다. 이를 위한 UI 분기 처리가 필요하다.</p><h3>3.2 반응형 레이아웃</h3><p>해상도 변경 시 UI가 적절히 대응해야 한다. 특히 Manager 모드의 3분할 레이아웃(Main + Spectator + Manager CAM)은 해상도에 따라 비율 조정이 필요하다.</p><h3>3.3 키바인딩 커스터마이징</h3><p>카메라 전환(R+1~9), 이동(WASD), 기타 단축키는 사용자가 커스터마이즈할 수 있어야 한다. KeyBinder 시스템을 통해 가상 키를 물리 키에 매핑한다.</p><h3>3.4 Spout 모드 UI 제외</h3><p>Spout 출력 시 UI가 포함되지 않아야 한다. 이를 위해 Main Screen 렌더링과 UI 렌더링이 분리되어야 한다.</p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>사용자명 16자 초과</td><td>말줄임 처리 (앞 16자 + "...")</td></tr>
<tr><td>네트워크 오류 시 로딩</td><td>타임아웃 후 에러 다이얼로그 표시</td></tr>
<tr><td>월드 로딩 중 UI 인터랙션</td><td>로딩 중 다른 조작 차단</td></tr>
<tr><td>채팅 메시지 폭주 (스팸)</td><td>스크롤 처리, 최대 메시지 수 제한</td></tr>
<tr><td>다국어 텍스트 길이 차이</td><td>레이아웃이 텍스트 길이에 적응</td></tr>
<tr><td>키바인딩 충돌</td><td>동일 키 중복 할당 시 경고</td></tr>
</tbody></table>
<hr></p><h2>5. 검토 중인 기능</h2><h3>5.1 활성 월드 리스트 (검토 중)</h3><p>> ⚠️ <strong>상태:</strong> 고민 중. UX 담당 유수진님과 협의 필요.</p><p>현재 별도의 "내 월드" 관리 패널이 없어, <strong>활성 월드 리스트</strong> 기능을 검토 중이다.</p><p><strong>검토 중인 기능:</strong></p><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td><strong>활성 월드 리스트</strong></td><td>현재 열려있는 월드 목록 표시</td></tr>
<tr><td><strong>내가 호스트인 월드</strong></td><td>본인이 호스트인 활성 월드 관리</td></tr>
<tr><td><strong>친구의 월드</strong></td><td>친구가 접속 중인 월드 목록</td></tr>
<tr><td><strong>재접속 / 월드 닫기</strong></td><td>호스트인 월드에 대한 관리 기능</td></tr>
</tbody></table>
<strong>고려사항:</strong></p><table>
<thead><tr><th>항목</th><th>내용</th></tr></thead>
<tbody>
<tr><td><strong>장점</strong></td><td>내 월드와 친구 월드를 한 곳에서 확인 가능, 재접속 편의성 향상</td></tr>
<tr><td><strong>단점</strong></td><td>기존 월드 패널과 역할이 중복될 수 있음</td></tr>
<tr><td><strong>연계 이슈</strong></td><td>이 기능 도입 시 기존 월드 패널 개편이 필요할 수 있음</td></tr>
</tbody></table>
<strong>결정 필요 사항:</strong>
1. 활성 월드 리스트를 별도 패널로 분리할지, 기존 월드 패널에 통합할지
2. 친구 월드 표시 시 프라이버시 설정 필요 여부
3. 월드 패널 전체 UX 재설계 필요 여부</p><p>> 📋 <strong>다음 단계:</strong> UX 담당 유수진님과 논의 후 방향 결정</p><hr></p><h2>6. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>활성 월드 리스트</strong></td><td>내 월드/친구 월드 관리 (검토 중)</td><td>높음</td></tr>
<tr><td><strong>튜토리얼</strong></td><td>최초 실행 시 가이드 투어</td><td>중간</td></tr>
<tr><td><strong>프로필 페이지</strong></td><td>프로필 이미지, 자기소개, 포트폴리오</td><td>낮음</td></tr>
<tr><td><strong>알림 센터</strong></td><td>공지사항, 친구 접속, 월드 업데이트 알림</td><td>중간</td></tr>
<tr><td><strong>다크 모드</strong></td><td>UI 테마 전환</td><td>낮음</td></tr>
<tr><td><strong>추가 언어</strong></td><td>일본어, 중국어 등</td><td>장기</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><p><li>사용자 플로우</li>
<li>카메라 시스템</li>
<li>사용자 역할</li>
<li>데이터 생명주기</li>
</ul>
</section>
<section id="05_Technical_01_Architecture" class="doc-section">
<div class="doc-header"><span class="doc-category">기술 설계</span></div>
<h1>기술 아키텍처</h1><hr></p><h2>1. 개요</h2><p>VIRDY는 Unity 2022.3 LTS 기반의 Windows x64 전용 클라이언트 애플리케이션이다. 서버 로직은 Firebase (Auth, Firestore, Storage, Functions)와 Photon Fusion 2에 위임하며, 클라이언트는 3개 씬 구조(Sign → Lobby → World)와 Context 서비스 로케이터 패턴을 중심으로 설계된다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 기술 스택</h3><h4>핵심 기술</h4><table>
<thead><tr><th>영역</th><th>기술</th><th>버전/모드</th></tr></thead>
<tbody>
<tr><td>게임 엔진</td><td>Unity</td><td>2022.3.62f3 LTS</td></tr>
<tr><td>렌더 파이프라인</td><td>Universal Render Pipeline (URP)</td><td>14.0.12</td></tr>
<tr><td>렌더링 모드</td><td>Forward+</td><td>-</td></tr>
<tr><td>네트워킹</td><td>Photon Fusion 2</td><td>Shared Mode</td></tr>
<tr><td>백엔드</td><td>Firebase</td><td>Auth, Firestore, Storage, Functions</td></tr>
<tr><td>채팅</td><td>Photon Chat</td><td>-</td></tr>
</tbody></table>
<h4>주요 패키지</h4><table>
<thead><tr><th>패키지</th><th>용도</th></tr></thead>
<tbody>
<tr><td>UniTask</td><td>비동기/await 유틸리티</td></tr>
<tr><td>UniVRM</td><td>VRM 아바타 로딩</td></tr>
<tr><td>Cinemachine</td><td>카메라 시스템</td></tr>
<tr><td>Final IK</td><td>인버스 키네마틱스</td></tr>
<tr><td>Animancer</td><td>애니메이션 상태 머신</td></tr>
<tr><td>MessagePack</td><td>직렬화</td></tr>
<tr><td>Newtonsoft.Json</td><td>JSON 파싱</td></tr>
<tr><td>Klak.Spout</td><td>Spout 텍스처 공유 (Windows)</td></tr>
<tr><td>DOTween</td><td>트윈 애니메이션</td></tr>
</tbody></table>
<h4>외부 플러그인</h4><table>
<thead><tr><th>플러그인</th><th>용도</th></tr></thead>
<tbody>
<tr><td>ParrelSync</td><td>멀티 인스턴스 테스팅</td></tr>
<tr><td>RuntimeTransformHandle</td><td>월드 내 오브젝트 조작</td></tr>
<tr><td>uOSC</td><td>OSC 프로토콜 (VMC, VRChat OSC)</td></tr>
<tr><td>uWindowCapture</td><td>가상 배경용 윈도우 캡처</td></tr>
<tr><td>VSF SDK</td><td>VSeeFace 통합</td></tr>
</tbody></table>
<h3>2.2 서비스 로케이터 패턴 (Context)</h3><p>VIRDY는 Context 싱글톤을 통해 전역 서비스에 접근하는 서비스 로케이터 패턴을 사용한다.</p><h4>Context에 등록된 서비스</h4><table>
<thead><tr><th>서비스</th><th>역할</th></tr></thead>
<tbody>
<tr><td>SceneService</td><td>씬 수명주기 관리, 씬 전환</td></tr>
<tr><td>FirebaseService</td><td>Firebase 인증/데이터/스토리지 통합</td></tr>
<tr><td>FusionService</td><td>Photon Fusion 세션 관리</td></tr>
<tr><td>Database</td><td>로컬 데이터 캐시</td></tr>
<tr><td>ActorManager</td><td>액터 생성/삭제/관리</td></tr>
<tr><td>ChatService</td><td>Photon Chat 메시징</td></tr>
<tr><td>Cache</td><td>에셋(아바타, 월드) 캐싱</td></tr>
<tr><td>KeyBinder</td><td>전역 키보드 단축키</td></tr>
<tr><td>AppSettings</td><td>앱 설정 (그래픽, 사운드 등)</td></tr>
<tr><td>HubSettings</td><td>모션캡처 허브 설정</td></tr>
</tbody></table>
모든 서비스는 Context의 static 필드로 접근하며, 씬 전환과 무관하게 유지된다.</p><h3>2.3 씬 구조</h3><p>VIRDY는 3개의 핵심 씬과 추가 로드(Additive)되는 월드 씬으로 구성된다.</p><table>
<thead><tr><th>씬</th><th>빌드 인덱스</th><th>역할</th></tr></thead>
<tbody>
<tr><td>SignScene</td><td>0</td><td>인증 (로그인, 회원가입, 비밀번호 리셋)</td></tr>
<tr><td>LobbyScene</td><td>1</td><td>설정 (액터, 아바타, 트래커, 월드 선택)</td></tr>
<tr><td>WorldScene</td><td>2</td><td>실시간 방송 (카메라, 채팅, 멀티유저)</td></tr>
<tr><td>AssetBundle 월드</td><td>Additive</td><td>WorldScene 위에 Additive 로드되는 사용자 월드</td></tr>
</tbody></table>
<h4>씬 전환 이벤트</h4><table>
<thead><tr><th>이벤트</th><th>발생 시점</th></tr></thead>
<tbody>
<tr><td>OnLobbyConnected</td><td>로비 씬 로드 완료</td></tr>
<tr><td>OnWorldConnected</td><td>월드 씬 + 네트워크 접속 완료</td></tr>
<tr><td>OnWorldDisconnected</td><td>월드에서 로비로 복귀</td></tr>
<tr><td>OnWorldConnectionFailed</td><td>월드 접속 실패</td></tr>
</tbody></table>
<h3>2.4 엔티티 시스템</h3><p>VIRDY 내부의 데이터 모델은 3개 계층으로 구성된다.</p><table>
<thead><tr><th>계층</th><th>역할</th><th>주요 클래스</th></tr></thead>
<tbody>
<tr><td>Entity</td><td>GUID 기반 식별, 생명주기 관리</td><td>EntityManager 자동 등록</td></tr>
<tr><td>StructuredData</td><td>복잡한 런타임 데이터</td><td>AvatarData, TrackerData, ChannelData</td></tr>
<tr><td>Asset</td><td>직렬화 가능한 씬 오브젝트</td><td>ActorAsset (JSON 저장/로드)</td></tr>
</tbody></table>
<h4>StructuredData 세부 구조</h4><table>
<thead><tr><th>데이터 클래스</th><th>하위 클래스</th></tr></thead>
<tbody>
<tr><td>TrackerData (추상)</td><td>FacialTrackerData, MotionTrackerData, HandTrackerData</td></tr>
<tr><td>FacialTrackerData</td><td>iFacialMocap, VTubeStudio, Facemotion3D, OpenSeeFace</td></tr>
<tr><td>MotionTrackerData</td><td>SteamVR, VMCProtocol, Xsens, Vicon, MOVIN</td></tr>
<tr><td>HandTrackerData</td><td>LeapMotion, Manus, Mollisen, StretchSense</td></tr>
</tbody></table>
<h4>FieldData 시스템</h4><p>StructuredData는 리플렉션 기반 속성 시스템(FieldData)을 사용한다. `[FieldData]` 어트리뷰트가 적용된 필드는 동적 get/set이 가능하며, 값 변경 시 `OnFieldDataChanged` 이벤트가 트리거된다.</p><h3>2.5 네트워크 오브젝트 계층</h3><p>Photon Fusion 2 Shared Mode로 동작하며, 네트워크 오브젝트는 아래 구조를 따른다.</p><table>
<thead><tr><th>네트워크 오브젝트</th><th>역할</th><th>주요 데이터</th></tr></thead>
<tbody>
<tr><td>NetworkGame</td><td>세션 루트</td><td>Players[255], Channels[255], Actors[]</td></tr>
<tr><td>NetworkPlayer</td><td>사용자당 1개</td><td>UserId, Username, IsCreator, HandlePosition/Rotation</td></tr>
<tr><td>NetworkChannel</td><td>사용자당 1개</td><td>10개 가상 카메라 데이터, Channel Link 상태, 포스트 프로세싱</td></tr>
<tr><td>NetworkActor</td><td>아바타당 1개</td><td>22개 본 회전, 40개 손가락 포즈, 100개 BlendShape, Props</td></tr>
</tbody></table>
<h4>데이터 압축</h4><table>
<thead><tr><th>데이터</th><th>원본 크기</th><th>압축 후</th><th>절감률</th></tr></thead>
<tbody>
<tr><td>Quaternion</td><td>16 bytes (float×4)</td><td>8 bytes (short×4)</td><td>50%</td></tr>
<tr><td>BlendShape</td><td>4 bytes (float)</td><td>1 byte (sbyte)</td><td>75%</td></tr>
<tr><td>Position</td><td>float3</td><td>Accuracy(0.1f) 양자화</td><td>가변</td></tr>
</tbody></table>
<h4>네트워크 최적화 기법</h4><table>
<thead><tr><th>기법</th><th>설명</th></tr></thead>
<tbody>
<tr><td>분산 업데이트</td><td>프레임당 최대 3명 액터만 업데이트 (라운드 로빈)</td></tr>
<tr><td>히스토리 보간</td><td>2프레임 히스토리 버퍼를 사용한 보간</td></tr>
<tr><td>변경 감지</td><td>변경된 데이터만 전송</td></tr>
<tr><td>양자화</td><td>[Networked, Accuracy()] 속성으로 데이터 양자화</td></tr>
</tbody></table>
<h3>2.6 Firebase 통합 구조</h3><p>Firebase 서비스는 4개 하위 모듈로 구성된다.</p><table>
<thead><tr><th>모듈</th><th>역할</th><th>주요 기능</th></tr></thead>
<tbody>
<tr><td>Auth (FBAuth)</td><td>인증</td><td>이메일 로그인, 사용자명 로그인, 회원가입, 비밀번호 리셋</td></tr>
<tr><td>Firestore (FBFirestore)</td><td>데이터</td><td>사용자/월드 데이터 CRUD, 친구 관리, 실시간 리스너</td></tr>
<tr><td>Storage (FBStorage)</td><td>파일 저장</td><td>아바타/월드 업로드/다운로드</td></tr>
<tr><td>Functions</td><td>서버 로직</td><td>signUpV2, resetPasswordV2, saveWorld, deleteWorld, getEmailByUsername</td></tr>
</tbody></table>
<h4>Firestore 데이터 구조</h4><table>
<thead><tr><th>컬렉션</th><th>주요 필드</th></tr></thead>
<tbody>
<tr><td>users/{userId}</td><td>username, email, isCreator</td></tr>
<tr><td>users/{userId}/avatars/{avatarId}</td><td>아바타 메타데이터</td></tr>
<tr><td>users/{userId}/friends/{friendId}</td><td>친구 관계</td></tr>
<tr><td>users/{userId}/requests/{requestId}</td><td>친구 요청</td></tr>
<tr><td>users/{userId}/favorites/{worldId}</td><td>즐겨찾기 월드</td></tr>
<tr><td>users/{userId}/shared/{worldId}</td><td>공유받은 월드</td></tr>
<tr><td>users/{userId}/worlds_private/{worldId}</td><td>비공개 월드</td></tr>
<tr><td>worlds_public/{worldId}</td><td>title, author, authorId, description, sceneName, isPublic, sharedWith, version, visits, urls[]</td></tr>
</tbody></table>
<h3>2.7 빌드 변형</h3><table>
<thead><tr><th>스크립팅 심볼</th><th>설명</th></tr></thead>
<tbody>
<tr><td>VIRDY_CORE</td><td>프레임워크 빌드</td></tr>
<tr><td>VIRDY_DOTWEEN</td><td>DOTween 애니메이션 활성화</td></tr>
</tbody></table>
<h3>2.8 프로젝트 폴더 구조</h3><table>
<thead><tr><th>폴더</th><th>역할</th></tr></thead>
<tbody>
<tr><td>Assets/Repack/Scripts/Data/</td><td>데이터 모델 (Entity, StructuredData, Asset)</td></tr>
<tr><td>Assets/Repack/Scripts/Database/</td><td>로컬 캐시</td></tr>
<tr><td>Assets/Repack/Scripts/Lobby/</td><td>로비 씬 로직</td></tr>
<tr><td>Assets/Repack/Scripts/Network/Firebase/</td><td>Firebase 통합</td></tr>
<tr><td>Assets/Repack/Scripts/Network/Photon/</td><td>Photon Fusion/Chat</td></tr>
<tr><td>Assets/Repack/Scripts/Scene/</td><td>씬 관리</td></tr>
<tr><td>Assets/Repack/Scripts/Sign/</td><td>인증 UI</td></tr>
<tr><td>Assets/Repack/Scripts/Utility/</td><td>유틸리티 (Context 포함)</td></tr>
<tr><td>Assets/Repack/Scripts/World/</td><td>월드 씬 로직</td></tr>
<tr><td>Assets/VIRDY-SDK/</td><td>SDK (Editor, Runtime, Samples)</td></tr>
<tr><td>Assets/ExternalPlugins/</td><td>외부 플러그인</td></tr>
</tbody></table>
<h3>2.9 배포 플랫폼</h3><table>
<thead><tr><th>플랫폼</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>Windows x64</td><td>✅ 지원</td><td>주요 플랫폼</td></tr>
<tr><td>Steam</td><td>📋 계획</td><td>상용화 시 출시 예정</td></tr>
<tr><td>macOS</td><td>❌ 미지원</td><td>Spout, 일부 트래커 미지원</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 성능 최적화</h3><h4>아바타</h4><table>
<thead><tr><th>항목</th><th>권장 사항</th></tr></thead>
<tbody>
<tr><td>BlendShape 수</td><td>제한 권장 (프레임당 CPU 비용 높음)</td></tr>
<tr><td>메시 LOD</td><td>원거리 액터에 적용 검토</td></tr>
<tr><td>애니메이션</td><td>절차적 IK 대신 베이킹 우선</td></tr>
</tbody></table>
<h4>네트워크 대역폭</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>주요 소비</td><td>액터 본 업데이트</td></tr>
<tr><td>대규모 세션</td><td>액터 수 감소 권장</td></tr>
<tr><td>고정 카메라</td><td>FreeCam보다 전송 빈도 낮음</td></tr>
</tbody></table>
<h4>렌더링</h4><table>
<thead><tr><th>항목</th><th>설명</th></tr></thead>
<tbody>
<tr><td>렌더 스케일</td><td>카메라별 조절 가능</td></tr>
<tr><td>포스트 프로세싱</td><td>모니터링 카메라에서는 비활성화 권장</td></tr>
<tr><td>Spout 모드</td><td>별도 렌더 타겟 사용 (메모리 집약적)</td></tr>
</tbody></table>
<h4>메모리 관리</h4><table>
<thead><tr><th>항목</th><th>조치</th></tr></thead>
<tbody>
<tr><td>AssetBundle</td><td>월드 퇴장 후 Unload(true) 호출</td></tr>
<tr><td>아바타 캐시</td><td>주기적 정리</td></tr>
<tr><td>텍스처 메모리</td><td>모니터링 필요 (아바타 텍스처 용량이 큼)</td></tr>
</tbody></table>
<h3>3.2 Context 패턴의 장단점</h3><table>
<thead><tr><th>장점</th><th>단점</th></tr></thead>
<tbody>
<tr><td>서비스 접근이 간편</td><td>테스트 시 mock 주입 어려움</td></tr>
<tr><td>씬 전환 시에도 서비스 유지</td><td>의존성이 명시적이지 않음</td></tr>
<tr><td>초기 설정이 단순</td><td>서비스 간 순환 참조 가능성</td></tr>
</tbody></table>
향후 의존성 주입(DI) 컨테이너로의 전환을 고려할 수 있다.</p><h3>3.3 Shared Mode의 특성</h3><p>Photon Fusion 2 Shared Mode는 서버 권한(Server Authority) 없이 클라이언트 간 데이터를 동기화한다. 각 클라이언트가 자신의 NetworkObject에 대한 State Authority를 갖는다.</p><table>
<thead><tr><th>특성</th><th>설명</th></tr></thead>
<tbody>
<tr><td>서버 권한</td><td>없음 (각 클라이언트가 자체 객체 권한)</td></tr>
<tr><td>장점</td><td>구현 단순, 지연 시간 낮음</td></tr>
<tr><td>단점</td><td>치트 방지 어려움, 서버 측 검증 불가</td></tr>
<tr><td>적합</td><td>협업/방송 환경 (경쟁적 요소 적음)</td></tr>
</tbody></table>
<hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>Context 초기화 전 서비스 접근</td><td>null 체크 또는 초기화 순서 보장</td></tr>
<tr><td>씬 전환 중 비동기 작업</td><td>UniTask CancellationToken으로 취소 처리</td></tr>
<tr><td>AssetBundle 로드 실패</td><td>에러 다이얼로그 표시, 로비로 복귀</td></tr>
<tr><td>Photon 세션 연결 실패</td><td>재시도 로직 + 사용자 알림</td></tr>
<tr><td>Firebase 서비스 장애</td><td>오프라인 캐시 활용 (제한적), 에러 안내</td></tr>
<tr><td>네트워크 오브젝트 소유권 충돌</td><td>State Authority 기반 충돌 해소</td></tr>
<tr><td>대규모 세션에서 성능 저하</td><td>프레임당 액터 업데이트 수 제한 (라운드 로빈)</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>DI 컨테이너 도입</strong></td><td>Context 서비스 로케이터를 DI 컨테이너로 교체</td><td>중간</td></tr>
<tr><td><strong>ECS 전환</strong></td><td>대규모 액터 처리를 위한 Entity Component System 검토</td><td>장기</td></tr>
<tr><td><strong>서버 권한 모드</strong></td><td>경쟁적 기능 추가 시 Host Mode 전환 검토</td><td>장기</td></tr>
<tr><td><strong>자동 테스트 파이프라인</strong></td><td>CI/CD 연동 자동 빌드 및 테스트</td><td>중간</td></tr>
<tr><td><strong>코드 모듈화</strong></td><td>패키지 매니저 기반 모듈 분리</td><td>낮음</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><ul><li>개발 현황</li>
<li>네트워크 시스템</li>
<li>보안 시스템</li>
<li>제품 개요</li>
</ul>
</section>
<section id="05_Technical_02_Development_Status" class="doc-section">
<div class="doc-header"><span class="doc-category">기술 설계</span></div>
<h1>개발 현황</h1><hr></p><h2>1. 개요</h2><p>이 문서는 VIRDY의 기능별 개발 진행 상태, 알려진 제한사항, 기술 부채, 로드맵을 정리한다. 기획/개발/운영 전반에서 현재 상태를 파악하고 우선순위를 판단하는 기준 문서로 활용한다.</p><hr></p><h2>2. 핵심 기획</h2><h3>2.1 전체 진행률</h3><table>
<thead><tr><th>영역</th><th>상태</th><th>완성도</th></tr></thead>
<tbody>
<tr><td>핵심 기능 (아바타, 트래커, 카메라, 월드)</td><td>✅ 구현 완료</td><td>90%</td></tr>
<tr><td>네트워킹 (Photon Fusion 2, Chat)</td><td>✅ 구현 완료</td><td>95%</td></tr>
<tr><td>UI/UX</td><td>✅ 구현 완료</td><td>85%</td></tr>
<tr><td>SDK</td><td>✅ 구현 완료</td><td>80%</td></tr>
<tr><td>라이선스</td><td>🚧 기본 구현</td><td>30%</td></tr>
<tr><td>보안</td><td>🚧 기본 구현</td><td>60%</td></tr>
</tbody></table>
<h3>2.2 기능별 구현 상태</h3><h4>아바타 시스템</h4><table>
<thead><tr><th>기능</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>VRM 0.x 로딩</td><td>✅ 완료</td><td>UniVRM 사용</td></tr>
<tr><td>머티리얼 변환 (MToon → URP)</td><td>✅ 완료</td><td>자동 변환</td></tr>
<tr><td>BlendShape 동기화</td><td>✅ 완료</td><td>100개 지원</td></tr>
<tr><td>아바타 캐싱</td><td>✅ 완료</td><td>Standard 빌드만</td></tr>
<tr><td>VRM 암호화 저장</td><td>✅ 완료</td><td>업로드/캐시 암호화</td></tr>
<tr><td>VRM 1.0 지원</td><td>📋 계획</td><td>차세대 포맷</td></tr>
<tr><td>아바타 런타임 커스터마이징</td><td>📋 계획</td><td></td></tr>
</tbody></table>
<h4>트래커 시스템</h4><table>
<thead><tr><th>카테고리</th><th>장비</th><th>상태</th></tr></thead>
<tbody>
<tr><td><strong>Facial</strong></td><td>iFacialMocap</td><td>✅ 완료</td></tr>
<tr><td></td><td>VTube Studio</td><td>✅ 완료</td></tr>
<tr><td></td><td>Facemotion3D</td><td>✅ 완료</td></tr>
<tr><td></td><td>OpenSeeFace</td><td>✅ 완료</td></tr>
<tr><td><strong>Body</strong></td><td>SteamVR</td><td>✅ 완료</td></tr>
<tr><td></td><td>VMC Protocol</td><td>✅ 완료</td></tr>
<tr><td></td><td>Xsens</td><td>✅ 완료</td></tr>
<tr><td></td><td>Vicon</td><td>✅ 완료</td></tr>
<tr><td></td><td>MOVIN</td><td>✅ 완료</td></tr>
<tr><td></td><td>Optitrack</td><td>📋 계획</td></tr>
<tr><td><strong>Hand</strong></td><td>Leap Motion</td><td>✅ 완료</td></tr>
<tr><td></td><td>Manus</td><td>✅ 완료</td></tr>
<tr><td></td><td>Mollisen</td><td>✅ 완료</td></tr>
<tr><td></td><td>StretchSense</td><td>✅ 완료</td></tr>
</tbody></table>
<h4>카메라 시스템</h4><table>
<thead><tr><th>기능</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>10채널 가상 카메라</td><td>✅ 완료</td><td>FreeCam + 9 Fixed</td></tr>
<tr><td>Channel Link</td><td>✅ 완료</td><td>Send/Receive</td></tr>
<tr><td>View 모드 (Default/Manager/Studio/Spout)</td><td>✅ 완료</td><td></td></tr>
<tr><td>Spout 출력</td><td>✅ 완료</td><td>Windows 전용</td></tr>
<tr><td>카메라 프리셋</td><td>✅ 완료</td><td></td></tr>
<tr><td>DoF 제어</td><td>✅ 완료</td><td>Cinemachine</td></tr>
<tr><td>NDI 출력</td><td>📋 계획</td><td></td></tr>
</tbody></table>
<h4>월드 시스템</h4><table>
<thead><tr><th>기능</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>AssetBundle 월드 로딩</td><td>✅ 완료</td><td></td></tr>
<tr><td>월드 공유 (Public/Private/Private+)</td><td>✅ 완료</td><td></td></tr>
<tr><td>VIRDYWorldDescriptor</td><td>✅ 완료</td><td>SDK 연동</td></tr>
<tr><td>런타임 라이팅 제어</td><td>✅ 완료</td><td></td></tr>
<tr><td>런타임 포스트 프로세싱</td><td>✅ 완료</td><td></td></tr>
<tr><td>월드 버전 관리</td><td>✅ 완료</td><td></td></tr>
<tr><td>월드 마켓플레이스</td><td>📋 계획</td><td></td></tr>
</tbody></table>
<h4>네트워크 시스템</h4><table>
<thead><tr><th>기능</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>Photon Fusion 2 Shared Mode</td><td>✅ 완료</td><td></td></tr>
<tr><td>세션 생성/참가</td><td>✅ 완료</td><td></td></tr>
<tr><td>아바타 동기화 (압축 포함)</td><td>✅ 완료</td><td></td></tr>
<tr><td>카메라 동기화</td><td>✅ 완료</td><td></td></tr>
<tr><td>Photon Chat (텍스트)</td><td>✅ 완료</td><td></td></tr>
<tr><td>팀 채팅 (Creator/Manager 분리)</td><td>✅ 완료</td><td></td></tr>
<tr><td>음성 채팅</td><td>📋 계획</td><td></td></tr>
<tr><td>녹화/재생 기능</td><td>📋 계획</td><td></td></tr>
</tbody></table>
<h3>2.3 빌드 변형 상태</h3><table>
<thead><tr><th>빌드</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>Standard Build</td><td>✅ 완료</td><td>전체 기능</td></tr>
<tr><td>Enterprise Build</td><td>📋 계획</td><td>확장 기능</td></tr>
</tbody></table>
<h3>2.4 알려진 제한사항</h3><h4>기술적 제한</h4><table>
<thead><tr><th>항목</th><th>제한</th><th>비고</th></tr></thead>
<tbody>
<tr><td>최대 액터 (Standard)</td><td>6명</td><td>ActorManager 하드 제한</td></tr>
<tr><td>최대 세션 인원</td><td>100명</td><td>Photon 설정</td></tr>
<tr><td>프레임당 액터 업데이트</td><td>3명</td><td>대역폭 최적화</td></tr>
<tr><td>동기화 본 수</td><td>22개</td><td>HumanBodyBones 서브셋</td></tr>
<tr><td>BlendShape 동기화</td><td>100개</td><td>네트워크 배열 제한</td></tr>
<tr><td>액터당 Props</td><td>20개</td><td></td></tr>
</tbody></table>
<h4>기능적 제한</h4><table>
<thead><tr><th>항목</th><th>상태</th><th>비고</th></tr></thead>
<tbody>
<tr><td>음성 채팅</td><td>❌ 미구현</td><td>Photon Voice 검토</td></tr>
<tr><td>녹화/재생</td><td>❌ 미구현</td><td></td></tr>
<tr><td>라이선스 서버 검증</td><td>⚠️ 클라이언트 측만</td><td>서버 검증 필요</td></tr>
<tr><td>2FA/MFA</td><td>❌ 미구현</td><td></td></tr>
<tr><td>macOS Spout</td><td>❌ 미지원</td><td>Windows 전용 API</td></tr>
</tbody></table>
<h3>2.5 기술 부채</h3><h4>높은 우선순위</h4><table>
<thead><tr><th>항목</th><th>설명</th><th>권장 조치</th></tr></thead>
<tbody>
<tr><td>클라이언트 측 라이선스</td><td>컴파일 심볼 기반으로 우회 가능</td><td>서버 측 라이선스 검증 구현</td></tr>
<tr><td>Firestore 역할 평문 저장</td><td>isCreator 필드가 평문</td><td>난독화 또는 서버 측 검증 강화</td></tr>
<tr><td>인증 속도 제한 없음</td><td>브루트포스 공격 취약</td><td>Firebase Functions에 rate limit 적용</td></tr>
</tbody></table>
<h4>중간 우선순위</h4><table>
<thead><tr><th>항목</th><th>설명</th><th>권장 조치</th></tr></thead>
<tbody>
<tr><td>감사 로깅 부족</td><td>사용자 행동 추적 어려움</td><td>로깅 시스템 구현</td></tr>
<tr><td>단위 테스트 부족</td><td>품질 리스크</td><td>테스트 커버리지 확대</td></tr>
<tr><td>로컬 캐시 보호 미흡</td><td>캐시 데이터 노출 가능</td><td>캐시 암호화 강화</td></tr>
</tbody></table>
<h4>낮은 우선순위</h4><table>
<thead><tr><th>항목</th><th>설명</th><th>권장 조치</th></tr></thead>
<tbody>
<tr><td>API 문서화 부족</td><td>신규 개발자 온보딩 어려움</td><td>SDK/API 문서 정비</td></tr>
<tr><td>코드 중복</td><td>유지보수 비용 증가</td><td>리팩토링</td></tr>
</tbody></table>
<h3>2.6 로드맵</h3><h4>단기 (1~3개월)</h4><table>
<thead><tr><th>항목</th><th>우선순위</th><th>설명</th></tr></thead>
<tbody>
<tr><td>VRM 1.0 지원</td><td>높음</td><td>최신 VRM 표준 대응</td></tr>
<tr><td>Optitrack 통합</td><td>중간</td><td>엔터프라이즈 수요 대응</td></tr>
<tr><td>UI/UX 개선</td><td>중간</td><td>사용성 향상</td></tr>
<tr><td>안정성 버그 수정</td><td>높음</td><td>기존 기능 안정화</td></tr>
</tbody></table>
<h4>중기 (3~6개월)</h4><table>
<thead><tr><th>항목</th><th>우선순위</th><th>설명</th></tr></thead>
<tbody>
<tr><td>음성 채팅</td><td>높음</td><td>Photon Voice 통합</td></tr>
<tr><td>녹화 기능</td><td>중간</td><td>세션 녹화/재생</td></tr>
<tr><td>NDI 출력</td><td>중간</td><td>방송 장비 연동</td></tr>
<tr><td>서버 측 라이선스 검증</td><td>높음</td><td>보안 강화</td></tr>
</tbody></table>
<h4>장기 (6개월+)</h4><table>
<thead><tr><th>항목</th><th>우선순위</th><th>설명</th></tr></thead>
<tbody>
<tr><td>월드 마켓플레이스</td><td>중간</td><td>월드 공유 플랫폼</td></tr>
<tr><td>Steam 출시</td><td>높음</td><td>상용화</td></tr>
<tr><td>엔터프라이즈 라이선스</td><td>중간</td><td>B2B 기능 확장</td></tr>
<tr><td>모바일 뷰어</td><td>낮음</td><td>시청 전용 앱</td></tr>
</tbody></table>
<h3>2.7 버전 정보</h3><h4>현재 버전</h4><table>
<thead><tr><th>구성 요소</th><th>버전</th></tr></thead>
<tbody>
<tr><td>Unity</td><td>2022.3.62f3 LTS</td></tr>
<tr><td>URP</td><td>14.0.12</td></tr>
<tr><td>Photon Fusion</td><td>2.x</td></tr>
<tr><td>UniVRM</td><td>최신</td></tr>
<tr><td>VIRDY SDK</td><td>0.0.2</td></tr>
</tbody></table>
<h4>향후 릴리스 계획</h4><table>
<thead><tr><th>버전</th><th>예상 내용</th></tr></thead>
<tbody>
<tr><td>1.0.0</td><td>안정화 릴리스</td></tr>
<tr><td>1.1.0</td><td>VRM 1.0 지원</td></tr>
<tr><td>1.2.0</td><td>음성 채팅</td></tr>
<tr><td>2.0.0</td><td>Steam 출시</td></tr>
</tbody></table>
<h3>2.8 개발 환경 요구사항</h3><h4>최소 요구사항</h4><table>
<thead><tr><th>항목</th><th>요구사항</th></tr></thead>
<tbody>
<tr><td>OS</td><td>Windows 10/11 x64</td></tr>
<tr><td>Unity</td><td>2022.3.62f3</td></tr>
<tr><td>RAM</td><td>16GB</td></tr>
<tr><td>GPU</td><td>DirectX 11 지원</td></tr>
<tr><td>저장소</td><td>50GB 이상</td></tr>
</tbody></table>
<h4>권장 요구사항</h4><table>
<thead><tr><th>항목</th><th>권장</th></tr></thead>
<tbody>
<tr><td>OS</td><td>Windows 11 x64</td></tr>
<tr><td>Unity</td><td>2022.3.62f3 LTS</td></tr>
<tr><td>RAM</td><td>32GB</td></tr>
<tr><td>GPU</td><td>RTX 3060 이상</td></tr>
<tr><td>저장소</td><td>SSD 100GB</td></tr>
</tbody></table>
<h3>2.9 테스팅 현황</h3><h4>테스트 커버리지</h4><table>
<thead><tr><th>영역</th><th>수준</th><th>비고</th></tr></thead>
<tbody>
<tr><td>단위 테스트</td><td>낮음</td><td>확대 필요</td></tr>
<tr><td>통합 테스트</td><td>중간</td><td>수동 테스트 위주</td></tr>
<tr><td>E2E 테스트</td><td>낮음</td><td>자동화 필요</td></tr>
<tr><td>성능 테스트</td><td>중간</td><td>Unity Profiler 활용</td></tr>
</tbody></table>
<h4>테스팅 도구</h4><table>
<thead><tr><th>도구</th><th>용도</th></tr></thead>
<tbody>
<tr><td>ParrelSync</td><td>멀티 인스턴스 네트워크 테스트</td></tr>
<tr><td>Unity Profiler</td><td>성능 분석</td></tr>
<tr><td>Memory Profiler</td><td>메모리 분석</td></tr>
</tbody></table>
<hr></p><h2>3. 설계 시 고려사항</h2><h3>3.1 라이선스 시스템 강화</h3><p>상용화 전에 서버 측 라이선스 서버를 구축하여 기능 접근을 제어해야 한다.</p><h3>3.2 테스트 자동화</h3><p>단위/통합/E2E 테스트 커버리지가 낮아 리그레션 위험이 있다. CI/CD 파이프라인에 자동 테스트를 통합하여 빌드 안정성을 확보해야 한다.</p><h3>3.3 문서화</h3><p>SDK와 내부 API의 문서화가 부족하여 신규 개발자 온보딩에 시간이 소요된다. SDK 문서 정비와 코드 주석 추가를 병행해야 한다.</p><hr></p><h2>4. 엣지 케이스 및 예외 처리</h2><table>
<thead><tr><th>상황</th><th>대응</th></tr></thead>
<tbody>
<tr><td>미구현 기능 접근 시도</td><td>"준비 중" 안내 메시지 표시</td></tr>
<tr><td>레거시 버전 클라이언트 접속</td><td>Photon 로비 버전 분리로 자동 격리</td></tr>
<tr><td>지원 종료된 트래커 장비</td><td>해당 장비 옵션 숨김, 호환성 안내</td></tr>
<tr><td>서버 점검 중 접속</td><td>점검 공지 + 예상 완료 시각 안내</td></tr>
</tbody></table>
<hr></p><h2>5. 향후 확장 가능성</h2><table>
<thead><tr><th>항목</th><th>설명</th><th>우선순위</th></tr></thead>
<tbody>
<tr><td><strong>CI/CD 파이프라인</strong></td><td>자동 빌드, 테스트, 배포</td><td>높음</td></tr>
<tr><td><strong>성능 대시보드</strong></td><td>실시간 서버/클라이언트 메트릭 모니터링</td><td>중간</td></tr>
<tr><td><strong>A/B 테스트</strong></td><td>기능 출시 전 일부 사용자 대상 테스트</td><td>낮음</td></tr>
<tr><td><strong>크래시 리포팅</strong></td><td>자동 크래시 로그 수집 및 분석</td><td>높음</td></tr>
<tr><td><strong>원격 설정</strong></td><td>Firebase Remote Config 활용</td><td>중간</td></tr>
</tbody></table>
<hr></p><h2>관련 문서</h2><ul><li>기술 아키텍처</li>
<li>라이선스 체계</li>
<li>보안 시스템</li>
<li>제품 개요</li>
</ul>
</section>

        </main>
    </div>
</body>
</html>
